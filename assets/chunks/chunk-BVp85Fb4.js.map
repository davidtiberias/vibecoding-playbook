{"version":3,"file":"chunk-BVp85Fb4.js","sources":["../../../../src/config/ads.ts","../../../../src/utils/adLayout.ts","../../../../src/components/AdBrick.tsx","../../../../src/components/Monetization.tsx"],"sourcesContent":["// src/config/ads.ts\r\n\r\nexport type VibeStatus = \"VERIFIED\" | \"FAILED\";\r\nexport type AdRole =\r\n  | \"AGENTIC_IDE\"\r\n  | \"CODE_REFACTOR\"\r\n  | \"INFRA_TOOLING\"\r\n  | \"UNVERIFIED\";\r\n\r\nexport interface AdEntry {\r\n  id: string;\r\n  name: string;\r\n  role: AdRole;\r\n  vibeStatus: VibeStatus;\r\n  url: string;\r\n  description: string;\r\n  shortDescription: string;\r\n}\r\n\r\nexport const AD_LIBRARY: AdEntry[] = [\r\n  // == Dependencies ==\r\n  {\r\n    id: \"PKG_GENAI\",\r\n    name: \"@google/genai\",\r\n    role: \"AGENTIC_IDE\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@google/genai\",\r\n    description: \"The official Google AI SDK for Node.js, enabling access to Gemini and other generative models.\",\r\n    shortDescription: \"Google AI SDK.\",\r\n  },\r\n  {\r\n    id: \"PKG_BUFFER\",\r\n    name: \"buffer\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/buffer\",\r\n    description: \"A polyfill for Node.js's Buffer API, essential for cross-platform compatibility in browsers.\",\r\n    shortDescription: \"Node.js Buffer polyfill.\",\r\n  },\r\n  {\r\n    id: \"PKG_GRAY_MATTER\",\r\n    name: \"gray-matter\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/gray-matter\",\r\n    description: \"A library to parse front-matter from strings or files, commonly used in static site generators.\",\r\n    shortDescription: \"Front-matter parser.\",\r\n  },\r\n  {\r\n    id: \"PKG_REACT\",\r\n    name: \"React\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/react\",\r\n    description: \"A JavaScript library for building user interfaces with a component-based architecture.\",\r\n    shortDescription: \"UI component library.\",\r\n  },\r\n  {\r\n    id: \"PKG_REACT_DOM\",\r\n    name: \"React DOM\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/react-dom\",\r\n    description: \"Serves as the entry point to the DOM and server renderers for React.\",\r\n    shortDescription: \"React DOM renderer.\",\r\n  },\r\n  {\r\n    id: \"PKG_REACT_MARKDOWN\",\r\n    name: \"react-markdown\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/react-markdown\",\r\n    description: \"A React component to render Markdown, with support for plugins and custom components.\",\r\n    shortDescription: \"Render Markdown in React.\",\r\n  },\r\n  {\r\n    id: \"PKG_REMARK_GFM\",\r\n    name: \"remark-gfm\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/remark-gfm\",\r\n    description: \"A remark plugin to add support for GitHub Flavored Markdown features like tables and strikethrough.\",\r\n    shortDescription: \"GitHub Flavored Markdown.\",\r\n  },\r\n  {\r\n    id: \"PKG_VIKE\",\r\n    name: \"Vike\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/vike\",\r\n    description: \"A file-based routing and server-side rendering framework, acting as a Vite-native alternative to Next.js.\",\r\n    shortDescription: \"Vite-native SSR framework.\",\r\n  },\r\n  {\r\n    id: \"PKG_VIKE_REACT\",\r\n    name: \"vike-react\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/vike-react\",\r\n    description: \"The official React integration for the Vike framework, enabling seamless SSR and SPA experiences.\",\r\n    shortDescription: \"React adapter for Vike.\",\r\n  },\r\n\r\n  // == Dev Dependencies ==\r\n  {\r\n    id: \"PKG_BABEL_PRESET_REACT\",\r\n    name: \"@babel/preset-react\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@babel/preset-react\",\r\n    description: \"A Babel preset for transforming JSX into JavaScript, a core part of the React toolchain.\",\r\n    shortDescription: \"Babel preset for JSX.\",\r\n  },\r\n  {\r\n    id: \"PKG_TAILWIND_TYPOGRAPHY\",\r\n    name: \"@tailwindcss/typography\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@tailwindcss/typography\",\r\n    description: \"A Tailwind CSS plugin that provides beautiful typographic defaults for prose content.\",\r\n    shortDescription: \"Tailwind prose plugin.\",\r\n  },\r\n  {\r\n    id: \"PKG_TYPES_NODE\",\r\n    name: \"@types/node\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@types/node\",\r\n    description: \"TypeScript definitions for Node.js, enabling static typing for Node's built-in modules.\",\r\n    shortDescription: \"TypeScript types for Node.\",\r\n  },\r\n  {\r\n    id: \"PKG_TYPES_REACT\",\r\n    name: \"@types/react\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@types/react\",\r\n    description: \"TypeScript definitions for React, providing type safety for components, hooks, and events.\",\r\n    shortDescription: \"TypeScript types for React.\",\r\n  },\r\n  {\r\n    id: \"PKG_TYPES_REACT_DOM\",\r\n    name: \"@types/react-dom\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@types/react-dom\",\r\n    description: \"TypeScript definitions for react-dom, covering DOM-specific rendering methods.\",\r\n    shortDescription: \"TypeScript types for ReactDOM.\",\r\n  },\r\n  {\r\n    id: \"PKG_TS_ESLINT_PLUGIN\",\r\n    name: \"@typescript-eslint/eslint-plugin\",\r\n    role: \"CODE_REFACTOR\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@typescript-eslint/eslint-plugin\",\r\n    description: \"An ESLint plugin which provides lint rules for TypeScript codebases.\",\r\n    shortDescription: \"ESLint rules for TypeScript.\",\r\n  },\r\n  {\r\n    id: \"PKG_TS_ESLINT_PARSER\",\r\n    name: \"@typescript-eslint/parser\",\r\n    role: \"CODE_REFACTOR\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@typescript-eslint/parser\",\r\n    description: \"An ESLint parser which allows ESLint to lint TypeScript source code.\",\r\n    shortDescription: \"ESLint parser for TypeScript.\",\r\n  },\r\n  {\r\n    id: \"PKG_VITE_PLUGIN_REACT\",\r\n    name: \"@vitejs/plugin-react\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/@vitejs/plugin-react\",\r\n    description: \"The official Vite plugin for React, enabling features like Fast Refresh and automatic JSX runtime.\",\r\n    shortDescription: \"Official Vite plugin for React.\",\r\n  },\r\n  {\r\n    id: \"PKG_AUTOPREFIXER\",\r\n    name: \"Autoprefixer\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/autoprefixer\",\r\n    description: \"A PostCSS plugin to parse CSS and add vendor prefixes to rules using values from Can I Use.\",\r\n    shortDescription: \"Adds CSS vendor prefixes.\",\r\n  },\r\n  {\r\n    id: \"PKG_ESLINT\",\r\n    name: \"ESLint\",\r\n    role: \"CODE_REFACTOR\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/eslint\",\r\n    description: \"A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript.\",\r\n    shortDescription: \"Code linter.\",\r\n  },\r\n  {\r\n    id: \"PKG_ESLINT_HOOKS\",\r\n    name: \"eslint-plugin-react-hooks\",\r\n    role: \"CODE_REFACTOR\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/eslint-plugin-react-hooks\",\r\n    description: \"An ESLint plugin that enforces the Rules of Hooks, preventing common mistakes.\",\r\n    shortDescription: \"Lints React Hooks usage.\",\r\n  },\r\n  {\r\n    id: \"PKG_ESLINT_REFRESH\",\r\n    name: \"eslint-plugin-react-refresh\",\r\n    role: \"CODE_REFACTOR\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/eslint-plugin-react-refresh\",\r\n    description: \"An ESLint plugin to validate that your components can be safely updated with Fast Refresh.\",\r\n    shortDescription: \"Validates Fast Refresh.\",\r\n  },\r\n  {\r\n    id: \"PKG_GHPAGES\",\r\n    name: \"gh-pages\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/gh-pages\",\r\n    description: \"A command-line utility to publish files to a gh-pages branch on GitHub.\",\r\n    shortDescription: \"Deploy to GitHub Pages.\",\r\n  },\r\n  {\r\n    id: \"PKG_POSTCSS\",\r\n    name: \"PostCSS\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/postcss\",\r\n    description: \"A tool for transforming CSS with JavaScript plugins, used by Tailwind and Autoprefixer.\",\r\n    shortDescription: \"CSS transformer.\",\r\n  },\r\n  {\r\n    id: \"PKG_TAILWIND\",\r\n    name: \"Tailwind CSS\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/tailwindcss\",\r\n    description: \"A utility-first CSS framework for rapidly building custom user interfaces without leaving your HTML.\",\r\n    shortDescription: \"Utility-first CSS.\",\r\n  },\r\n  {\r\n    id: \"PKG_TYPESCRIPT\",\r\n    name: \"TypeScript\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/typescript\",\r\n    description: \"A superset of JavaScript that adds static types, enabling more robust and maintainable code.\",\r\n    shortDescription: \"Static types for JS.\",\r\n  },\r\n  {\r\n    id: \"PKG_VITE\",\r\n    name: \"Vite\",\r\n    role: \"INFRA_TOOLING\",\r\n    vibeStatus: \"VERIFIED\",\r\n    url: \"https://www.npmjs.com/package/vite\",\r\n    description: \"Next-generation frontend tooling that provides an extremely fast development environment and bundles for production.\",\r\n    shortDescription: \"Fast frontend build tool.\",\r\n  },\r\n];","import { AdEntry } from \"../config/ads\";\r\n\r\n// --- TYPES & CONFIG ---\r\nexport type LayoutMode = \"stacked\" | \"inline\" | \"rotated\" | \"circle\";\r\nexport type LayoutBucket = \"COMPACT_STRIP\" | \"MEDIUM_STRIP\" | \"FULL_PANEL\";\r\n\r\nexport interface AdLayoutConfig {\r\n  // Ratios & Grace Zone\r\n  ROTATION_RATIO: number;\r\n  INLINE_RATIO: number;\r\n  GRACE_ZONE: number;\r\n\r\n  // Splitting Logic\r\n  TARGET_MULTIPLIER: number;\r\n  LONG_STRIP_MIN_LENGTH: number;\r\n  MIN_SPLIT_BUCKET: number;\r\n  MAX_DEPTH: number;\r\n\r\n  // Text & Content\r\n  CHAR_PER_UNIT: number;\r\n  ROTATED_CLAMP_RANGES: {\r\n    [key in LayoutBucket]: [number, number];\r\n  };\r\n\r\n  // Click Bait Mechanism\r\n  MIN_CLICKS_TO_LINK: number;\r\n  MAX_CLICKS_TO_LINK: number;\r\n}\r\n\r\nexport const DEFAULT_AD_LAYOUT_CONFIG: AdLayoutConfig = {\r\n  // Ratios & Grace Zone\r\n  ROTATION_RATIO: 2.5,\r\n  INLINE_RATIO: 6.0,\r\n  GRACE_ZONE: 0.1,\r\n\r\n  // Splitting Logic\r\n  TARGET_MULTIPLIER: 3,\r\n  LONG_STRIP_MIN_LENGTH: 4,\r\n  MIN_SPLIT_BUCKET: 2,\r\n  MAX_DEPTH: 4,\r\n\r\n  // Text & Content\r\n  CHAR_PER_UNIT: 5,\r\n  ROTATED_CLAMP_RANGES: {\r\n    COMPACT_STRIP: [8, 16],\r\n    MEDIUM_STRIP: [12, 28],\r\n    FULL_PANEL: [20, 60],\r\n  },\r\n\r\n  // Click Bait Mechanism\r\n  MIN_CLICKS_TO_LINK: 1,\r\n  MAX_CLICKS_TO_LINK: 3,\r\n};\r\n\r\nexport interface LayoutDecision {\r\n  mode: LayoutMode;\r\n  bucket: LayoutBucket;\r\n  logicalW: number;\r\n  logicalH: number;\r\n  canSplit: boolean;\r\n  isShapeOnly: boolean;\r\n  visibility: {\r\n    showRole: boolean;\r\n    showBadge: boolean;\r\n    showDesc: boolean;\r\n    useShortDesc: boolean;\r\n    showAction: boolean;\r\n  };\r\n  ariaLabel: string;\r\n  rotatedCharLimit?: number;\r\n  childSpans?: [[number, number], [number, number]];\r\n}\r\n\r\n// --- HELPERS ---\r\n\r\nexport const truncateText = (text: string, limit: number) =>\r\n  text.length > limit ? text.slice(0, limit - 1) + \"â€¦\" : text;\r\n\r\n/**\r\n * Determines the dimensions of the two children resulting from a split.\r\n * Implements special fixed splits first, then the general ceil/floor rule.\r\n * Returns null if no split is possible.\r\n */\r\nconst getSplitResult = (\r\n  w: number,\r\n  h: number,\r\n  config: AdLayoutConfig,\r\n  depth: number,\r\n  maxDepth: number\r\n): [[number, number], [number, number]] | null => {\r\n  if (depth >= maxDepth) return null;\r\n\r\n  const isLandscape = w >= h;\r\n  const long = isLandscape ? w : h;\r\n  const short = isLandscape ? h : w;\r\n  const key = `${long}x${short}`;\r\n\r\n  // Rule 5: Special fixed splits\r\n  const specialSplits: Record<string, [[number, number], [number, number]]> = {\r\n    '5x2': [[3, 2], [2, 2]],\r\n    '4x2': [[2, 2], [2, 2]],\r\n    '3x2': [[2, 2], [1, 2]],\r\n    '2x2': [[2, 1], [2, 1]],\r\n    '2x1': [[1, 1], [1, 1]],\r\n  };\r\n\r\n  if (specialSplits[key]) {\r\n    const [[c1L, c1S], [c2L, c2S]] = specialSplits[key];\r\n    return isLandscape\r\n      ? [[c1L, c1S], [c2L, c2S]]\r\n      : [[c1S, c1L], [c2S, c2L]];\r\n  }\r\n\r\n  // Rule 3 & 4: General splitting rules (Size trigger)\r\n  const targetLongSide = config.TARGET_MULTIPLIER * short;\r\n  const hasPotentialToSplit = long > targetLongSide && long > 1;\r\n  const isSplittableStrip = short === 1 && long >= config.LONG_STRIP_MIN_LENGTH;\r\n  \r\n  const canSplitGenerally =\r\n    (hasPotentialToSplit || isSplittableStrip) &&\r\n    (short >= config.MIN_SPLIT_BUCKET || isSplittableStrip);\r\n\r\n  if (canSplitGenerally) {\r\n    const half = long / 2;\r\n    const l1 = Math.ceil(half);\r\n    const l2 = Math.floor(half);\r\n    return isLandscape\r\n      ? [[l1, short], [l2, short]]\r\n      : [[short, l1], [short, l2]];\r\n  }\r\n\r\n  return null; // No split possible\r\n};\r\n\r\n// --- CORE LOGIC ---\r\n\r\n/**\r\n * A robust, deterministic layout engine based on the ELI5 specification.\r\n */\r\nexport const getLayoutDecision = (\r\n  ad: AdEntry,\r\n  spanW: number,\r\n  spanH: number,\r\n  depth: number,\r\n  maxDepth: number,\r\n  config: AdLayoutConfig = DEFAULT_AD_LAYOUT_CONFIG\r\n): LayoutDecision => {\r\n  const logicalW = Math.max(1, Math.round(spanW));\r\n  const logicalH = Math.max(1, Math.round(spanH));\r\n\r\n  const isLandscape = logicalW >= logicalH;\r\n  const bucketKey = isLandscape ? logicalH : logicalW;\r\n  const longSide = isLandscape ? logicalW : logicalH;\r\n  const aspectRatio = bucketKey > 0 ? longSide / bucketKey : 0;\r\n\r\n  const childSpans = getSplitResult(logicalW, logicalH, config, depth, maxDepth);\r\n  const canSplit = childSpans !== null;\r\n\r\n  // Rule 6: Shape-only tiny bricks\r\n  const isShapeOnly = (logicalW === 1 && logicalH === 1) || (logicalW === 2 && logicalH === 1) || (logicalW === 1 && logicalH === 2);\r\n\r\n  // Rule 1: Bucket mapping\r\n  const bucket: LayoutBucket = bucketKey === 1 ? 'COMPACT_STRIP' : bucketKey === 2 ? 'MEDIUM_STRIP' : 'FULL_PANEL';\r\n\r\n  // Rule 2: Mode selection\r\n  let mode: LayoutMode = 'stacked';\r\n  if (logicalW === 1 && logicalH === 1) {\r\n    mode = 'circle';\r\n  } else if (isLandscape && aspectRatio >= config.INLINE_RATIO - config.GRACE_ZONE) {\r\n    mode = 'inline';\r\n  } else if (!isLandscape && aspectRatio >= config.ROTATION_RATIO - config.GRACE_ZONE) {\r\n    mode = 'rotated';\r\n  }\r\n  // Strip override\r\n  if (bucketKey === 1 && longSide >= config.LONG_STRIP_MIN_LENGTH) {\r\n    mode = isLandscape ? 'inline' : 'rotated';\r\n  }\r\n\r\n  // Rule 8: Accessibility and rendering visibility\r\n  const visibility: LayoutDecision['visibility'] = {\r\n      showRole: !isShapeOnly && bucket !== 'COMPACT_STRIP',\r\n      showBadge: !isShapeOnly && bucket !== 'COMPACT_STRIP',\r\n      showDesc: !isShapeOnly && bucket !== 'COMPACT_STRIP',\r\n      useShortDesc: bucket !== 'FULL_PANEL',\r\n      showAction: !isShapeOnly,\r\n  };\r\n  \r\n  // ARIA label is generated dynamically in the component based on click state,\r\n  // but we provide a default here. Shape-only bricks have no label.\r\n  const ariaLabel = isShapeOnly ? \"\" : `Interact with ${ad.name}`;\r\n\r\n  const decision: LayoutDecision = {\r\n    mode, bucket, logicalW, logicalH, canSplit, isShapeOnly, visibility, ariaLabel, childSpans: childSpans || undefined,\r\n  };\r\n\r\n  if (mode === 'rotated') {\r\n    const readingLength = logicalH;\r\n    const baseBudget = Math.floor(readingLength * config.CHAR_PER_UNIT);\r\n    const [min, max] = config.ROTATED_CLAMP_RANGES[bucket];\r\n    decision.rotatedCharLimit = Math.max(min, Math.min(baseBudget, max));\r\n  }\r\n\r\n  return decision;\r\n};","import React, { useState, useEffect } from \"react\";\r\nimport { AD_LIBRARY, AdEntry } from \"../config/ads\";\r\nimport {\r\n  getLayoutDecision,\r\n  truncateText,\r\n  AdLayoutConfig,\r\n  DEFAULT_AD_LAYOUT_CONFIG,\r\n} from \"../utils/adLayout\";\r\n\r\n// --- Types ---\r\ninterface AdBrickProps {\r\n  initialAd: AdEntry;\r\n  className?: string;\r\n  usedIds?: Set<string>;\r\n  gradient?: string;\r\n  spanW?: number;\r\n  spanH?: number;\r\n  depth?: number;\r\n  maxDepth?: number;\r\n  showNoise?: boolean;\r\n  config?: AdLayoutConfig;\r\n}\r\n\r\nconst getRandomAd = (excludeIds: Set<string>): AdEntry | null => {\r\n  const availableAds = AD_LIBRARY.filter((ad) => !excludeIds.has(ad.id));\r\n  if (availableAds.length === 0) return null;\r\n  const randomIndex = Math.floor(Math.random() * availableAds.length);\r\n  return availableAds[randomIndex];\r\n};\r\n\r\n// --- Main Component ---\r\nconst AdBrick: React.FC<AdBrickProps> = ({\r\n  initialAd,\r\n  className = \"\",\r\n  usedIds = new Set(),\r\n  gradient = \"bg-slate-800\",\r\n  spanW = 1,\r\n  spanH = 1,\r\n  depth = 1,\r\n  maxDepth = 3,\r\n  showNoise = true,\r\n  config = DEFAULT_AD_LAYOUT_CONFIG,\r\n}) => {\r\n  const [isSplit, setIsSplit] = useState(false);\r\n  const [wasClicked, setWasClicked] = useState(false); // For jiggle animation\r\n  const ad = initialAd;\r\n\r\n  // NEW: State for the click bait mechanism\r\n  const [clicksToLink, setClicksToLink] = useState(() => {\r\n    const { MIN_CLICKS_TO_LINK: min, MAX_CLICKS_TO_LINK: max } = config;\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  });\r\n\r\n  const decision = getLayoutDecision(ad, spanW, spanH, depth, maxDepth, config);\r\n  const { mode, visibility, isShapeOnly } = decision;\r\n\r\n  // NEW: Derived state to determine the brick's current purpose\r\n  const isNowALink = clicksToLink <= 0;\r\n  // A brick can only split if it hasn't become a link yet.\r\n  const canSplitNow = !isNowALink && decision.canSplit;\r\n\r\n  const handleInteraction = (e: React.MouseEvent | React.KeyboardEvent) => {\r\n    e.stopPropagation();\r\n\r\n    // Don't do anything for shape-only bricks that can't split\r\n    if (isShapeOnly && !canSplitNow) return;\r\n\r\n    // Trigger jiggle animation\r\n    setWasClicked(true);\r\n\r\n    const newClicksCount = clicksToLink - 1;\r\n    setClicksToLink(newClicksCount);\r\n\r\n    if (newClicksCount <= 0) {\r\n      // Trap sprung! It's a link now.\r\n      window.open(ad.url, \"_blank\", \"noopener,noreferrer\");\r\n    } else if (canSplitNow) {\r\n      // Not a link yet, but it can split.\r\n      setIsSplit(true);\r\n    }\r\n    // If neither, the click is just absorbed.\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" || e.key === \" \") {\r\n      e.preventDefault();\r\n      handleInteraction(e);\r\n    }\r\n  };\r\n\r\n  // Effect to reset the jiggle animation class\r\n  useEffect(() => {\r\n    if (wasClicked) {\r\n      const timer = setTimeout(() => setWasClicked(false), 150);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [wasClicked]);\r\n\r\n  if (isSplit && decision.childSpans) {\r\n    // ... (Splitting logic remains the same)\r\n    const currentUsedIds = new Set(usedIds);\r\n    currentUsedIds.add(ad.id);\r\n    const childAd1 = getRandomAd(currentUsedIds) || ad;\r\n\r\n    const nextUsedIds = new Set(currentUsedIds);\r\n    nextUsedIds.add(childAd1.id);\r\n    const childAd2 = getRandomAd(nextUsedIds) || ad;\r\n\r\n    const isHorizontalSplit = decision.logicalW > decision.logicalH;\r\n    const flexClass = isHorizontalSplit ? \"flex-row\" : \"flex-col\";\r\n\r\n    const [[w1, h1], [w2, h2]] = decision.childSpans;\r\n\r\n    const commonProps = {\r\n      gradient,\r\n      depth: depth + 1,\r\n      maxDepth,\r\n      showNoise,\r\n      config,\r\n      className: \"flex-1 min-w-0 min-h-0\",\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className={`flex ${flexClass} gap-1 h-full w-full overflow-hidden ${className}`}\r\n      >\r\n        <AdBrick\r\n          initialAd={childAd1}\r\n          spanW={w1}\r\n          spanH={h1}\r\n          usedIds={currentUsedIds}\r\n          {...commonProps}\r\n        />\r\n        <AdBrick\r\n          initialAd={childAd2}\r\n          spanW={w2}\r\n          spanH={h2}\r\n          usedIds={nextUsedIds}\r\n          {...commonProps}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ... (Shape-only rendering logic remains mostly the same)\r\n  if (isShapeOnly) {\r\n    const shapeClassName = `relative overflow-hidden shadow-lg transition-all duration-300 ${gradient} ${className} ${\r\n      mode === \"circle\" ? \"rounded-full\" : \"rounded-xl\"\r\n    }`;\r\n    const isInteractive = canSplitNow || isNowALink;\r\n    return (\r\n      <div\r\n        onClick={isInteractive ? handleInteraction : undefined}\r\n        onKeyDown={isInteractive ? handleKeyDown : undefined}\r\n        role={isInteractive ? \"button\" : undefined}\r\n        aria-hidden=\"true\"\r\n        tabIndex={isInteractive ? 0 : -1}\r\n        className={`${shapeClassName} ${\r\n          isInteractive ? \"cursor-pointer hover:scale-[1.05] hover:z-20\" : \"\"\r\n        } ${wasClicked ? \"animate-jiggle\" : \"\"}`}\r\n      />\r\n    );\r\n  }\r\n\r\n  // NEW: Dynamic action text and ARIA label\r\n  const actionText = isNowALink ? \"Visit\" : \"Decompose\";\r\n  const ariaLabel = `${actionText} - ${ad.name}${\r\n    visibility.showRole ? ` - ${ad.role.replace(\"_\", \" \")}` : \"\"\r\n  }`;\r\n\r\n  return (\r\n    <div\r\n      onClick={handleInteraction}\r\n      onKeyDown={handleKeyDown}\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      aria-label={ariaLabel}\r\n      className={`relative overflow-hidden rounded-xl shadow-lg transition-all duration-300 cursor-pointer group ${gradient} ${className} hover:shadow-2xl hover:scale-[1.02] hover:z-20 focus:outline-none focus:ring-4 focus:ring-indigo-500 ${\r\n        wasClicked ? \"animate-jiggle\" : \"\"\r\n      }`}\r\n    >\r\n      {/* ... (Inner rendering logic) ... */}\r\n      {showNoise && (\r\n        <div className=\"absolute inset-0 opacity-10 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] mix-blend-overlay pointer-events-none\" />\r\n      )}\r\n      <div className=\"absolute -top-[100%] -left-[100%] w-[200%] h-[200%] bg-gradient-to-br from-white/20 to-transparent rotate-45 transition-all duration-700 group-hover:top-[-50%] group-hover:left-[-50%] pointer-events-none\" />\r\n\r\n      {/* ... (stacked mode) ... */}\r\n      {mode === \"stacked\" && (\r\n        <div className=\"flex flex-col h-full justify-end p-4\">\r\n          <div className=\"min-w-0\">\r\n            <h3 className=\"text-xl font-black text-white drop-shadow-md line-clamp-2\">\r\n              {ad.name}\r\n            </h3>\r\n            {visibility.showDesc && (\r\n              <p className=\"text-xs text-white/80 line-clamp-2\">\r\n                {visibility.useShortDesc ? ad.shortDescription : ad.description}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center justify-between mt-2 pt-2 border-t border-white/20\">\r\n            {visibility.showRole && (\r\n              <span className=\"font-mono text-[10px] uppercase text-white/80 truncate mr-2\">\r\n                {ad.role.replace(\"_\", \" \")}\r\n              </span>\r\n            )}\r\n            {visibility.showBadge && ad.vibeStatus === \"VERIFIED\" && (\r\n              <span className=\"material-symbols-outlined text-base text-white\">\r\n                verified\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ... (inline mode) ... */}\r\n      {mode === \"inline\" && (\r\n        <div className=\"flex flex-row items-center h-full p-3 gap-3\">\r\n          <div className=\"w-[clamp(60px,25%,120px)] shrink-0 text-center\">\r\n            <h3 className=\"text-lg font-bold text-white truncate whitespace-nowrap\">\r\n              {ad.name}\r\n            </h3>\r\n          </div>\r\n          <div className=\"flex-1 min-w-0 border-l border-white/20 pl-3\">\r\n            {visibility.showDesc && (\r\n              <p className=\"text-[10px] text-white/80 truncate whitespace-nowrap\">\r\n                {visibility.useShortDesc ? ad.shortDescription : ad.description}\r\n              </p>\r\n            )}\r\n            {visibility.showRole && (\r\n              <p className=\"font-mono text-[10px] uppercase text-white/60 truncate whitespace-nowrap\">\r\n                {ad.role.replace(\"_\", \" \")}\r\n              </p>\r\n            )}\r\n          </div>\r\n          {visibility.showAction && (\r\n            <div className=\"shrink-0 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n              <span className=\"material-symbols-outlined text-white\">\r\n                {isNowALink ? \"open_in_new\" : \"grid_view\"}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* ... (rotated mode) ... */}\r\n      {mode === \"rotated\" && (\r\n        <div className=\"relative h-full w-full\">\r\n          <div className=\"absolute bottom-0 left-0 h-full w-full flex flex-col justify-end transform-origin-bottom-left [writing-mode:vertical-rl] rotate-180 p-2\">\r\n            <div className=\"flex items-center gap-2 opacity-80 mb-2\">\r\n              {visibility.showBadge && (\r\n                <span className=\"material-symbols-outlined text-sm\">\r\n                  verified\r\n                </span>\r\n              )}\r\n              {visibility.showRole && (\r\n                <span className=\"font-mono text-[9px] uppercase tracking-widest\">\r\n                  {ad.role.replace(\"_\", \" \")}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <h3 className=\"text-lg font-bold text-white my-2\">\r\n              {truncateText(ad.name, decision.rotatedCharLimit || 20)}\r\n            </h3>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {visibility.showAction && mode !== \"inline\" && (\r\n        <div className=\"absolute bottom-3 left-3 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n          <span className=\"text-[9px] font-bold uppercase tracking-wider bg-black/30 text-white rounded backdrop-blur-sm border border-white/20 px-2 py-0.5\">\r\n            {isNowALink ? \"Visit\" : \"Decompose\"}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdBrick;\r\n","import React, { useState, useRef, useLayoutEffect } from \"react\";\r\nimport { AD_LIBRARY } from \"../config/ads\";\r\nimport AdBrick from \"./AdBrick\";\r\n\r\ninterface BrickConfig {\r\n  gridColumn: string;\r\n  gridRow: string;\r\n  gradient: string;\r\n  animationDelay: string;\r\n  colSpan: number;\r\n  rowSpan: number;\r\n}\r\n\r\nconst NEON_PALETTE = [\r\n  \"bg-gradient-to-br from-pink-500 via-red-500 to-yellow-500\",\r\n  \"bg-gradient-to-br from-purple-600 via-indigo-500 to-blue-500\",\r\n  \"bg-gradient-to-br from-cyan-500 via-blue-500 to-indigo-600\",\r\n  \"bg-gradient-to-br from-emerald-400 via-teal-500 to-cyan-600\",\r\n  \"bg-gradient-to-br from-orange-500 via-amber-500 to-yellow-400\",\r\n  \"bg-gradient-to-br from-fuchsia-600 via-purple-600 to-indigo-600\",\r\n  \"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 border border-slate-700\",\r\n];\r\n\r\nconst DEFAULT_BRICK_CONFIG: BrickConfig = {\r\n  colSpan: 1,\r\n  rowSpan: 1,\r\n  gridColumn: \"span 1\",\r\n  gridRow: \"span 1\",\r\n  gradient: \"bg-slate-800\",\r\n  animationDelay: \"0ms\",\r\n};\r\n\r\n// --- HELPER FUNCTIONS (Unchanged) ---\r\n\r\nconst getRandomGradient = () =>\r\n  NEON_PALETTE[Math.floor(Math.random() * NEON_PALETTE.length)];\r\n\r\nconst generateFeatureBrick = (): BrickConfig => {\r\n  // ... (logic remains the same)\r\n  let colSpan, rowSpan, ratio;\r\n  do {\r\n    const archetype = Math.random();\r\n    if (archetype > 0.8) {\r\n      colSpan = Math.ceil(Math.random() * 2);\r\n      rowSpan = Math.floor(Math.random() * 5) + 6;\r\n    } else if (archetype > 0.6) {\r\n      colSpan = Math.floor(Math.random() * 5) + 6;\r\n      rowSpan = Math.ceil(Math.random() * 2);\r\n    } else {\r\n      colSpan = Math.ceil(Math.random() * 4);\r\n      rowSpan = Math.ceil(Math.random() * 4);\r\n    }\r\n    const r1 = colSpan / rowSpan;\r\n    const r2 = rowSpan / colSpan;\r\n    ratio = Math.max(r1, r2);\r\n  } while (ratio > 10);\r\n\r\n  return {\r\n    colSpan,\r\n    rowSpan,\r\n    gridColumn: `span ${colSpan}`,\r\n    gridRow: `span ${rowSpan}`,\r\n    gradient: getRandomGradient(),\r\n    animationDelay: `${Math.floor(Math.random() * 800)}ms`,\r\n  };\r\n};\r\n\r\nconst generateGroutBrick = (): BrickConfig => {\r\n  // ... (logic remains the same)\r\n  const type = Math.random();\r\n  let colSpan = 1;\r\n  let rowSpan = 1;\r\n\r\n  if (type > 0.7) {\r\n    colSpan = 1;\r\n    rowSpan = Math.floor(Math.random() * 3) + 3;\r\n  } else if (type > 0.4) {\r\n    colSpan = Math.floor(Math.random() * 3) + 2;\r\n    rowSpan = 1;\r\n  } else {\r\n    colSpan = 1;\r\n    rowSpan = 1;\r\n  }\r\n\r\n  return {\r\n    colSpan,\r\n    rowSpan,\r\n    gridColumn: `span ${colSpan}`,\r\n    gridRow: `span ${rowSpan}`,\r\n    gradient: getRandomGradient(),\r\n    animationDelay: `${Math.floor(Math.random() * 1200)}ms`,\r\n  };\r\n};\r\n\r\n// --- MAIN COMPONENT (Updated) ---\r\n\r\nconst Monetization: React.FC = () => {\r\n  const gridRef = useRef<HTMLDivElement>(null);\r\n\r\n  const FEATURE_COUNT = 50;\r\n  const GROUT_COUNT = 50;\r\n  const TOTAL_ITEMS = FEATURE_COUNT + GROUT_COUNT;\r\n\r\n  // FIX: Use a lazy initializer function for useState to create the bricks\r\n  // This computes the initial state once, before the first render,\r\n  // and avoids the unnecessary re-render that the linter was warning about.\r\n  const [bricks] = useState(() => {\r\n    const featureBricks = Array.from({ length: FEATURE_COUNT }).map(\r\n      generateFeatureBrick\r\n    );\r\n    const groutBricks = Array.from({ length: GROUT_COUNT }).map(\r\n      generateGroutBrick\r\n    );\r\n    return [...featureBricks, ...groutBricks];\r\n  });\r\n\r\n  const displayAds = Array.from({ length: TOTAL_ITEMS }).map((_, i) => {\r\n    return AD_LIBRARY[i % AD_LIBRARY.length];\r\n  });\r\n\r\n  // REMOVED: The useEffect that was causing the linting error is no longer needed.\r\n\r\n  // ... (the rest of the component remains the same)\r\n  useLayoutEffect(() => {\r\n    const gridEl = gridRef.current;\r\n    const container = gridEl?.parentElement;\r\n    if (!container) return;\r\n\r\n    const syncGridColumns = () => {\r\n      const containerWidth = container.clientWidth;\r\n      const fixedCellSize = 60;\r\n      const colsThatFit = Math.max(\r\n        1,\r\n        Math.floor(containerWidth / fixedCellSize)\r\n      );\r\n      gridEl.style.setProperty(\"--grid-cols\", String(colsThatFit));\r\n    };\r\n\r\n    syncGridColumns();\r\n\r\n    const resizeObserver = new ResizeObserver(syncGridColumns);\r\n    resizeObserver.observe(container);\r\n\r\n    return () => resizeObserver.disconnect();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full h-full bg-slate-950 p-2 overflow-hidden\">\r\n      <div\r\n        ref={gridRef}\r\n        role=\"grid\"\r\n        className=\"grid gap-2 grid-flow-dense max-w-[1800px] mx-auto auto-rows-[60px]\"\r\n        style={{\r\n          gridTemplateColumns: \"repeat(var(--grid-cols, 18), 60px)\",\r\n        }}\r\n      >\r\n        {displayAds.map((ad, index) => {\r\n          const config = bricks[index] || DEFAULT_BRICK_CONFIG;\r\n\r\n          return (\r\n            <div\r\n              key={`${ad.id}-${index}`}\r\n              role=\"gridcell\"\r\n              style={{\r\n                gridColumn: config.gridColumn,\r\n                gridRow: config.gridRow,\r\n                animationDelay: config.animationDelay,\r\n              }}\r\n              className=\"relative animate-fade-in opacity-0 [animation-fill-mode:forwards]\"\r\n            >\r\n              <AdBrick\r\n                initialAd={ad}\r\n                gradient={config.gradient}\r\n                spanW={config.colSpan}\r\n                spanH={config.rowSpan}\r\n                className=\"h-full w-full\"\r\n              />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Monetization;\r\n"],"names":["AD_LIBRARY","DEFAULT_AD_LAYOUT_CONFIG","truncateText","text","limit","getSplitResult","w","h","config","depth","maxDepth","isLandscape","long","short","key","specialSplits","c1L","c1S","c2L","c2S","targetLongSide","hasPotentialToSplit","isSplittableStrip","half","l1","l2","getLayoutDecision","ad","spanW","spanH","logicalW","logicalH","bucketKey","longSide","aspectRatio","childSpans","canSplit","isShapeOnly","bucket","mode","visibility","ariaLabel","decision","baseBudget","min","max","getRandomAd","excludeIds","availableAds","randomIndex","AdBrick","initialAd","className","usedIds","gradient","showNoise","isSplit","setIsSplit","useState","wasClicked","setWasClicked","clicksToLink","setClicksToLink","isNowALink","canSplitNow","handleInteraction","e","newClicksCount","handleKeyDown","useEffect","timer","currentUsedIds","childAd1","nextUsedIds","childAd2","flexClass","w1","h1","w2","h2","commonProps","jsxs","jsx","shapeClassName","isInteractive","NEON_PALETTE","DEFAULT_BRICK_CONFIG","getRandomGradient","generateFeatureBrick","colSpan","rowSpan","ratio","archetype","r1","r2","generateGroutBrick","type","Monetization","gridRef","useRef","FEATURE_COUNT","GROUT_COUNT","TOTAL_ITEMS","bricks","featureBricks","groutBricks","displayAds","_","useLayoutEffect","gridEl","container","syncGridColumns","containerWidth","colsThatFit","resizeObserver","index"],"mappings":"+CAmBO,MAAMA,EAAwB,CAEnC,CACE,GAAI,YACJ,KAAM,gBACN,KAAM,cACN,WAAY,WACZ,IAAK,8CACL,YAAa,iGACb,iBAAkB,gBAAA,EAEpB,CACE,GAAI,aACJ,KAAM,SACN,KAAM,gBACN,WAAY,WACZ,IAAK,uCACL,YAAa,+FACb,iBAAkB,0BAAA,EAEpB,CACE,GAAI,kBACJ,KAAM,cACN,KAAM,gBACN,WAAY,WACZ,IAAK,4CACL,YAAa,kGACb,iBAAkB,sBAAA,EAEpB,CACE,GAAI,YACJ,KAAM,QACN,KAAM,gBACN,WAAY,WACZ,IAAK,sCACL,YAAa,yFACb,iBAAkB,uBAAA,EAEpB,CACE,GAAI,gBACJ,KAAM,YACN,KAAM,gBACN,WAAY,WACZ,IAAK,0CACL,YAAa,uEACb,iBAAkB,qBAAA,EAEpB,CACE,GAAI,qBACJ,KAAM,iBACN,KAAM,gBACN,WAAY,WACZ,IAAK,+CACL,YAAa,wFACb,iBAAkB,2BAAA,EAEpB,CACE,GAAI,iBACJ,KAAM,aACN,KAAM,gBACN,WAAY,WACZ,IAAK,2CACL,YAAa,sGACb,iBAAkB,2BAAA,EAEpB,CACE,GAAI,WACJ,KAAM,OACN,KAAM,gBACN,WAAY,WACZ,IAAK,qCACL,YAAa,4GACb,iBAAkB,4BAAA,EAEpB,CACE,GAAI,iBACJ,KAAM,aACN,KAAM,gBACN,WAAY,WACZ,IAAK,2CACL,YAAa,oGACb,iBAAkB,yBAAA,EAIpB,CACE,GAAI,yBACJ,KAAM,sBACN,KAAM,gBACN,WAAY,WACZ,IAAK,oDACL,YAAa,2FACb,iBAAkB,uBAAA,EAEpB,CACE,GAAI,0BACJ,KAAM,0BACN,KAAM,gBACN,WAAY,WACZ,IAAK,wDACL,YAAa,wFACb,iBAAkB,wBAAA,EAEpB,CACE,GAAI,iBACJ,KAAM,cACN,KAAM,gBACN,WAAY,WACZ,IAAK,4CACL,YAAa,0FACb,iBAAkB,4BAAA,EAEpB,CACE,GAAI,kBACJ,KAAM,eACN,KAAM,gBACN,WAAY,WACZ,IAAK,6CACL,YAAa,6FACb,iBAAkB,6BAAA,EAEpB,CACE,GAAI,sBACJ,KAAM,mBACN,KAAM,gBACN,WAAY,WACZ,IAAK,iDACL,YAAa,iFACb,iBAAkB,gCAAA,EAEpB,CACE,GAAI,uBACJ,KAAM,mCACN,KAAM,gBACN,WAAY,WACZ,IAAK,iEACL,YAAa,uEACb,iBAAkB,8BAAA,EAEpB,CACE,GAAI,uBACJ,KAAM,4BACN,KAAM,gBACN,WAAY,WACZ,IAAK,0DACL,YAAa,uEACb,iBAAkB,+BAAA,EAEpB,CACE,GAAI,wBACJ,KAAM,uBACN,KAAM,gBACN,WAAY,WACZ,IAAK,qDACL,YAAa,qGACb,iBAAkB,iCAAA,EAEpB,CACE,GAAI,mBACJ,KAAM,eACN,KAAM,gBACN,WAAY,WACZ,IAAK,6CACL,YAAa,8FACb,iBAAkB,2BAAA,EAEpB,CACE,GAAI,aACJ,KAAM,SACN,KAAM,gBACN,WAAY,WACZ,IAAK,uCACL,YAAa,oGACb,iBAAkB,cAAA,EAEpB,CACE,GAAI,mBACJ,KAAM,4BACN,KAAM,gBACN,WAAY,WACZ,IAAK,0DACL,YAAa,iFACb,iBAAkB,0BAAA,EAEpB,CACE,GAAI,qBACJ,KAAM,8BACN,KAAM,gBACN,WAAY,WACZ,IAAK,4DACL,YAAa,6FACb,iBAAkB,yBAAA,EAEpB,CACE,GAAI,cACJ,KAAM,WACN,KAAM,gBACN,WAAY,WACZ,IAAK,yCACL,YAAa,0EACb,iBAAkB,yBAAA,EAEpB,CACE,GAAI,cACJ,KAAM,UACN,KAAM,gBACN,WAAY,WACZ,IAAK,wCACL,YAAa,0FACb,iBAAkB,kBAAA,EAEpB,CACE,GAAI,eACJ,KAAM,eACN,KAAM,gBACN,WAAY,WACZ,IAAK,4CACL,YAAa,uGACb,iBAAkB,oBAAA,EAEpB,CACE,GAAI,iBACJ,KAAM,aACN,KAAM,gBACN,WAAY,WACZ,IAAK,2CACL,YAAa,+FACb,iBAAkB,sBAAA,EAEpB,CACE,GAAI,WACJ,KAAM,OACN,KAAM,gBACN,WAAY,WACZ,IAAK,qCACL,YAAa,uHACb,iBAAkB,2BAAA,CAEtB,ECpOaC,EAA2C,CAEtD,eAAgB,IAChB,aAAc,EACd,WAAY,GAGZ,kBAAmB,EACnB,sBAAuB,EACvB,iBAAkB,EAClB,UAAW,EAGX,cAAe,EACf,qBAAsB,CACpB,cAAe,CAAC,EAAG,EAAE,EACrB,aAAc,CAAC,GAAI,EAAE,EACrB,WAAY,CAAC,GAAI,EAAE,CAAA,EAIrB,mBAAoB,EACpB,mBAAoB,CACtB,EAuBaC,EAAe,CAACC,EAAcC,IACzCD,EAAK,OAASC,EAAQD,EAAK,MAAM,EAAGC,EAAQ,CAAC,EAAI,IAAMD,EAOnDE,EAAiB,CACrBC,EACAC,EACAC,EACAC,EACAC,IACgD,CAChD,GAAID,GAASC,EAAU,OAAO,KAE9B,MAAMC,EAAcL,GAAKC,EACnBK,EAAOD,EAAcL,EAAIC,EACzBM,EAAQF,EAAcJ,EAAID,EAC1BQ,EAAM,GAAGF,CAAI,IAAIC,CAAK,GAGtBE,EAAsE,CAC1E,MAAO,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,EACtB,MAAO,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,EACtB,MAAO,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,EACtB,MAAO,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,EACtB,MAAO,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,CAAA,EAGxB,GAAIA,EAAcD,CAAG,EAAG,CACtB,KAAM,CAAC,CAACE,EAAKC,CAAG,EAAG,CAACC,EAAKC,CAAG,CAAC,EAAIJ,EAAcD,CAAG,EAClD,OAAOH,EACH,CAAC,CAACK,EAAKC,CAAG,EAAG,CAACC,EAAKC,CAAG,CAAC,EACvB,CAAC,CAACF,EAAKD,CAAG,EAAG,CAACG,EAAKD,CAAG,CAAC,CAC7B,CAGA,MAAME,EAAiBZ,EAAO,kBAAoBK,EAC5CQ,EAAsBT,EAAOQ,GAAkBR,EAAO,EACtDU,EAAoBT,IAAU,GAAKD,GAAQJ,EAAO,sBAMxD,IAHGa,GAAuBC,KACvBT,GAASL,EAAO,kBAAoBc,GAEhB,CACrB,MAAMC,EAAOX,EAAO,EACdY,EAAK,KAAK,KAAKD,CAAI,EACnBE,EAAK,KAAK,MAAMF,CAAI,EAC1B,OAAOZ,EACH,CAAC,CAACa,EAAIX,CAAK,EAAG,CAACY,EAAIZ,CAAK,CAAC,EACzB,CAAC,CAACA,EAAOW,CAAE,EAAG,CAACX,EAAOY,CAAE,CAAC,CAC/B,CAEA,OAAO,IACT,EAOaC,EAAoB,CAC/BC,EACAC,EACAC,EACApB,EACAC,EACAF,EAAyBP,IACN,CACnB,MAAM6B,EAAW,KAAK,IAAI,EAAG,KAAK,MAAMF,CAAK,CAAC,EACxCG,EAAW,KAAK,IAAI,EAAG,KAAK,MAAMF,CAAK,CAAC,EAExClB,EAAcmB,GAAYC,EAC1BC,EAAYrB,EAAcoB,EAAWD,EACrCG,EAAWtB,EAAcmB,EAAWC,EACpCG,EAAcF,EAAY,EAAIC,EAAWD,EAAY,EAErDG,EAAa9B,EAAeyB,EAAUC,EAAUvB,EAAQC,EAAOC,CAAQ,EACvE0B,EAAWD,IAAe,KAG1BE,EAAeP,IAAa,GAAKC,IAAa,GAAOD,IAAa,GAAKC,IAAa,GAAOD,IAAa,GAAKC,IAAa,EAG1HO,EAAuBN,IAAc,EAAI,gBAAkBA,IAAc,EAAI,eAAiB,aAGpG,IAAIO,EAAmB,UACnBT,IAAa,GAAKC,IAAa,EACjCQ,EAAO,SACE5B,GAAeuB,GAAe1B,EAAO,aAAeA,EAAO,WACpE+B,EAAO,SACE,CAAC5B,GAAeuB,GAAe1B,EAAO,eAAiBA,EAAO,aACvE+B,EAAO,WAGLP,IAAc,GAAKC,GAAYzB,EAAO,wBACxC+B,EAAO5B,EAAc,SAAW,WAIlC,MAAM6B,EAA2C,CAC7C,SAAU,CAACH,GAAeC,IAAW,gBACrC,UAAW,CAACD,GAAeC,IAAW,gBACtC,SAAU,CAACD,GAAeC,IAAW,gBACrC,aAAcA,IAAW,aACzB,WAAY,CAACD,CAAA,EAKXI,EAAYJ,EAAc,GAAK,iBAAiBV,EAAG,IAAI,GAEvDe,EAA2B,CAC/B,KAAAH,EAAM,OAAAD,EAAQ,SAAAR,EAAU,SAAAC,EAAU,SAAAK,EAAU,YAAAC,EAAa,WAAAG,EAAY,UAAAC,EAAW,WAAYN,GAAc,MAAA,EAG5G,GAAII,IAAS,UAAW,CAEtB,MAAMI,EAAa,KAAK,MADFZ,EACwBvB,EAAO,aAAa,EAC5D,CAACoC,EAAKC,CAAG,EAAIrC,EAAO,qBAAqB8B,CAAM,EACrDI,EAAS,iBAAmB,KAAK,IAAIE,EAAK,KAAK,IAAID,EAAYE,CAAG,CAAC,CACrE,CAEA,OAAOH,CACT,ECpLMI,EAAeC,GAA4C,CAC/D,MAAMC,EAAehD,EAAW,OAAQ2B,GAAO,CAACoB,EAAW,IAAIpB,EAAG,EAAE,CAAC,EACrE,GAAIqB,EAAa,SAAW,EAAG,OAAO,KACtC,MAAMC,EAAc,KAAK,MAAM,KAAK,OAAA,EAAWD,EAAa,MAAM,EAClE,OAAOA,EAAaC,CAAW,CACjC,EAGMC,EAAkC,CAAC,CACvC,UAAAC,EACA,UAAAC,EAAY,GACZ,QAAAC,MAAc,IACd,SAAAC,EAAW,eACX,MAAA1B,EAAQ,EACR,MAAAC,EAAQ,EACR,MAAApB,EAAQ,EACR,SAAAC,EAAW,EACX,UAAA6C,EAAY,GACZ,OAAA/C,EAASP,CACX,IAAM,CACJ,KAAM,CAACuD,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAYC,CAAa,EAAIF,EAAAA,SAAS,EAAK,EAC5C/B,EAAKwB,EAGL,CAACU,EAAcC,CAAe,EAAIJ,EAAAA,SAAS,IAAM,CACrD,KAAM,CAAE,mBAAoBd,EAAK,mBAAoBC,GAAQrC,EAC7D,OAAO,KAAK,MAAM,KAAK,OAAA,GAAYqC,EAAMD,EAAM,EAAE,EAAIA,CACvD,CAAC,EAEKF,EAAWhB,EAAkBC,EAAIC,EAAOC,EAAOpB,EAAOC,EAAUF,CAAM,EACtE,CAAE,KAAA+B,EAAM,WAAAC,EAAY,YAAAH,CAAA,EAAgBK,EAGpCqB,EAAaF,GAAgB,EAE7BG,EAAc,CAACD,GAAcrB,EAAS,SAEtCuB,EAAqBC,GAA8C,CAIvE,GAHAA,EAAE,gBAAA,EAGE7B,GAAe,CAAC2B,EAAa,OAGjCJ,EAAc,EAAI,EAElB,MAAMO,EAAiBN,EAAe,EACtCC,EAAgBK,CAAc,EAE1BA,GAAkB,EAEpB,OAAO,KAAKxC,EAAG,IAAK,SAAU,qBAAqB,EAC1CqC,GAETP,EAAW,EAAI,CAGnB,EAEMW,EAAiBF,GAA2B,EAC5CA,EAAE,MAAQ,SAAWA,EAAE,MAAQ,OACjCA,EAAE,eAAA,EACFD,EAAkBC,CAAC,EAEvB,EAUA,GAPAG,EAAAA,UAAU,IAAM,CACd,GAAIV,EAAY,CACd,MAAMW,EAAQ,WAAW,IAAMV,EAAc,EAAK,EAAG,GAAG,EACxD,MAAO,IAAM,aAAaU,CAAK,CACjC,CACF,EAAG,CAACX,CAAU,CAAC,EAEXH,GAAWd,EAAS,WAAY,CAElC,MAAM6B,EAAiB,IAAI,IAAIlB,CAAO,EACtCkB,EAAe,IAAI5C,EAAG,EAAE,EACxB,MAAM6C,EAAW1B,EAAYyB,CAAc,GAAK5C,EAE1C8C,EAAc,IAAI,IAAIF,CAAc,EAC1CE,EAAY,IAAID,EAAS,EAAE,EAC3B,MAAME,EAAW5B,EAAY2B,CAAW,GAAK9C,EAGvCgD,EADoBjC,EAAS,SAAWA,EAAS,SACjB,WAAa,WAE7C,CAAC,CAACkC,EAAIC,CAAE,EAAG,CAACC,EAAIC,CAAE,CAAC,EAAIrC,EAAS,WAEhCsC,EAAc,CAClB,SAAA1B,EACA,MAAO7C,EAAQ,EACf,SAAAC,EACA,UAAA6C,EACA,OAAA/C,EACA,UAAW,wBAAA,EAGb,OACEyE,EAAAA,KAAC,MAAA,CACC,UAAW,QAAQN,CAAS,wCAAwCvB,CAAS,GAE7E,SAAA,CAAA8B,EAAAA,IAAChC,EAAA,CACC,UAAWsB,EACX,MAAOI,EACP,MAAOC,EACP,QAASN,EACR,GAAGS,CAAA,CAAA,EAENE,EAAAA,IAAChC,EAAA,CACC,UAAWwB,EACX,MAAOI,EACP,MAAOC,EACP,QAASN,EACR,GAAGO,CAAA,CAAA,CACN,CAAA,CAAA,CAGN,CAGA,GAAI3C,EAAa,CACf,MAAM8C,EAAiB,kEAAkE7B,CAAQ,IAAIF,CAAS,IAC5Gb,IAAS,SAAW,eAAiB,YACvC,GACM6C,EAAgBpB,GAAeD,EACrC,OACEmB,EAAAA,IAAC,MAAA,CACC,QAASE,EAAgBnB,EAAoB,OAC7C,UAAWmB,EAAgBhB,EAAgB,OAC3C,KAAMgB,EAAgB,SAAW,OACjC,cAAY,OACZ,SAAUA,EAAgB,EAAI,GAC9B,UAAW,GAAGD,CAAc,IAC1BC,EAAgB,+CAAiD,EACnE,IAAIzB,EAAa,iBAAmB,EAAE,EAAA,CAAA,CAG5C,CAIA,MAAMlB,EAAY,GADCsB,EAAa,QAAU,WACX,MAAMpC,EAAG,IAAI,GAC1Ca,EAAW,SAAW,MAAMb,EAAG,KAAK,QAAQ,IAAK,GAAG,CAAC,GAAK,EAC5D,GAEA,OACEsD,EAAAA,KAAC,MAAA,CACC,QAAShB,EACT,UAAWG,EACX,KAAK,SACL,SAAU,EACV,aAAY3B,EACZ,UAAW,kGAAkGa,CAAQ,IAAIF,CAAS,yGAChIO,EAAa,iBAAmB,EAClC,GAGC,SAAA,CAAAJ,GACC2B,EAAAA,IAAC,MAAA,CAAI,UAAU,6HAAA,CAA8H,EAE/IA,EAAAA,IAAC,MAAA,CAAI,UAAU,6MAAA,CAA8M,EAG5N3C,IAAS,WACR0C,OAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,4DACX,SAAAvD,EAAG,KACN,EACCa,EAAW,UACV0C,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,SAAA1C,EAAW,aAAeb,EAAG,iBAAmBA,EAAG,WAAA,CACtD,CAAA,EAEJ,EACAsD,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACZ,SAAA,CAAAzC,EAAW,UACV0C,EAAAA,IAAC,OAAA,CAAK,UAAU,8DACb,WAAG,KAAK,QAAQ,IAAK,GAAG,CAAA,CAC3B,EAED1C,EAAW,WAAab,EAAG,aAAe,YACzCuD,EAAAA,IAAC,OAAA,CAAK,UAAU,iDAAiD,SAAA,UAAA,CAEjE,CAAA,CAAA,CAEJ,CAAA,EACF,EAID3C,IAAS,UACR0C,OAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,0DACX,SAAAvD,EAAG,IAAA,CACN,CAAA,CACF,EACAsD,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACZ,SAAA,CAAAzC,EAAW,UACV0C,EAAAA,IAAC,IAAA,CAAE,UAAU,uDACV,WAAW,aAAevD,EAAG,iBAAmBA,EAAG,WAAA,CACtD,EAEDa,EAAW,UACV0C,EAAAA,IAAC,IAAA,CAAE,UAAU,2EACV,SAAAvD,EAAG,KAAK,QAAQ,IAAK,GAAG,CAAA,CAC3B,CAAA,EAEJ,EACCa,EAAW,YACV0C,MAAC,MAAA,CAAI,UAAU,gEACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,uCACb,SAAAnB,EAAa,cAAgB,YAChC,CAAA,CACF,CAAA,EAEJ,EAIDxB,IAAS,WACR2C,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0IACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACZ,SAAA,CAAAzC,EAAW,WACV0C,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,WAEpD,EAED1C,EAAW,UACV0C,EAAAA,IAAC,OAAA,CAAK,UAAU,iDACb,SAAAvD,EAAG,KAAK,QAAQ,IAAK,GAAG,CAAA,CAC3B,CAAA,EAEJ,EACAuD,EAAAA,IAAC,KAAA,CAAG,UAAU,oCACX,SAAAhF,EAAayB,EAAG,KAAMe,EAAS,kBAAoB,EAAE,CAAA,CACxD,CAAA,CAAA,CACF,CAAA,CACF,EAGDF,EAAW,YAAcD,IAAS,gBAChC,MAAA,CAAI,UAAU,gFACb,SAAA2C,EAAAA,IAAC,QAAK,UAAU,mIACb,SAAAnB,EAAa,QAAU,YAC1B,CAAA,CACF,CAAA,CAAA,CAAA,CAIR,ECxQMsB,EAAe,CACnB,4DACA,+DACA,6DACA,8DACA,gEACA,kEACA,qFACF,EAEMC,EAAoC,CACxC,QAAS,EACT,QAAS,EACT,WAAY,SACZ,QAAS,SACT,SAAU,eACV,eAAgB,KAClB,EAIMC,EAAoB,IACxBF,EAAa,KAAK,MAAM,KAAK,OAAA,EAAWA,EAAa,MAAM,CAAC,EAExDG,EAAuB,IAAmB,CAE9C,IAAIC,EAASC,EAASC,EACtB,EAAG,CACD,MAAMC,EAAY,KAAK,OAAA,EACnBA,EAAY,IACdH,EAAU,KAAK,KAAK,KAAK,OAAA,EAAW,CAAC,EACrCC,EAAU,KAAK,MAAM,KAAK,OAAA,EAAW,CAAC,EAAI,GACjCE,EAAY,IACrBH,EAAU,KAAK,MAAM,KAAK,OAAA,EAAW,CAAC,EAAI,EAC1CC,EAAU,KAAK,KAAK,KAAK,OAAA,EAAW,CAAC,IAErCD,EAAU,KAAK,KAAK,KAAK,OAAA,EAAW,CAAC,EACrCC,EAAU,KAAK,KAAK,KAAK,OAAA,EAAW,CAAC,GAEvC,MAAMG,EAAKJ,EAAUC,EACfI,EAAKJ,EAAUD,EACrBE,EAAQ,KAAK,IAAIE,EAAIC,CAAE,CACzB,OAASH,EAAQ,IAEjB,MAAO,CACL,QAAAF,EACA,QAAAC,EACA,WAAY,QAAQD,CAAO,GAC3B,QAAS,QAAQC,CAAO,GACxB,SAAUH,EAAA,EACV,eAAgB,GAAG,KAAK,MAAM,KAAK,OAAA,EAAW,GAAG,CAAC,IAAA,CAEtD,EAEMQ,EAAqB,IAAmB,CAE5C,MAAMC,EAAO,KAAK,OAAA,EAClB,IAAIP,EAAU,EACVC,EAAU,EAEd,OAAIM,EAAO,IACTP,EAAU,EACVC,EAAU,KAAK,MAAM,KAAK,OAAA,EAAW,CAAC,EAAI,GACjCM,EAAO,IAChBP,EAAU,KAAK,MAAM,KAAK,OAAA,EAAW,CAAC,EAAI,EAC1CC,EAAU,IAEVD,EAAU,EACVC,EAAU,GAGL,CACL,QAAAD,EACA,QAAAC,EACA,WAAY,QAAQD,CAAO,GAC3B,QAAS,QAAQC,CAAO,GACxB,SAAUH,EAAA,EACV,eAAgB,GAAG,KAAK,MAAM,KAAK,OAAA,EAAW,IAAI,CAAC,IAAA,CAEvD,EAIMU,EAAyB,IAAM,CACnC,MAAMC,EAAUC,EAAAA,OAAuB,IAAI,EAErCC,EAAgB,GAChBC,EAAc,GACdC,EAAcF,EAAgBC,EAK9B,CAACE,CAAM,EAAI7C,EAAAA,SAAS,IAAM,CAC9B,MAAM8C,EAAgB,MAAM,KAAK,CAAE,OAAQJ,CAAA,CAAe,EAAE,IAC1DZ,CAAA,EAEIiB,EAAc,MAAM,KAAK,CAAE,OAAQJ,CAAA,CAAa,EAAE,IACtDN,CAAA,EAEF,MAAO,CAAC,GAAGS,EAAe,GAAGC,CAAW,CAC1C,CAAC,EAEKC,EAAa,MAAM,KAAK,CAAE,OAAQJ,CAAA,CAAa,EAAE,IAAI,CAACK,EAAG,IACtD3G,EAAW,EAAIA,EAAW,MAAM,CACxC,EAKD4G,OAAAA,EAAAA,gBAAgB,IAAM,CACpB,MAAMC,EAASX,EAAQ,QACjBY,EAAYD,GAAQ,cAC1B,GAAI,CAACC,EAAW,OAEhB,MAAMC,EAAkB,IAAM,CAC5B,MAAMC,EAAiBF,EAAU,YAE3BG,EAAc,KAAK,IACvB,EACA,KAAK,MAAMD,EAHS,EAGqB,CAAA,EAE3CH,EAAO,MAAM,YAAY,cAAe,OAAOI,CAAW,CAAC,CAC7D,EAEAF,EAAA,EAEA,MAAMG,EAAiB,IAAI,eAAeH,CAAe,EACzD,OAAAG,EAAe,QAAQJ,CAAS,EAEzB,IAAMI,EAAe,WAAA,CAC9B,EAAG,CAAA,CAAE,EAGHhC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKgB,EACL,KAAK,OACL,UAAU,qEACV,MAAO,CACL,oBAAqB,oCAAA,EAGtB,SAAAQ,EAAW,IAAI,CAAC/E,EAAIwF,IAAU,CAC7B,MAAM3G,EAAS+F,EAAOY,CAAK,GAAK7B,EAEhC,OACEJ,EAAAA,IAAC,MAAA,CAEC,KAAK,WACL,MAAO,CACL,WAAY1E,EAAO,WACnB,QAASA,EAAO,QAChB,eAAgBA,EAAO,cAAA,EAEzB,UAAU,oEAEV,SAAA0E,EAAAA,IAAChC,EAAA,CACC,UAAWvB,EACX,SAAUnB,EAAO,SACjB,MAAOA,EAAO,QACd,MAAOA,EAAO,QACd,UAAU,eAAA,CAAA,CACZ,EAfK,GAAGmB,EAAG,EAAE,IAAIwF,CAAK,EAAA,CAkB5B,CAAC,CAAA,CAAA,EAEL,CAEJ"}