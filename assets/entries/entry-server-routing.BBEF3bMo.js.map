{"version":3,"mappings":"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","names":["unique","arr","getGlobalObject","moduleId","defaultValue","globals","getGlobals","_a","pc","_","p","s","PROJECT_VERSION","globalObject","genGlobalConfig","getGlobalObjectSafe","clientRuntimesClonflict","clientNotSingleInstance","assertSingleInstance","versions","assertWarning","assertSingleInstance_onClientEntryServerRouting","isProduction","assertSingleInstance_onAssertModuleLoad","condition","errorMessage","onlyOnce","showStackTrace","msg","alreadyLogged","key","isNodeJS","createErrorWithCleanStackTrace","numberOfStackTraceLinesToRemove","err","clean","errStack","stackLines","splitByLine","linesRemoved","line","isStackTraceLine","str","colorVike","colorError","colorWarning","tagVike","tagVikeWithVersion","tagTypeBug","assert","debugInfo","debugStr","debugInfoSerialized","errMsg","addTags","internalError","createError","assertUsage","exitOnError","usageError","getProjectError","msgWithTags","tagType","showProjectVersion","getTagVike","tagTypeOuter","getTagType","whitespace","getTagWhitespace","tag","isBrowser","state","assertServerRouting","assertNoContradiction","noContradiction","assertIsBrowser","onLoad","isCallable","thing","isObject","value","isArray","isArrayOfStrings","val","v","isObjectOfStrings","hasProp","obj","prop","type","propValue","objectAssign","objAddendum","objAddendumCanBeOriginalObject","slice","from","to","sliceArray","list","listSlice","start","end","el","parseUrl","url","baseServer","isUrl","hashOriginal","urlWithoutHash","extractHash","hash","decodeSafe","searchOriginal","urlWithoutHashNorSearch","extractSearch","searchString","baseURI","getBaseURI","search","searchAll","protocol","origin","pathnameAbsoluteWithBase","getPathnameAbsoluteWithBase","pathnameOriginal","assertUrlComponents","pathname","isBaseMissing","removeBaseServer","href","createUrlFromComponents","host","hostname","port","parseHost","decodePathname","withoutHash","parts","withoutSearch","urlComponent","urlPathname","dir","parseOrigin","base","resolveUrlPathnameRelative","isUrlWithWebProtocol","uriWithoutProtocol","parseProtocol","rest","ret","uri","before","after","SEP2","isWebUrlProtocol","pathnameRelative","stack","baseRestoreTrailingSlash","i","pathnameAbsolute","isBaseServer","urlRecreated","isUrlAbsolute","isUrlRelative","isUrlPathAbsolute","c","getPropAccessNotation","isKeyDotNotationCompatible","updateType","clone","changeEnumerable","enumerable","descriptor","types","args","pattern","flags","serializer","parser","parse","options","parseTransform","reviver","res","match","deserialize","humanizeTime","milliseconds","seconds","round","plural","minutes","n","rounded","timeoutDefault","genPromise","timeout","resolve","reject","finished","promise_internal","resolve_","reject_","timeoutClear","timeouts","t","promise","target","removeStackErrorPrefix","errorPrefix","htmlElementId_pageContext","htmlElementId_globalContext","getPageContextSerializedInHtml","pageContextSerializedInHtml","findAndParseJson","getGlobalContextSerializedInHtml","id","elem","jsonStr","_key","objectReplace","objOld","objNew","except","makeFirst","getValue","element1","element2","val1","val2","makeLast","element","compareString","str1","str2","isNullish","isNotNullish","isPropertyGetter","objectDefineProperty","get","extJs","extTs","extJsOrTs","extJsx","extTsx","extJsxOrTsx","extTemplates","scriptFileExtensionList","isScriptFile","filePath","ext","isTemplateFile","getPageFilesClientSide","pageFilesAll","pageId","determine","envIsClient","env","pageFilesRelevant","getPageFilesSorter","getPageIdFile","iso","files","pageIdFile","pageIdFileEnv","pageIdFileIso","getRendererFile","rendererFileEnv","rendererFileIso","defaultFilesNonRenderer","e1","e2","e1_isRenderer","e2_isRenderer","e1_distance","getPathDistance","e2_distance","pathA","pathB","idx","pathAWithoutCommon","pathBWithoutCommon","distanceA","distanceB","enforceTrue","assertExportValues","pageFile","exportName","explainer","forbiddenDefaultExports","assertDefaultExports","defaultExportName","getExportPath","fileExportPathToShowToUser","configName","exportObjectPath","prefix","suffix","getConfigDefinedAt","sentenceBegin","definedAtData","begin","getDefinedAtString","getConfigDefinedAtOptional","definedAt","getDefinedByString","filePathToShowToUser","exportPath","definedBy","getConfigValueFilePathToShowToUser","getHookFilePathToShowToUser","resolveGlobalConfigPublicPage","pageConfigGlobalValues","pageConfig","pageConfigValues","pageConfigPublic_","resolvePageConfigPublic","pageConfigPublic","getPublicCopy","page","route","configInternal","configValues","resolveConfigPublic_V1Design","resolvePageContextConfig","pageFiles","pageConfigGlobal","config","configEntries","exportsAll","getExportValues","exportValue","isFromDefaultExport","source","sources","pageExports","exports","values","_fileType","_isFromDefaultExport","pageContextAddendum","resolveGlobalContextConfig","pageConfigs","resolveGlobalConfigPublic","getConfigValues","globalConfigPublicBase_","globalConfigPublicBase","pages","globalConfigPublic","addSrc","src","addLegacy","configValueFilePathToShowToUser","configDefinedAt","configValue","definedAtFile","fileExports","exportValues","defaultExportValue","findPageConfig","result","SIDE_EXPORTS_TOLERATE","SIDE_EXPORTS_DO_NOT_CHECK","assertPlusFileExport","exportNames","isValid","exportNamesValid","exportDefault","exportNamed","exportNamesInvalid","e","exportInvalid","parsePageConfigsSerialized","pageConfigsSerialized","pageConfigGlobalSerialized","pageConfigSerialized","parseConfigValuesSerialized","assertRouteConfigValue","configValueType","configValuesSerialized","configValueSeriliazed","valueSerialized","common","valueSerializedElement","sideExports","parseValueSerialized","addSideExports","sideExport","getDefinedAtFile","valueWasFound","assertVirtualFileExports","moduleExports","test","getKeys","loadAndParseVirtualFilePageEntry","isDev","moduleExportsPromise","parseVirtualFileExportsPageEntry","virtualFileExportsPageEntry","errStamp","loadPageConfigsLazyClientSide","pageFilesClientSide","pageConfigLoaded","isFetchError","normalizeClientSideUrl","urlCurrent","getCurrentUrl","createPageContextShared","pageContextCreated","createPageContextObject","pageContext","determinePageIdOld","pageSuffix","isErrorPageId","_isV1Design","fileTypes","determineFileType","suffix1","suffix2","getPageFileObject","isRelevant","isRendererFilePath","isAncestorDefaultPage","fileType","isDefaultFilePath","defaultPageFilePath","defaultPageDir","filePathSegment","parseVirtualFileExportsGlobalEntry","virtualFileExportsGlobalEntry","assertPageConfigsSerialized","assertPageConfigGlobalSerialized","pageFilesMap","parseGlobResult","globValue","loadModule","assertLoadModule","globObject","globFiles","getHookFromPageContext","hookName","hooksTimeout","hookTimeout","getHookTimeout","hookFn","file","hookFilePath","getHook","getHookFromPageContextNew","hooks","getHookFromPageConfigGlobalCumulative","getHookTimeoutGlobal","getHookTimeoutDefault","assertHookFn","hooksTimeoutProvidedByUser","hooksTimeoutProvidedbyUserNormalized","getHooksTimeoutProvidedByUserNormalized","providedbyUser","hooksTimeoutProvidedByUserNormalized","hookTimeoutProvidedbyUser","error","warning","timeoutName","timeoutVal","errPrefix","addIs404ToPageProps","addIs404","pageProps","NOT_SERIALIZABLE","getProxyForPublicUsage","objName","skipOnInternalProp","fallback","getProp","propStr","onNotSerializable","propName","prepareGlobalContextForPublicUsage","globalContext","preparePageContextForPublicUsage","sortPageContext","globalContextPublic","descriptors","key1","key2","assertPropertyGetters","execHook","execHookDirect","execHookGlobal","hookArg","prepareForPublicUsage","hookArgForPublicUsage","hook","execHookDirectAsync","pageContextForPublicUsage","hookReturn","execHookDirectSingle","hooksWithResult","hookFnCaller","timeoutErr","timeoutWarn","clearTimeouts","currentTimeoutWarn","currentTimeoutErr","isNotDisabled","providePageContextInternal","createGlobalContextShared","addGlobalContext","addGlobalContextTmp","addGlobalContextAsync","previousCreateGlobalContextPromise","createGlobalContextBase","isNewGlobalContext","globalContextAdded","globalContextAddedAsync","onCreateGlobalContextHooks","hooksCalled","hooksAreEqual","allPageIds","getAllPageIds","globalContextAddendum","fileIds","isDefaultPageFile","allPageIds2","hooks1","hooks2","hooksFn1","hooksFn2","globalContextInitialPromise","globalContextInitialPromiseResolve","getGlobalContextClientInternalShared","globalContextPromise","setVirtualFileExportsGlobalEntry","getGlobalContextClientInternal","preparePageContextForPublicUsageClientShared","Page","supportVueReactiviy","preparePageContextForPublicUsageClientMinimal","resolveGetters","preparePageContextForPublicUsageClient","urlFirst","createPageContextClientSide","loadPageConfigsLazyClientSideAndExecHook","assertPristineUrl","execHookOnRenderClient","renderHook","urlToShowToUser","getUrlToShowToUser","pageClientsFilesLoaded","hydrate"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73],"sources":["../../../../node_modules/vike/dist/utils/unique.js","../../../../node_modules/vike/dist/utils/getGlobalObject.js","../../../../node_modules/@brillout/picocolors/dist/picocolors.browser.js","../../../../node_modules/vike/dist/utils/PROJECT_VERSION.js","../../../../node_modules/vike/dist/utils/assertSingleInstance.js","../../../../node_modules/vike/dist/utils/isNodeJS.js","../../../../node_modules/vike/dist/utils/createErrorWithCleanStackTrace.js","../../../../node_modules/vike/dist/utils/colorsClient.js","../../../../node_modules/vike/dist/utils/assert.js","../../../../node_modules/vike/dist/utils/isBrowser.js","../../../../node_modules/vike/dist/utils/assertRoutingType.js","../../../../node_modules/vike/dist/utils/assertIsBrowser.js","../../../../node_modules/vike/dist/client/runtime-server-routing/onLoad.js","../../../../node_modules/vike/dist/utils/isCallable.js","../../../../node_modules/vike/dist/utils/isObject.js","../../../../node_modules/vike/dist/utils/isArray.js","../../../../node_modules/vike/dist/utils/isArrayOfStrings.js","../../../../node_modules/vike/dist/utils/isObjectOfStrings.js","../../../../node_modules/vike/dist/utils/hasProp.js","../../../../node_modules/vike/dist/utils/objectAssign.js","../../../../node_modules/vike/dist/utils/slice.js","../../../../node_modules/vike/dist/utils/parseUrl.js","../../../../node_modules/vike/dist/utils/getPropAccessNotation.js","../../../../node_modules/vike/dist/utils/updateType.js","../../../../node_modules/vike/dist/utils/changeEnumerable.js","../../../../node_modules/vike/dist/client/runtime-server-routing/utils.js","../../../../node_modules/@brillout/json-serializer/dist/types.js","../../../../node_modules/@brillout/json-serializer/dist/parse.js","../../../../node_modules/vike/dist/utils/humanizeTime.js","../../../../node_modules/vike/dist/utils/genPromise.js","../../../../node_modules/vike/dist/shared-server-client/htmlElementIds.js","../../../../node_modules/vike/dist/client/shared/getJsonSerializedInHtml.js","../../../../node_modules/vike/dist/utils/objectReplace.js","../../../../node_modules/vike/dist/utils/sorter.js","../../../../node_modules/vike/dist/utils/compareString.js","../../../../node_modules/vike/dist/utils/isNullish.js","../../../../node_modules/vike/dist/utils/isPropertyGetter.js","../../../../node_modules/vike/dist/utils/objectDefineProperty.js","../../../../node_modules/vike/dist/utils/isScriptFile.js","../../../../node_modules/vike/dist/shared-server-client/getPageFiles/getAllPageIdFiles.js","../../../../node_modules/vike/dist/shared-server-client/getPageFiles/assert_exports_old_design.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/getExportPath.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/getConfigDefinedAt.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/helpers.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/resolveVikeConfigPublic.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/findPageConfig.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/assertPlusFileExport.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/serialize/parsePageConfigsSerialized.js","../../../../node_modules/vike/dist/shared-server-client/assertVirtualFileExports.js","../../../../node_modules/vike/dist/shared-server-client/page-configs/loadAndParseVirtualFilePageEntry.js","../../../../node_modules/vike/dist/client/shared/loadPageConfigsLazyClientSide.js","../../../../node_modules/vike/dist/client/shared/normalizeClientSideUrl.js","../../../../node_modules/vike/dist/client/shared/getCurrentUrl.js","../../../../node_modules/vike/dist/shared-server-client/createPageContextShared.js","../../../../node_modules/vike/dist/shared-server-client/determinePageIdOld.js","../../../../node_modules/vike/dist/shared-server-client/error-page.js","../../../../node_modules/vike/dist/shared-server-client/getPageFiles/fileTypes.js","../../../../node_modules/vike/dist/shared-server-client/getPageFiles/getPageFileObject.js","../../../../node_modules/vike/dist/shared-server-client/getPageFiles/parseVirtualFileExportsGlobalEntry.js","../../../../node_modules/vike/dist/shared-server-client/hooks/getHook.js","../../../../node_modules/vike/dist/shared-server-client/addIs404ToPageProps.js","../../../../node_modules/vike/dist/shared-server-client/NOT_SERIALIZABLE.js","../../../../node_modules/vike/dist/shared-server-client/getProxyForPublicUsage.js","../../../../node_modules/vike/dist/shared-server-client/prepareGlobalContextForPublicUsage.js","../../../../node_modules/vike/dist/shared-server-client/preparePageContextForPublicUsage.js","../../../../node_modules/vike/dist/shared-server-client/hooks/execHook.js","../../../../node_modules/vike/dist/shared-server-client/createGlobalContextShared.js","../../../../node_modules/vike/dist/client/shared/getGlobalContextClientInternalShared.js","../../../../node_modules/vike/dist/client/runtime-server-routing/getGlobalContextClientInternal.js","../../../../node_modules/vike/dist/client/shared/preparePageContextForPublicUsageClientShared.js","../../../../node_modules/vike/dist/client/runtime-server-routing/preparePageContextForPublicUsageClient.js","../../../../node_modules/vike/dist/client/runtime-server-routing/createPageContextClientSide.js","../../../../node_modules/vike/dist/client/shared/execHookOnRenderClient.js","../../../../node_modules/vike/dist/client/runtime-server-routing/entry.js"],"sourcesContent":["export function unique(arr) {\n    return Array.from(new Set(arr));\n}\n","export { getGlobalObject };\n/**\n * Share information across module instances.\n *\n * @__NO_SIDE_EFFECTS__\n */\nfunction getGlobalObject(moduleId, defaultValue) {\n    const globals = getGlobals();\n    const globalObject = (globals[moduleId] ?? (globals[moduleId] = defaultValue));\n    return globalObject;\n}\nfunction getGlobals() {\n    var _a;\n    globalThis._vike ?? (globalThis._vike = {});\n    (_a = globalThis._vike).globals ?? (_a.globals = {});\n    return globalThis._vike.globals;\n}\n","export default new Proxy({}, {\n    get: (_, p) => (s) => {\n        if (p === 'code')\n            return `\\`${s}\\``;\n        if (p === 'string')\n            return `'${s}'`;\n        return s;\n    }\n});\n","// Automatically updated by @brillout/release-me\nexport const PROJECT_VERSION = '0.4.250';\n","export { assertSingleInstance_onClientEntryServerRouting };\nexport { assertSingleInstance_onClientEntryClientRouting };\nexport { assertSingleInstance_onAssertModuleLoad };\n//  - Show warning if there are two different Vike versions loaded\n//  - Show warning if entry of Client Routing and entry of Server Routing are both loaded\n//  - Show warning if Vike is loaded twice\nimport { unique } from './unique.js';\nimport { getGlobalObject } from './getGlobalObject.js';\nimport pc from '@brillout/picocolors';\nimport { PROJECT_VERSION } from './PROJECT_VERSION.js';\n/* Use original assertWarning() after all CJS is removed from node_modules/vike/dist/\nimport { assertWarning } from './assert.js'\n*/\nlet globalObject;\n// getGlobalObjectSafe() can be called before this line\nglobalObject ?? (globalObject = genGlobalConfig());\nfunction genGlobalConfig() {\n    return getGlobalObject('utils/assertSingleInstance.ts', {\n        instances: [],\n        alreadyLogged: new Set(),\n    });\n}\n// We need getGlobalObjectSafe() because globalObject is `undefined` when exported functions are called before globalObject is initialized\nfunction getGlobalObjectSafe() {\n    globalObject ?? (globalObject = genGlobalConfig());\n    return globalObject;\n}\nconst clientRuntimesClonflict = 'Client runtime of both Server Routing and Client Routing loaded https://vike.dev/client-runtimes-conflict';\nconst clientNotSingleInstance = 'Client runtime loaded twice https://vike.dev/client-runtime-duplicated';\nfunction assertSingleInstance() {\n    const globalObject = getGlobalObjectSafe();\n    {\n        const versions = unique(globalObject.instances);\n        assertWarning(versions.length <= 1, \n        // Do *NOT* patch Vike to remove this warning: you *will* eventually encounter the issues listed at https://vike.dev/warning/version-mismatch\n        // - This happened before: https://github.com/vikejs/vike/issues/1108#issuecomment-1719061509\n        `vike@${pc.bold(versions[0])} and vike@${pc.bold(versions[1])} loaded which is highly discouraged, see ${pc.underline('https://vike.dev/warning/version-mismatch')}`, { onlyOnce: true, showStackTrace: false });\n    }\n    if (globalObject.checkSingleInstance && globalObject.instances.length > 1) {\n        /*/ Not sure whether circular dependency can cause problems? In principle not since client-side code is ESM.\n        console.warn(clientNotSingleInstance)\n        /*/\n        assertWarning(false, clientNotSingleInstance, { onlyOnce: true, showStackTrace: true });\n        //*/\n    }\n}\nfunction assertSingleInstance_onClientEntryServerRouting(isProduction) {\n    const globalObject = getGlobalObjectSafe();\n    assertWarning(globalObject.isClientRouting !== true, clientRuntimesClonflict, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    assertWarning(globalObject.isClientRouting === undefined, clientNotSingleInstance, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    globalObject.isClientRouting = false;\n    if (isProduction)\n        globalObject.checkSingleInstance = true;\n    assertSingleInstance();\n}\nfunction assertSingleInstance_onClientEntryClientRouting(isProduction) {\n    const globalObject = getGlobalObjectSafe();\n    assertWarning(globalObject.isClientRouting !== false, clientRuntimesClonflict, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    assertWarning(globalObject.isClientRouting === undefined, clientNotSingleInstance, {\n        onlyOnce: true,\n        showStackTrace: true,\n    });\n    globalObject.isClientRouting = true;\n    if (isProduction)\n        globalObject.checkSingleInstance = true;\n    assertSingleInstance();\n}\n// Called by utils/assert.ts which is (most certainly) loaded by all entries. That way we don't have to call a callback for every entry. (There are a lot of entries: `client/router/`, `client/`, `server/runtime/`, `node/vite/`, `node/cli`.)\nfunction assertSingleInstance_onAssertModuleLoad() {\n    const globalObject = getGlobalObjectSafe();\n    globalObject.instances.push(PROJECT_VERSION);\n    assertSingleInstance();\n}\nfunction assertWarning(condition, errorMessage, { onlyOnce, showStackTrace }) {\n    const globalObject = getGlobalObjectSafe();\n    if (condition) {\n        return;\n    }\n    const msg = `[Vike][Warning] ${errorMessage}`;\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = onlyOnce === true ? msg : onlyOnce;\n        if (alreadyLogged.has(key)) {\n            return;\n        }\n        else {\n            alreadyLogged.add(key);\n        }\n    }\n    if (showStackTrace) {\n        console.warn(new Error(msg));\n    }\n    else {\n        console.warn(msg);\n    }\n}\n","export function isNodeJS() {\n    if (typeof process === 'undefined')\n        return false;\n    if (!process.cwd)\n        return false;\n    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js/35813135#35813135\n    if (!process.versions || typeof process.versions.node === 'undefined')\n        return false;\n    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js/35813135#comment92529277_35813135\n    if (!process.release || process.release.name !== 'node')\n        return false;\n    return true;\n}\n","export { createErrorWithCleanStackTrace };\nimport { isNodeJS } from './isNodeJS.js';\nfunction createErrorWithCleanStackTrace(errorMessage, numberOfStackTraceLinesToRemove) {\n    const err = new Error(errorMessage);\n    if (isNodeJS()) {\n        err.stack = clean(err.stack, numberOfStackTraceLinesToRemove);\n    }\n    return err;\n}\nfunction clean(errStack, numberOfStackTraceLinesToRemove) {\n    if (!errStack) {\n        return errStack;\n    }\n    const stackLines = splitByLine(errStack);\n    let linesRemoved = 0;\n    const stackLine__cleaned = stackLines\n        .filter((line) => {\n        // Remove internal stack traces\n        if (line.includes(' (internal/') || line.includes(' (node:internal')) {\n            return false;\n        }\n        if (linesRemoved < numberOfStackTraceLinesToRemove && isStackTraceLine(line)) {\n            linesRemoved++;\n            return false;\n        }\n        return true;\n    })\n        .join('\\n');\n    return stackLine__cleaned;\n}\nfunction isStackTraceLine(line) {\n    return line.startsWith('    at ');\n}\nfunction splitByLine(str) {\n    // https://stackoverflow.com/questions/21895233/how-in-node-to-split-string-by-newline-n\n    return str.split(/\\r?\\n/);\n}\n","// ./colorsServer.js => server only\n// ./colorsClient.js => server & client\n// !!!WARNING!!! KEEP THIS FILE MINIMAL: to save KBs sent to the browser\nexport { colorVike };\nexport { colorError };\nexport { colorWarning };\nimport pc from '@brillout/picocolors';\nfunction colorVike(str) {\n    return pc.bold(pc.yellow(str));\n}\nfunction colorError(str) {\n    return pc.bold(pc.red(str));\n}\nfunction colorWarning(str) {\n    return pc.yellow(str);\n}\n","export { assert };\nexport { assertUsage };\nexport { assertWarning };\nexport { assertInfo };\nexport { getProjectError };\nexport { isVikeBug };\nexport { setAssertOnBeforeLog };\nexport { setAssertOnBeforeErr };\nexport { setAlwaysShowStackTrace };\nexport { setAssertAddTagsDev };\nimport { assertSingleInstance_onAssertModuleLoad } from './assertSingleInstance.js';\nimport { createErrorWithCleanStackTrace } from './createErrorWithCleanStackTrace.js';\nimport { getGlobalObject } from './getGlobalObject.js';\nimport { PROJECT_VERSION } from './PROJECT_VERSION.js';\nimport { colorVike, colorWarning, colorError } from './colorsClient.js';\nimport pc from '@brillout/picocolors';\nconst globalObject = getGlobalObject('utils/assert.ts', {\n    alreadyLogged: new Set(),\n});\nassertSingleInstance_onAssertModuleLoad();\nconst tagVike = `[vike]`;\nconst tagVikeWithVersion = `[vike@${PROJECT_VERSION}]`;\nconst tagTypeBug = 'Bug';\nfunction assert(condition, debugInfo) {\n    if (condition)\n        return;\n    const debugStr = (() => {\n        if (!debugInfo) {\n            return null;\n        }\n        const debugInfoSerialized = typeof debugInfo === 'string' ? debugInfo : JSON.stringify(debugInfo);\n        return pc.dim(`Debug for maintainers (you can ignore this): ${debugInfoSerialized}`);\n    })();\n    const link = pc.underline('https://github.com/vikejs/vike/issues/new?template=bug.yml');\n    let errMsg = [\n        `You stumbled upon a Vike bug. Go to ${link} and copy-paste this error. A maintainer will fix the bug (usually within 24 hours).`,\n        debugStr,\n    ]\n        .filter(Boolean)\n        .join(' ');\n    errMsg = addTags(errMsg, tagTypeBug, true);\n    const internalError = createError(errMsg);\n    globalObject.onBeforeLog?.();\n    globalObject.onBeforeErr?.(internalError);\n    throw internalError;\n}\nfunction assertUsage(condition, errMsg, { showStackTrace, exitOnError } = {}) {\n    if (condition)\n        return;\n    showStackTrace = showStackTrace || globalObject.alwaysShowStackTrace;\n    errMsg = addTags(errMsg, 'Wrong Usage');\n    const usageError = createError(errMsg);\n    globalObject.onBeforeLog?.();\n    globalObject.onBeforeErr?.(usageError);\n    if (!exitOnError) {\n        throw usageError;\n    }\n    else {\n        console.error(showStackTrace ? usageError : errMsg);\n        process.exit(1);\n    }\n}\nfunction getProjectError(errMsg) {\n    errMsg = addTags(errMsg, 'Error');\n    const projectError = createError(errMsg);\n    return projectError;\n}\nfunction assertWarning(condition, msg, { onlyOnce, showStackTrace }) {\n    if (condition)\n        return;\n    showStackTrace = showStackTrace || globalObject.alwaysShowStackTrace;\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = onlyOnce === true ? msg : onlyOnce;\n        if (alreadyLogged.has(key))\n            return;\n        alreadyLogged.add(key);\n    }\n    const msgWithTags = addTags(msg, 'Warning');\n    globalObject.onBeforeLog?.();\n    if (showStackTrace) {\n        const err = createError(msgWithTags);\n        globalObject.onBeforeErr?.(err);\n        console.warn(err);\n    }\n    else {\n        console.warn(msgWithTags);\n    }\n}\nfunction assertInfo(condition, msg, { onlyOnce }) {\n    if (condition) {\n        return;\n    }\n    msg = addTags(msg, null);\n    if (onlyOnce) {\n        const { alreadyLogged } = globalObject;\n        const key = msg;\n        if (alreadyLogged.has(key)) {\n            return;\n        }\n        else {\n            alreadyLogged.add(key);\n        }\n    }\n    globalObject.onBeforeLog?.();\n    console.log(msg);\n}\nfunction setAssertOnBeforeLog(onBeforeAssertLog) {\n    globalObject.onBeforeLog = onBeforeAssertLog;\n}\nfunction setAssertOnBeforeErr(onBeforeAssertErr) {\n    globalObject.onBeforeErr = onBeforeAssertErr;\n}\nfunction setAssertAddTagsDev(addTagsDev) {\n    globalObject.addTagsDev = addTagsDev;\n}\nfunction addTags(msg, tagType, showProjectVersion = false) {\n    const tagVike = getTagVike(showProjectVersion);\n    const tagTypeOuter = getTagType(tagType);\n    const whitespace = getTagWhitespace(msg);\n    if (globalObject.addTagsDev) {\n        const tagsDev = globalObject.addTagsDev(tagVike, tagTypeOuter);\n        return `${tagsDev}${whitespace}${msg}`;\n    }\n    else {\n        const tags = `${tagVike}${tagTypeOuter}`;\n        return `${tags}${whitespace}${msg}`;\n    }\n}\nfunction getTagWhitespace(msg) {\n    if (msg.startsWith('[')) {\n        return '';\n    }\n    else {\n        return ' ';\n    }\n}\nfunction getTagType(tagType) {\n    if (!tagType)\n        return '';\n    let tag = `[${tagType}]`;\n    if (tagType === 'Warning') {\n        tag = colorWarning(tag);\n    }\n    else {\n        tag = colorError(tag);\n    }\n    return tag;\n}\nfunction getTagVike(showProjectVersion = false) {\n    const tag = showProjectVersion ? tagVikeWithVersion : tagVike;\n    return colorVike(tag);\n}\nfunction isVikeBug(err) {\n    return String(err).includes(`[${tagTypeBug}]`);\n}\n// Called upon `DEBUG=vike:error`\nfunction setAlwaysShowStackTrace() {\n    globalObject.alwaysShowStackTrace = true;\n}\nfunction createError(errMsg) {\n    const err = createErrorWithCleanStackTrace(errMsg, 3);\n    if (globalObject.addTagsDev)\n        err.stack = err.stack?.replace(/^Error:\\s*/, '');\n    return err;\n}\n","export function isBrowser() {\n    // Using `typeof window !== 'undefined'` alone is not enough because some users use https://www.npmjs.com/package/ssr-window\n    return typeof window !== 'undefined' && typeof window.scrollY === 'number';\n    // Alternatively, test whether environment is a *real* browser: https://github.com/brillout/picocolors/blob/d59a33a0fd52a8a33e4158884069192a89ce0113/picocolors.js#L87-L89\n}\n","export { assertClientRouting };\nexport { assertServerRouting };\nexport { checkIfClientRouting };\nimport { assertUsage, assertWarning } from './assert.js';\nimport { getGlobalObject } from './getGlobalObject.js';\nimport { isBrowser } from './isBrowser.js';\nimport pc from '@brillout/picocolors';\nconst state = getGlobalObject('utils/assertRouterType.ts', {});\nfunction assertClientRouting() {\n    assertNoContradiction(checkIfClientRouting());\n    state.isClientRouting = true;\n}\nfunction checkIfClientRouting() {\n    return state.isClientRouting !== false;\n}\nfunction assertServerRouting() {\n    assertNoContradiction(state.isClientRouting !== true);\n    state.isClientRouting = false;\n}\nfunction assertNoContradiction(noContradiction) {\n    // If an assertion fails because of a wrong usage, then we assume that the user is trying to import from 'vike/client/router' while not setting `clientRouting` to `true`. Note that 'vike/client' only exports the type `PageContextBuiltInClient` and that the package.json#exports entry 'vike/client' will eventually be removed.\n    assertUsage(isBrowser(), `${pc.cyan(\"import { something } from 'vike/client/router'\")} is forbidden on the server-side`, { showStackTrace: true });\n    assertWarning(noContradiction, \"You shouldn't `import { something } from 'vike/client/router'` when using Server Routing. The 'vike/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle sizes.\", { showStackTrace: true, onlyOnce: true });\n}\n","export { assertIsBrowser };\nimport { isBrowser } from './isBrowser.js';\nimport { assert } from './assert.js';\nfunction assertIsBrowser() {\n    assert(isBrowser());\n}\n","export { onLoad };\nimport { assertIsBrowser } from '../../utils/assertIsBrowser.js';\nfunction onLoad() {\n    assertIsBrowser();\n}\n","export function isCallable(thing) {\n    return thing instanceof Function || typeof thing === 'function';\n}\n","export function isObject(value) {\n    return typeof value === 'object' && value !== null;\n}\n","// Same as Array.isArray() but typesafe: asserts unknown[] instead of any[]\nexport function isArray(value) {\n    return Array.isArray(value);\n}\n","export { isArrayOfStrings };\nimport { isArray } from './isArray.js';\nfunction isArrayOfStrings(val) {\n    return isArray(val) && val.every((v) => typeof v === 'string');\n}\n","export { isObjectOfStrings };\nimport { isObject } from './isObject.js';\nfunction isObjectOfStrings(val) {\n    return isObject(val) && Object.values(val).every((v) => typeof v === 'string');\n}\n","export { hasProp };\nimport { isCallable } from './isCallable.js';\nimport { isObject } from './isObject.js';\nimport { isArrayOfStrings } from './isArrayOfStrings.js';\nimport { isObjectOfStrings } from './isObjectOfStrings.js';\nimport { isArray } from './isArray.js';\nfunction hasProp(obj, prop, type) {\n    if (!isObject(obj))\n        return false;\n    if (!(prop in obj)) {\n        return type === 'undefined';\n    }\n    if (type === undefined) {\n        return true;\n    }\n    const propValue = obj[prop];\n    if (type === 'undefined') {\n        return propValue === undefined;\n    }\n    if (type === 'array') {\n        return isArray(propValue);\n    }\n    if (type === 'object') {\n        return isObject(propValue);\n    }\n    if (type === 'string[]') {\n        return isArrayOfStrings(propValue);\n    }\n    if (type === 'string{}') {\n        return isObjectOfStrings(propValue);\n    }\n    if (type === 'function') {\n        return isCallable(propValue);\n    }\n    if (isArray(type)) {\n        return typeof propValue === 'string' && type.includes(propValue);\n    }\n    if (type === 'null') {\n        return propValue === null;\n    }\n    if (type === 'true') {\n        return propValue === true;\n    }\n    if (type === 'false') {\n        return propValue === false;\n    }\n    return typeof propValue === type;\n}\n","export { objectAssign };\nimport { assert } from './assert.js';\n// Same as Object.assign() but:\n//  - With type inference\n//  - Preserves property descriptors, which we need for preserving the getters of getPageContextUrlComputed()\nfunction objectAssign(obj, objAddendum, objAddendumCanBeOriginalObject) {\n    if (!objAddendum)\n        return;\n    if (!objAddendumCanBeOriginalObject)\n        assert(!objAddendum._isOriginalObject);\n    Object.defineProperties(obj, Object.getOwnPropertyDescriptors(objAddendum));\n}\n","import { assert } from './assert.js';\nexport { slice };\nfunction slice(thing, from, to) {\n    if (typeof thing === 'string') {\n        return sliceArray(thing.split(''), from, to).join('');\n    }\n    else {\n        return sliceArray(thing, from, to);\n    }\n}\nfunction sliceArray(list, from, to) {\n    const listSlice = [];\n    let start = from >= 0 ? from : list.length + from;\n    assert(start >= 0 && start <= list.length);\n    let end = to >= 0 ? to : list.length + to;\n    assert(end >= 0 && end <= list.length);\n    while (true) {\n        if (start === end) {\n            break;\n        }\n        if (start === list.length) {\n            start = 0;\n        }\n        if (start === end) {\n            break;\n        }\n        const el = list[start];\n        assert(el !== undefined);\n        listSlice.push(el);\n        start++;\n    }\n    return listSlice;\n}\n","// We don't use new URL() as it doesn't exactly do what we need, for example:\n//  - It loses the original URL parts (which we need to manipulate and recreate URLs)\n//  - It doesn't support the tauri:// protocol\n// Unit tests at ./parseUrl.spec.ts\nexport { parseUrl };\nexport { assertUsageUrlAbsolute };\nexport { assertUsageUrlPathAbsolute };\nexport { assertUsageUrlRedirectTarget };\nexport { isUrl };\nexport { isUri };\nexport { isUrlRedirectTarget };\nexport { isUrlRelative };\nexport { isUrlExternal };\nexport { isBaseServer };\nexport { assertUrlComponents };\nexport { createUrlFromComponents };\nimport { slice } from './slice.js';\nimport { assert, assertUsage } from './assert.js';\nimport pc from '@brillout/picocolors';\nfunction parseUrl(url, baseServer) {\n    assert(isUrl(url), url);\n    assert(baseServer.startsWith('/'));\n    // Hash\n    const { hashString: hashOriginal, withoutHash: urlWithoutHash } = extractHash(url);\n    assert(hashOriginal === null || hashOriginal.startsWith('#'));\n    const hash = hashOriginal === null ? '' : decodeSafe(hashOriginal.slice(1));\n    // Search\n    const { searchString: searchOriginal, withoutSearch: urlWithoutHashNorSearch } = extractSearch(urlWithoutHash);\n    assert(searchOriginal === null || searchOriginal.startsWith('?'));\n    let searchString = '';\n    if (searchOriginal !== null) {\n        searchString = searchOriginal;\n    }\n    else if (url.startsWith('#')) {\n        const baseURI = getBaseURI();\n        searchString = (baseURI && extractSearch(baseURI).searchString) || '';\n    }\n    const search = {};\n    const searchAll = {};\n    Array.from(new URLSearchParams(searchString)).forEach(([key, val]) => {\n        search[key] = val;\n        searchAll[key] = [...(searchAll.hasOwnProperty(key) ? searchAll[key] : []), val];\n    });\n    // Origin + pathname\n    let { protocol, origin, pathnameAbsoluteWithBase } = getPathnameAbsoluteWithBase(urlWithoutHashNorSearch, baseServer);\n    const pathnameOriginal = urlWithoutHashNorSearch.slice((origin || '').length);\n    assertUrlComponents(url, origin, pathnameOriginal, searchOriginal, hashOriginal);\n    // Base URL\n    let { pathname, isBaseMissing } = removeBaseServer(pathnameAbsoluteWithBase, baseServer);\n    // pageContext.urlParsed.href\n    const href = createUrlFromComponents(origin, pathname, searchOriginal, hashOriginal);\n    // pageContext.urlParsed.{hostname, port}\n    const host = !origin ? null : origin.slice(protocol.length);\n    const { hostname, port } = parseHost(host, url);\n    // decode after setting href\n    pathname = decodePathname(pathname);\n    /* Should it be `pathname` or `pathnameOriginal`? https://github.com/vikejs/vike/pull/2770\n    // pageContext.urlParsed.path\n    const path = pathname + (searchOriginal || '') + (hashOriginal || '')\n    */\n    assert(pathname.startsWith('/'));\n    return {\n        href,\n        protocol,\n        hostname,\n        port,\n        origin,\n        pathname,\n        pathnameOriginal: pathnameOriginal,\n        isBaseMissing,\n        search,\n        searchAll,\n        searchOriginal,\n        hash,\n        hashOriginal,\n    };\n}\nfunction extractHash(url) {\n    const [withoutHash, ...parts] = url.split('#');\n    const hashString = ['', ...parts].join('#') || null;\n    return { hashString, withoutHash: withoutHash };\n}\nfunction extractSearch(url) {\n    const [withoutSearch, ...parts] = url.split('?');\n    const searchString = ['', ...parts].join('?') || null;\n    return { searchString, withoutSearch: withoutSearch };\n}\nfunction decodeSafe(urlComponent) {\n    try {\n        return decodeURIComponent(urlComponent);\n    }\n    catch { }\n    try {\n        return decodeURI(urlComponent);\n    }\n    catch { }\n    return urlComponent;\n}\nfunction decodePathname(urlPathname) {\n    urlPathname = urlPathname.replace(/\\s+$/, '');\n    urlPathname = urlPathname\n        .split('/')\n        .map((dir) => decodeSafe(dir).split('/').join('%2F'))\n        .join('/');\n    return urlPathname;\n}\nfunction getPathnameAbsoluteWithBase(url, baseServer) {\n    // Search and hash already extracted\n    assert(!url.includes('?') && !url.includes('#'));\n    // url has origin\n    {\n        const { protocol, origin, pathname } = parseOrigin(url);\n        if (origin) {\n            return { protocol, origin, pathnameAbsoluteWithBase: pathname };\n        }\n        assert(pathname === url);\n    }\n    // url doesn't have origin\n    if (url.startsWith('/')) {\n        return { protocol: null, origin: null, pathnameAbsoluteWithBase: url };\n    }\n    else {\n        // url is a relative path\n        const baseURI = getBaseURI();\n        let base;\n        if (baseURI) {\n            base = parseOrigin(baseURI.split('?')[0].split('#')[0]).pathname;\n        }\n        else {\n            base = baseServer;\n        }\n        const pathnameAbsoluteWithBase = resolveUrlPathnameRelative(url, base);\n        return { protocol: null, origin: null, pathnameAbsoluteWithBase };\n    }\n}\nfunction getBaseURI() {\n    // In the browser, this is the Base URL of the current URL.\n    // Safe access `window?.document?.baseURI` for users who shim `window` in Node.js\n    const baseURI = typeof window !== 'undefined' ? window?.document?.baseURI : undefined;\n    return baseURI;\n}\nfunction parseOrigin(url) {\n    if (!isUrlWithWebProtocol(url)) {\n        return { pathname: url, origin: null, protocol: null };\n    }\n    else {\n        const { protocol, uriWithoutProtocol } = parseProtocol(url);\n        assert(protocol);\n        const [host, ...rest] = uriWithoutProtocol.split('/');\n        const origin = protocol + host;\n        const pathname = '/' + rest.join('/');\n        return { pathname, origin, protocol };\n    }\n}\nfunction parseHost(host, url) {\n    const ret = { hostname: null, port: null };\n    if (!host)\n        return ret;\n    // port\n    const parts = host.split(':');\n    if (parts.length > 1) {\n        const port = parseInt(parts.pop(), 10);\n        assert(port || port === 0, url);\n        ret.port = port;\n    }\n    // hostname\n    ret.hostname = parts.join(':');\n    return ret;\n}\nfunction parseProtocol(uri) {\n    const SEP = ':';\n    const [before, ...after] = uri.split(SEP);\n    if (after.length === 0 ||\n        // https://github.com/vikejs/vike/commit/886a99ff21e86a8ca699a25cee7edc184aa058e4#r143308934\n        // https://en.wikipedia.org/wiki/List_of_URI_schemes\n        // https://www.rfc-editor.org/rfc/rfc7595\n        !/^[a-z][a-z0-9\\+\\-]*$/i.test(before)) {\n        return { protocol: null, uriWithoutProtocol: uri };\n    }\n    let protocol = before + SEP;\n    let uriWithoutProtocol = after.join(SEP);\n    const SEP2 = '//';\n    if (uriWithoutProtocol.startsWith(SEP2)) {\n        protocol = protocol + SEP2;\n        uriWithoutProtocol = uriWithoutProtocol.slice(SEP2.length);\n    }\n    return { protocol, uriWithoutProtocol };\n}\nfunction isWebUrlProtocol(protocol) {\n    // Is there an alternative to having a blocklist?\n    // - If the blocklist becomes too big, maybe use a allowlist instead ['tauri://', 'file://', 'capacitor://', 'http://', 'https://']\n    const blocklist = [\n        // https://docs.ipfs.tech/how-to/address-ipfs-on-web\n        'ipfs://',\n        'ipns://',\n    ];\n    if (blocklist.includes(protocol))\n        return false;\n    return protocol.endsWith('://');\n}\n// Adapted from https://stackoverflow.com/questions/14780350/convert-relative-path-to-absolute-using-javascript/14780463#14780463\nfunction resolveUrlPathnameRelative(pathnameRelative, base) {\n    const stack = base.split('/');\n    const parts = pathnameRelative.split('/');\n    let baseRestoreTrailingSlash = base.endsWith('/');\n    if (pathnameRelative.startsWith('.')) {\n        // remove current file name\n        stack.pop();\n    }\n    for (const i in parts) {\n        const p = parts[i];\n        if (p == '' && i === '0')\n            continue;\n        if (p == '.')\n            continue;\n        if (p == '..')\n            stack.pop();\n        else {\n            baseRestoreTrailingSlash = false;\n            stack.push(p);\n        }\n    }\n    let pathnameAbsolute = stack.join('/');\n    if (baseRestoreTrailingSlash && !pathnameAbsolute.endsWith('/'))\n        pathnameAbsolute += '/';\n    if (!pathnameAbsolute.startsWith('/'))\n        pathnameAbsolute = '/' + pathnameAbsolute;\n    return pathnameAbsolute;\n}\nfunction removeBaseServer(pathnameAbsoluteWithBase, baseServer) {\n    assert(pathnameAbsoluteWithBase.startsWith('/'));\n    assert(isBaseServer(baseServer));\n    // Mutable\n    let urlPathname = pathnameAbsoluteWithBase;\n    assert(urlPathname.startsWith('/'));\n    assert(baseServer.startsWith('/'));\n    if (baseServer === '/') {\n        const pathname = pathnameAbsoluteWithBase;\n        return { pathname, isBaseMissing: false };\n    }\n    // Support `url === '/some-base-url' && baseServer === '/some-base-url/'`\n    let baseServerNormalized = baseServer;\n    if (baseServer.endsWith('/') && urlPathname === slice(baseServer, 0, -1)) {\n        baseServerNormalized = slice(baseServer, 0, -1);\n        assert(urlPathname === baseServerNormalized);\n    }\n    if (!urlPathname.startsWith(baseServerNormalized)) {\n        const pathname = pathnameAbsoluteWithBase;\n        return { pathname, isBaseMissing: true };\n    }\n    assert(urlPathname.startsWith('/') || urlPathname.startsWith('http'));\n    assert(urlPathname.startsWith(baseServerNormalized));\n    urlPathname = urlPathname.slice(baseServerNormalized.length);\n    if (!urlPathname.startsWith('/'))\n        urlPathname = '/' + urlPathname;\n    assert(urlPathname.startsWith('/'));\n    return { pathname: urlPathname, isBaseMissing: false };\n}\nfunction isBaseServer(baseServer) {\n    return baseServer.startsWith('/');\n}\nfunction assertUrlComponents(url, origin, pathnameOriginal, searchOriginal, hashOriginal) {\n    const urlRecreated = createUrlFromComponents(origin, pathnameOriginal, searchOriginal, hashOriginal);\n    assert(url === urlRecreated);\n}\nfunction createUrlFromComponents(origin, pathname, search, hash) {\n    const urlRecreated = `${origin || ''}${pathname}${search || ''}${hash || ''}`;\n    return urlRecreated;\n}\nfunction isUrl(url) {\n    // parseUrl() works with these URLs\n    return isUrlAbsolute(url) || isUrlRelative(url);\n}\nfunction isUrlRedirectTarget(url) {\n    return isUrlAbsolute(url) || isUri(url);\n}\nfunction isUrlAbsolute(url) {\n    return isUrlPathAbsolute(url) || isUrlWithWebProtocol(url);\n}\nfunction isUrlPathAbsolute(url) {\n    return url.startsWith('/');\n}\nfunction isUrlRelative(url) {\n    return ['.', '?', '#'].some((c) => url.startsWith(c)) || url === '';\n}\nfunction isUrlExternal(url) {\n    return !url.startsWith('/') && !isUrlRelative(url);\n}\n/*\nURL with protocol.\n\n  http://example.com\n  https://example.com\n  tauri://localhost\n  file://example.com\n  capacitor://localhost/assets/chunks/chunk-DJBYDrsP.js\n\n[Tauri](https://github.com/vikejs/vike/issues/808)\n[Electron (`file://`)](https://github.com/vikejs/vike/issues/1557)\n[Capacitor](https://github.com/vikejs/vike/issues/1706)\n */\nfunction isUrlWithWebProtocol(url) {\n    const { protocol } = parseProtocol(url);\n    return !!protocol && isWebUrlProtocol(protocol);\n}\n/*\nURIs that aren't URLs.\n\n  mailto:john@example.com\n\n  ipfs://bafybeiemxf5abjwjbikoz4mc3a3dla6ual3jsgpdr4cjr3oz3evfyavhwq/wiki/Vincent_van_Gogh.html\n\n  magnet:?xt=urn:btih:3a15e1ac49683d91b20c2ffc252ea612a6c01bd7&dn=The.Empire.Strikes.Back.1980.Remastered.1080p.BluRay.DDP.7.1.x265-EDGE2020.mkv&xl=3225443573&tr=udp://tracker.opentrackr.org:1337/announce&tr=udp://tracker.torrent.eu.org:451&tr=udp://open.stealth.si:80/announce&tr=udp://tracker.openbittorrent.com:6969&tr=udp://tracker.tiny-vps.com:6969/announce&tr=udp://open.demonii.com:1337\n\nWe need to treat URIs differently than URLs.\n - For example, we cannot parse URIs (their structure is unknown e.g. a `magnet:` URI is completely different than a `http://` URL).\n   - The protocols tauri:// file:// capacitor:// follow the same structure as http:// and https:// URLs.\n     - Thus we can parse them like http:// and https:// URLs.\n*/\nfunction isUri(uri) {\n    const { protocol } = parseProtocol(uri);\n    return !!protocol && !isWebUrlProtocol(protocol);\n}\nfunction assertUsageUrlAbsolute(url, errPrefix) {\n    assertUsage(isUrlAbsolute(url), getErrMsg(url, errPrefix, true));\n}\nfunction assertUsageUrlPathAbsolute(url, errPrefix) {\n    assertUsage(isUrlPathAbsolute(url), getErrMsg(url, errPrefix));\n}\nfunction assertUsageUrlRedirectTarget(url, errPrefix, isUnresolved) {\n    const errMsg = getErrMsg(url, errPrefix, true, isUnresolved);\n    assertUsage(isUrlRedirectTarget(url) || (isUnresolved && url === '*'), errMsg);\n}\nfunction getErrMsg(url, errPrefix, allowProtocol, allowUri) {\n    let errMsg = `${errPrefix} is ${pc.string(url)} but it should start with ${pc.string('/')}`;\n    if (allowProtocol)\n        errMsg += ` or a protocol (e.g. ${pc.string('http://')})`;\n    if (allowUri)\n        errMsg += `, or be ${pc.string('*')}`;\n    return errMsg;\n}\n","export function getPropAccessNotation(key) {\n    return typeof key === 'string' && isKeyDotNotationCompatible(key) ? `.${key}` : `[${JSON.stringify(key)}]`;\n}\nfunction isKeyDotNotationCompatible(key) {\n    return /^[a-z0-9\\$_]+$/i.test(key);\n}\n","export { updateType };\nimport { assert } from './assert.js';\n/** Help TypeScript update the type of dynamically modified objects. */\nfunction updateType(thing, clone) {\n    // @ts-ignore\n    assert(thing === clone);\n}\n","/** Change enumerability of an object property. */\nexport function changeEnumerable(obj, prop, enumerable) {\n    const descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n    Object.defineProperty(obj, prop, { ...descriptor, enumerable });\n}\n","// Utils needed by Vike's client runtime (with Server Routing)\n// We call onLoad() here so that it's called even when only a subset of the runtime is loaded. (Making the assert() calls inside onLoad() a lot stronger.)\nimport { onLoad } from './onLoad.js';\nonLoad();\nexport * from '../../utils/assert.js';\nexport * from '../../utils/assertSingleInstance.js';\nexport * from '../../utils/checkType.js'; // Only used by Server Routing (not needed for Client Routing)\nexport * from '../../utils/getGlobalObject.js';\nexport * from '../../utils/hasProp.js';\nexport * from '../../utils/isCallable.js';\nexport * from '../../utils/isObject.js';\nexport * from '../../utils/objectAssign.js';\nexport * from '../../utils/parseUrl.js';\nexport * from '../../utils/slice.js';\nexport * from '../../utils/unique.js'; // Only used by Server Routing (not needed for Client Routing)\nexport * from '../../utils/getPropAccessNotation.js';\nexport * from '../../utils/updateType.js';\nexport * from '../../utils/changeEnumerable.js';\n","export { types };\nconst types = [\n    ts({\n        is: (val) => val === undefined,\n        match: (str) => str === '!undefined',\n        serialize: () => '!undefined',\n        deserialize: () => undefined,\n    }),\n    ts({\n        is: (val) => val === Infinity,\n        match: (str) => str === '!Infinity',\n        serialize: () => '!Infinity',\n        deserialize: () => Infinity,\n    }),\n    ts({\n        is: (val) => val === -Infinity,\n        match: (str) => str === '!-Infinity',\n        serialize: () => '!-Infinity',\n        deserialize: () => -Infinity,\n    }),\n    ts({\n        is: (val) => typeof val === 'number' && isNaN(val),\n        match: (str) => str === '!NaN',\n        serialize: () => '!NaN',\n        deserialize: () => NaN,\n    }),\n    ts({\n        is: (val) => val instanceof Date,\n        match: (str) => str.startsWith('!Date:'),\n        serialize: (val) => '!Date:' + val.toISOString(),\n        deserialize: (str) => new Date(str.slice('!Date:'.length)),\n    }),\n    ts({\n        is: (val) => typeof val === 'bigint',\n        match: (str) => str.startsWith('!BigInt:'),\n        serialize: (val) => '!BigInt:' + val.toString(),\n        deserialize: (str) => {\n            if (typeof BigInt === 'undefined') {\n                throw new Error('Your JavaScript environement does not support BigInt. Consider adding a polyfill.');\n            }\n            return BigInt(str.slice('!BigInt:'.length));\n        },\n    }),\n    ts({\n        is: (val) => val instanceof RegExp,\n        match: (str) => str.startsWith('!RegExp:'),\n        serialize: (val) => '!RegExp:' + val.toString(),\n        deserialize: (str) => {\n            str = str.slice('!RegExp:'.length);\n            // const args: string[] = str.match(/\\/(.*?)\\/([gimy])?$/)!\n            const args = str.match(/\\/(.*)\\/(.*)?/);\n            const pattern = args[1];\n            const flags = args[2];\n            return new RegExp(pattern, flags);\n        },\n    }),\n    ts({\n        is: (val) => val instanceof Map,\n        match: (str) => str.startsWith('!Map:'),\n        serialize: (val, serializer) => '!Map:' + serializer(Array.from(val.entries())),\n        deserialize: (str, parser) => new Map(parser(str.slice('!Map:'.length))),\n    }),\n    ts({\n        is: (val) => val instanceof Set,\n        match: (str) => str.startsWith('!Set:'),\n        serialize: (val, serializer) => '!Set:' + serializer(Array.from(val.values())),\n        deserialize: (str, parser) => new Set(parser(str.slice('!Set:'.length))),\n    }),\n    // Avoid collisions with the special strings defined above\n    ts({\n        is: (val) => typeof val === 'string' && val.startsWith('!'),\n        match: (str) => str.startsWith('!'),\n        serialize: (val) => '!' + val,\n        deserialize: (str) => str.slice(1),\n    }),\n];\n// Type check\nfunction ts(t) {\n    return t;\n}\n","export { parse };\n// Used by Vike: https://github.com/vikejs/vike/blob/b4ba6b70e6bdc2e1f460c0d2e4c3faae5d0a733c/vike/shared/page-configs/serialize/parseConfigValuesSerialized.ts#L13\nexport { parseTransform };\nimport { types } from './types.js';\nfunction parse(str, options = {}) {\n    // We don't use the reviver option in `JSON.parse(str, reviver)` because it doesn't support `undefined` values\n    const value = JSON.parse(str);\n    return parseTransform(value, options);\n}\nfunction parseTransform(value, options = {}) {\n    if (typeof value === 'string') {\n        return reviver(value, options);\n    }\n    if (\n    // Also matches arrays\n    typeof value === 'object' &&\n        value !== null) {\n        Object.entries(value).forEach(([key, val]) => {\n            ;\n            value[key] = parseTransform(val, options);\n        });\n    }\n    return value;\n}\nfunction reviver(value, options) {\n    const parser = (str) => parse(str, options);\n    {\n        const res = options.reviver?.(\n        // TO-DO/eventually: provide key if some user needs it\n        undefined, value, parser);\n        if (res) {\n            if (typeof res.replacement !== 'string') {\n                return res.replacement;\n            }\n            else {\n                value = res.replacement;\n                if (res.resolved)\n                    return value;\n            }\n        }\n    }\n    for (const { match, deserialize } of types) {\n        if (match(value)) {\n            return deserialize(value, parser);\n        }\n    }\n    return value;\n}\n","export { humanizeTime };\nfunction humanizeTime(milliseconds) {\n    const seconds = milliseconds / 1000;\n    if (seconds < 120) {\n        const n = round(seconds);\n        return `${n} second${plural(n)}`;\n    }\n    {\n        const minutes = seconds / 60;\n        const n = round(minutes);\n        return `${n} minute${plural(n)}`;\n    }\n}\nfunction round(n) {\n    let rounded = n.toFixed(1);\n    if (rounded.endsWith('.0'))\n        rounded = rounded.slice(0, -2);\n    return rounded;\n}\nfunction plural(n) {\n    return n === '1' ? '' : 's';\n}\n","export { genPromise };\n// Simple implementation without timeout: https://github.com/vikejs/vike/blob/2e59b922e7e0f227d26018dc2b74877c9b0f581b/vike/utils/genPromise.ts\nimport { assert, assertWarning } from './assert.js';\nimport { humanizeTime } from './humanizeTime.js';\nconst timeoutDefault = 25 * 1000;\nfunction genPromise({ timeout = timeoutDefault, } = {}) {\n    let resolve;\n    let reject;\n    let finished = false;\n    const promise_internal = new Promise((resolve_, reject_) => {\n        resolve = (...args) => {\n            finished = true;\n            timeoutClear();\n            return resolve_(...args);\n        };\n        reject = (...args) => {\n            finished = true;\n            timeoutClear();\n            return reject_(...args);\n        };\n    });\n    const timeoutClear = () => timeouts.forEach((t) => clearTimeout(t));\n    const timeouts = [];\n    let promise;\n    if (!timeout) {\n        promise = promise_internal;\n    }\n    else {\n        promise = new Proxy(promise_internal, {\n            get(target, prop) {\n                if (prop === 'then' && !finished) {\n                    const err = new Error(`Promise hasn't resolved after ${humanizeTime(timeout)}`);\n                    timeouts.push(setTimeout(() => {\n                        assert(err.stack);\n                        assertWarning(false, removeStackErrorPrefix(err.stack), { onlyOnce: false });\n                    }, timeout));\n                }\n                const value = Reflect.get(target, prop);\n                return typeof value === 'function' ? value.bind(target) : value;\n            },\n        });\n    }\n    return { promise, resolve, reject };\n}\nfunction removeStackErrorPrefix(errStack) {\n    const errorPrefix = 'Error: ';\n    if (errStack.startsWith(errorPrefix))\n        errStack = errStack.slice(errorPrefix.length);\n    return errStack;\n}\n","export const htmlElementId_pageContext = 'vike_pageContext';\nexport const htmlElementId_globalContext = 'vike_globalContext';\n","export { getPageContextSerializedInHtml };\nexport { getGlobalContextSerializedInHtml };\nimport { parse } from '@brillout/json-serializer/parse';\nimport { hasProp, assert, assertUsage } from './utils.js';\nimport { htmlElementId_globalContext, htmlElementId_pageContext } from '../../shared-server-client/htmlElementIds.js';\n// elements should exist because:\n// 1. <script id=\"vike_pageContext\" type=\"application/json\"> appears before the <script> that loads Vike's client runtime (which includes this file)\n// 2. <script id=\"vike_pageContext\" type=\"application/json\"> is neither async nor defer\n// See https://github.com/vikejs/vike/pull/1271\nfunction getPageContextSerializedInHtml() {\n    const pageContextSerializedInHtml = findAndParseJson(htmlElementId_pageContext);\n    assert(hasProp(pageContextSerializedInHtml, 'pageId', 'string'));\n    assert(hasProp(pageContextSerializedInHtml, 'routeParams', 'string{}'));\n    return pageContextSerializedInHtml;\n}\nfunction getGlobalContextSerializedInHtml() {\n    const globalContextSerializedInHtml = findAndParseJson(htmlElementId_globalContext);\n    return globalContextSerializedInHtml;\n}\nfunction findAndParseJson(id) {\n    const elem = document.getElementById(id);\n    assertUsage(elem, \n    // It seems like it can be missing when HTML is malformed: https://github.com/vikejs/vike/issues/913\n    `Couldn't find #${id} (which Vike automatically injects in the HTML): make sure it exists (i.e. don't remove it and make sure your HTML isn't malformed)`);\n    const jsonStr = elem.textContent;\n    assert(jsonStr);\n    const json = parse(jsonStr, {\n        // Prevent Google from crawling URLs in JSON:\n        // - https://github.com/vikejs/vike/pull/2603\n        // - https://github.com/brillout/json-serializer/blob/38edbb9945de4938da1e65d6285ce1dd123a45ef/test/main.spec.ts#L44-L95\n        reviver(_key, value) {\n            if (typeof value === 'string') {\n                return { replacement: value.replaceAll('\\\\/', '/'), resolved: false };\n            }\n        },\n    });\n    return json;\n}\n","export function objectReplace(objOld, objNew, except) {\n    Object.keys(objOld)\n        .filter((key) => !except?.includes(key))\n        .forEach((key) => delete objOld[key]);\n    Object.defineProperties(objOld, Object.getOwnPropertyDescriptors(objNew));\n}\n","import { assert } from './assert.js';\nexport { higherFirst };\nexport { lowerFirst };\nexport { makeFirst };\nexport { makeLast };\nexport { reverse };\n/**\n * ```js\n * let arr = [\n *   { price: 10 },\n *   { price: 1000 },\n *   { price: 100 }\n * ]\n * arr = arr.sort(higherFirst(el => el.price))\n * isEqual(arr, [\n *   { price: 1000 },\n *   { price: 100 },\n *   { price: 10 }\n * ])\n * ```\n */\nfunction higherFirst(getValue) {\n    return (element1, element2) => {\n        const val1 = getValue(element1);\n        const val2 = getValue(element2);\n        if (val1 === val2) {\n            return 0;\n        }\n        return val1 > val2 ? -1 : 1;\n    };\n}\n/**\n * ```js\n * let arr = [\n *   { price: 10 },\n *   { price: 1000 },\n *   { price: 100 }\n * ]\n * arr = arr.sort(lowerFirst(el => el.price))\n * isEqual(arr, [\n *   { price: 10 },\n *   { price: 100 },\n *   { price: 1000 }\n * ])\n * ```\n */\nfunction lowerFirst(getValue) {\n    return (element1, element2) => {\n        const val1 = getValue(element1);\n        const val2 = getValue(element2);\n        if (val1 === val2) {\n            return 0;\n        }\n        return val1 < val2 ? -1 : 1;\n    };\n}\n/**\n * ```js\n * let arr = [\n *  { name: 'iphone', isRocket: false },\n *  { name: 'starship', isRocket: true }\n * ]\n * arr = arr.sort(makeFirst(el => el.isRocket))\n * isEqual(arr, [\n *  { name: 'starship', isRocket: true },\n *  { name: 'iphone', isRocket: false }\n * ])\n * ```\n */\nfunction makeFirst(getValue) {\n    return (element1, element2) => {\n        const val1 = getValue(element1);\n        const val2 = getValue(element2);\n        assert([true, false, null].includes(val1));\n        assert([true, false, null].includes(val2));\n        if (val1 === val2) {\n            return 0;\n        }\n        if (val1 === true || val2 === false) {\n            return -1;\n        }\n        if (val2 === true || val1 === false) {\n            return 1;\n        }\n        assert(false);\n    };\n}\n/**\n * ```js\n * let arr = [\n *  { name: 'starship', isRocket: true },\n *  { name: 'iphone', isRocket: false }\n * ]\n * arr = arr.sort(makeLast(el => el.isRocket))\n * isEqual(arr, [\n *  { name: 'iphone', isRocket: false },\n *  { name: 'starship', isRocket: true }\n * ])\n * ```\n */\nfunction makeLast(getValue) {\n    return makeFirst((element) => {\n        const val = getValue(element);\n        if (val === null) {\n            return null;\n        }\n        else {\n            return !val;\n        }\n    });\n}\n/** Reverse order result. */\nfunction reverse(sortKey) {\n    return (-1 * sortKey);\n}\n","export { compareString };\nfunction compareString(str1, str2) {\n    if (str1.toLowerCase() < str2.toLowerCase())\n        return -1;\n    if (str1.toLowerCase() > str2.toLowerCase())\n        return 1;\n    return 0;\n}\n","export function isNullish(val) {\n    return val === null || val === undefined;\n}\n// someArray.filter(isNotNullish)\nexport function isNotNullish(p) {\n    return !isNullish(p);\n}\n// objectFilter(obj).filter(isNotNullish_keyVal)\nexport function isNotNullish_keyVal(arg) {\n    return !isNullish(arg[1]);\n}\n","export function isPropertyGetter(obj, prop) {\n    const descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n    return !!descriptor && !('value' in descriptor) && !!descriptor.get;\n}\n","// Same as Object.defineProperty() but with type inference\nexport function objectDefineProperty(obj, prop, { get, ...args }) {\n    Object.defineProperty(obj, prop, { ...args, get });\n}\n","export { isScriptFile };\nexport { isPlainScriptFile };\nexport { isTemplateFile };\nexport { scriptFileExtensionList };\nexport { scriptFileExtensionPattern };\n// We can't use a RegExp:\n//  - Needs to work with Micromatch: https://github.com/micromatch/micromatch because:\n//    - Vite's `import.meta.glob()` uses Micromatch\n//  - We need this to be a allowlist because:\n//   - A pattern `*([a-zA-Z0-9]` doesn't work.\n//     - Because of ReScript: `.res` are ReScript source files which need to be ignored. (The ReScript compiler generates `.js` files alongside `.res` files.)\n//   - Block listing doesn't work.\n//     - We cannot implement a blocklist with a glob pattern.\n//     - A post `import.meta.glob()` blocklist filtering doesn't work because Vite would still process the files (e.g. including them in the bundle).\n// prettier-ignore\n// biome-ignore format:\nconst extJs = [\n    'js',\n    'cjs',\n    'mjs',\n];\n// prettier-ignore\n// biome-ignore format:\nconst extTs = [\n    'ts',\n    'cts',\n    'mts',\n];\nconst extJsOrTs = [...extJs, ...extTs];\n// prettier-ignore\n// biome-ignore format:\nconst extJsx = [\n    'jsx',\n    'cjsx',\n    'mjsx',\n];\n// prettier-ignore\n// biome-ignore format:\nconst extTsx = [\n    'tsx',\n    'ctsx',\n    'mtsx'\n];\nconst extJsxOrTsx = [...extJsx, ...extTsx];\n// prettier-ignore\n// biome-ignore format:\nconst extTemplates = [\n    'vue',\n    'svelte',\n    'marko',\n    'md',\n    'mdx'\n];\nconst scriptFileExtensionList = [...extJsOrTs, ...extJsxOrTsx, ...extTemplates];\nconst scriptFileExtensionPattern = '(' + scriptFileExtensionList.join('|') + ')';\nfunction isScriptFile(filePath) {\n    return scriptFileExtensionList.some((ext) => filePath.endsWith('.' + ext));\n}\nfunction isPlainScriptFile(filePath) {\n    return extJsOrTs.some((ext) => filePath.endsWith('.' + ext));\n}\nfunction isTemplateFile(filePath) {\n    return extTemplates.some((ext) => filePath.endsWith('.' + ext));\n}\n","// TO-DO/next-major-release: remove this file\nexport { getPageFilesClientSide };\nexport { getPageFilesServerSide };\nimport { assert, assertUsage, isNotNullish } from '../utils.js';\nfunction getPageFilesClientSide(pageFilesAll, pageId) {\n    return determine(pageFilesAll, pageId, true);\n}\nfunction getPageFilesServerSide(pageFilesAll, pageId) {\n    return determine(pageFilesAll, pageId, false);\n}\nfunction determine(pageFilesAll, pageId, envIsClient) {\n    const env = envIsClient ? 'CLIENT_ONLY' : 'SERVER_ONLY';\n    const pageFilesRelevant = pageFilesAll\n        .filter((p) => p.isRelevant(pageId) && p.fileType !== '.page.route')\n        .sort(getPageFilesSorter(envIsClient, pageId));\n    // Load the `.page.js` files specific to `pageId`\n    const getPageIdFile = (iso) => {\n        const files = pageFilesRelevant.filter((p) => p.pageId === pageId && p.isEnv(iso ? 'CLIENT_AND_SERVER' : env));\n        assertUsage(files.length <= 1, `Merge the following files into a single file: ${files.map((p) => p.filePath).join(' ')}`);\n        const pageIdFile = files[0];\n        assert(pageIdFile === undefined || !pageIdFile.isDefaultPageFile);\n        return pageIdFile;\n    };\n    const pageIdFileEnv = getPageIdFile(false);\n    const pageIdFileIso = getPageIdFile(true);\n    // A page can have only one renderer. In other words: Multiple `renderer/` overwrite each other.\n    // Load only load renderer (`/renderer/_default.*`)\n    const getRendererFile = (iso) => pageFilesRelevant.filter((p) => p.isRendererPageFile && p.isEnv(iso ? 'CLIENT_AND_SERVER' : env))[0];\n    const rendererFileEnv = getRendererFile(false);\n    const rendererFileIso = getRendererFile(true);\n    // A page can load multiple `_default.page.*` files of the same `fileType`. In other words: non-renderer `_default.page.*` files are cumulative.\n    // The exception being HTML-only pages because we pick a single page file as client entry. We handle that use case at `renderPageServer()`.\n    const defaultFilesNonRenderer = pageFilesRelevant.filter((p) => p.isDefaultPageFile && !p.isRendererPageFile && (p.isEnv(env) || p.isEnv('CLIENT_AND_SERVER')));\n    // Ordered by `pageContext.exports` precedence\n    const pageFiles = [pageIdFileEnv, pageIdFileIso, ...defaultFilesNonRenderer, rendererFileEnv, rendererFileIso].filter(isNotNullish);\n    return pageFiles;\n}\nfunction getPageFilesSorter(envIsClient, pageId) {\n    const env = envIsClient ? 'CLIENT_ONLY' : 'SERVER_ONLY';\n    const e1First = -1;\n    const e2First = +1;\n    const noOrder = 0;\n    return (e1, e2) => {\n        // `.page.js` files specific to `pageId` first\n        if (!e1.isDefaultPageFile && e2.isDefaultPageFile) {\n            return e1First;\n        }\n        if (!e2.isDefaultPageFile && e1.isDefaultPageFile) {\n            return e2First;\n        }\n        // Non-renderer `_default.page.*` before `renderer/**/_default.page.*`\n        {\n            const e1_isRenderer = e1.isRendererPageFile;\n            const e2_isRenderer = e2.isRendererPageFile;\n            if (!e1_isRenderer && e2_isRenderer) {\n                return e1First;\n            }\n            if (!e2_isRenderer && e1_isRenderer) {\n                return e2First;\n            }\n            assert(e1_isRenderer === e2_isRenderer);\n        }\n        // Filesystem nearest first\n        {\n            const e1_distance = getPathDistance(pageId, e1.filePath);\n            const e2_distance = getPathDistance(pageId, e2.filePath);\n            if (e1_distance < e2_distance) {\n                return e1First;\n            }\n            if (e2_distance < e1_distance) {\n                return e2First;\n            }\n            assert(e1_distance === e2_distance);\n        }\n        // `.page.server.js`/`.page.client.js` before `.page.js`\n        {\n            if (e1.isEnv(env) && e2.isEnv('CLIENT_AND_SERVER')) {\n                return e1First;\n            }\n            if (e2.isEnv(env) && e1.isEnv('CLIENT_AND_SERVER')) {\n                return e2First;\n            }\n        }\n        return noOrder;\n    };\n}\nfunction getPathDistance(pathA, pathB) {\n    // Index of first different character\n    let idx = 0;\n    for (; idx < pathA.length && idx < pathB.length; idx++) {\n        if (pathA[idx] !== pathB[idx])\n            break;\n    }\n    const pathAWithoutCommon = pathA.slice(idx);\n    const pathBWithoutCommon = pathB.slice(idx);\n    const distanceA = pathAWithoutCommon.split('/').length;\n    const distanceB = pathBWithoutCommon.split('/').length;\n    const distance = distanceA + distanceB;\n    return distance;\n}\n","// TO-DO/next-major-release: remove this\nexport { assertDefaultExports };\nexport { assertExportValues };\nexport { forbiddenDefaultExports };\nimport { assert, assertUsage } from '../utils.js';\nconst enforceTrue = ['clientRouting'];\nfunction assertExportValues(pageFile) {\n    enforceTrue.forEach((exportName) => {\n        assert(pageFile.fileExports);\n        if (!(exportName in pageFile.fileExports))\n            return;\n        const explainer = `The value of \\`${exportName}\\` is only allowed to be \\`true\\`.`;\n        assertUsage(pageFile.fileExports[exportName] !== false, `${pageFile.filePath} has \\`export { ${exportName} }\\` with the value \\`false\\` which is prohibited: remove \\`export { ${exportName} }\\` instead. (${explainer})`);\n        assertUsage(pageFile.fileExports[exportName] === true, `${pageFile.filePath} has \\`export { ${exportName} }\\` with a forbidden value. ${explainer}`);\n    });\n}\n// Forbid exports such as `export default { render }`, because only `export { render }` can be statically analyzed by `es-module-lexer`.\nconst forbiddenDefaultExports = ['render', 'clientRouting', 'prerender', 'doNotPrerender'];\nfunction assertDefaultExports(defaultExportName, filePath) {\n    assertUsage(!forbiddenDefaultExports.includes(defaultExportName), `${filePath} has \\`export default { ${defaultExportName} }\\` which is prohibited, use \\`export { ${defaultExportName} }\\` instead.`);\n}\n","export { getExportPath };\nimport { assert } from '../utils.js';\nfunction getExportPath(fileExportPathToShowToUser, configName) {\n    if (!fileExportPathToShowToUser)\n        return null;\n    let [exportName, ...exportObjectPath] = fileExportPathToShowToUser;\n    if (!exportName)\n        return null;\n    if (exportObjectPath.length === 0 && ['*', 'default', configName].includes(exportName))\n        return null;\n    assert(exportName !== '*');\n    let prefix = '';\n    let suffix = '';\n    if (exportName === 'default') {\n        prefix = 'export default';\n    }\n    else {\n        prefix = 'export';\n        exportObjectPath = [exportName, ...exportObjectPath];\n    }\n    exportObjectPath.forEach((prop) => {\n        prefix = `${prefix} { ${prop}`;\n        suffix = ` }${suffix}`;\n    });\n    const exportPath = prefix + suffix;\n    return exportPath;\n}\n","export { getConfigDefinedAt };\nexport { getConfigDefinedAtOptional };\nexport { getDefinedAtString };\nexport { getDefinedByString };\nimport { assert, checkType, isArray } from '../utils.js';\nimport pc from '@brillout/picocolors';\nimport { getExportPath } from './getExportPath.js';\nfunction getConfigDefinedAt(sentenceBegin, configName, definedAtData) {\n    return `${begin(sentenceBegin, configName)} at ${getDefinedAtString(definedAtData, configName)}`;\n}\nfunction getConfigDefinedAtOptional(sentenceBegin, configName, definedAtData) {\n    if (!definedAtData) {\n        return `${begin(sentenceBegin, configName)} internally`;\n    }\n    else {\n        return `${begin(sentenceBegin, configName)} at ${getDefinedAtString(definedAtData, configName)}`;\n    }\n}\nfunction begin(sentenceBegin, configName) {\n    return `${sentenceBegin} ${pc.cyan(configName)} defined`;\n}\nfunction getDefinedAtString(definedAtData, configName) {\n    let files;\n    if (isArray(definedAtData)) {\n        files = definedAtData;\n    }\n    else {\n        files = [definedAtData];\n    }\n    assert(files.length >= 1);\n    const definedAtString = files\n        .map((definedAt) => {\n        if (definedAt.definedBy)\n            return getDefinedByString(definedAt, configName);\n        const { filePathToShowToUser, fileExportPathToShowToUser } = definedAt;\n        const exportPath = getExportPath(fileExportPathToShowToUser, configName);\n        if (exportPath) {\n            return `${filePathToShowToUser} > ${pc.cyan(exportPath)}`;\n        }\n        else {\n            return filePathToShowToUser;\n        }\n    })\n        .join(' / ');\n    return definedAtString;\n}\nfunction getDefinedByString(definedAt, configName) {\n    if (definedAt.definedBy === 'api') {\n        return `API call ${pc.cyan(`${definedAt.operation}({ vikeConfig: { ${configName} } })`)}`;\n    }\n    const { definedBy } = definedAt;\n    if (definedBy === 'cli') {\n        return `CLI option ${pc.cyan(`--${configName}`)}`;\n    }\n    if (definedBy === 'env') {\n        return `environment variable ${pc.cyan(`VIKE_CONFIG=\"{${configName}}\"`)}`;\n    }\n    checkType(definedBy);\n    assert(false);\n}\n","export { getPageConfig };\nexport { getConfigValueFilePathToShowToUser };\nexport { getHookFilePathToShowToUser };\nimport { assert, isArray } from '../utils.js';\nfunction getPageConfig(pageId, pageConfigs) {\n    const pageConfig = pageConfigs.find((p) => p.pageId === pageId);\n    assert(pageConfigs.length > 0);\n    assert(pageConfig);\n    return pageConfig;\n}\nfunction getConfigValueFilePathToShowToUser(definedAtData) {\n    // A unique file path only exists if the config value isn't cumulative nor computed:\n    //  - cumulative config values have multiple file paths\n    //  - computed values don't have any file path\n    if (!definedAtData || isArray(definedAtData) || definedAtData.definedBy)\n        return null;\n    const { filePathToShowToUser } = definedAtData;\n    assert(filePathToShowToUser);\n    return filePathToShowToUser;\n}\nfunction getHookFilePathToShowToUser(definedAtData) {\n    const filePathToShowToUser = getConfigValueFilePathToShowToUser(definedAtData);\n    assert(filePathToShowToUser);\n    return filePathToShowToUser;\n}\n","// TO-DO/soon/same-api: use public API internally?\n// TO-DO/soon/flat-pageContext: rename definedAt => definedBy\nexport { resolveGlobalConfigPublic };\nexport { resolvePageContextConfig };\nexport { resolveGlobalContextConfig };\nimport { assertDefaultExports, forbiddenDefaultExports } from '../getPageFiles/assert_exports_old_design.js';\nimport { getConfigDefinedAtOptional, getDefinedAtString } from './getConfigDefinedAt.js';\nimport { getConfigValueFilePathToShowToUser } from './helpers.js';\nimport { assert, isObject, assertWarning, assertUsage, makeLast, isBrowser, isScriptFile, isTemplateFile, objectDefineProperty, } from '../utils.js';\nimport pc from '@brillout/picocolors';\nfunction resolveGlobalConfigPublicPage(pageConfigGlobalValues, pageConfig, pageConfigValues) {\n    const pageConfigPublic_ = resolvePageConfigPublic({ pageConfigGlobalValues, pageConfigValues });\n    const pageConfigPublic = getPublicCopy(pageConfigPublic_);\n    const page = (() => {\n        if (!pageConfig.isErrorPage) {\n            const route = pageConfigPublic.config.route ?? pageConfig.routeFilesystem.routeString;\n            return {\n                ...pageConfigPublic,\n                route,\n            };\n        }\n        else {\n            return {\n                ...pageConfigPublic,\n                isErrorPage: true,\n            };\n        }\n    })();\n    return [pageConfig.pageId, page];\n}\nfunction getPublicCopy(configInternal) {\n    const configPublic = {\n        config: configInternal.config,\n        // TO-DO/soon/flat-pageContext: expose publicly?\n        _source: configInternal.source,\n        _sources: configInternal.sources,\n        _from: configInternal.from,\n    };\n    return configPublic;\n}\nfunction resolvePageConfigPublic({ pageConfigGlobalValues, pageConfigValues, }) {\n    const configValues = { ...pageConfigGlobalValues, ...pageConfigValues };\n    return resolveConfigPublic_V1Design({ configValues });\n}\nfunction resolvePageContextConfig(pageFiles, // V0.4 design\npageConfig, // V1 design\npageConfigGlobal) {\n    const config = {};\n    const configEntries = {}; // TO-DO/next-major-release: remove\n    const exportsAll = {}; // TO-DO/next-major-release: remove\n    // V0.4 design\n    // TO-DO/next-major-release: remove\n    pageFiles.forEach((pageFile) => {\n        const exportValues = getExportValues(pageFile);\n        exportValues.forEach(({ exportName, exportValue, isFromDefaultExport }) => {\n            assert(exportName !== 'default');\n            exportsAll[exportName] = exportsAll[exportName] ?? [];\n            exportsAll[exportName].push({\n                exportValue,\n                exportSource: `${pageFile.filePath} > ${isFromDefaultExport ? `\\`export default { ${exportName} }\\`` : `\\`export { ${exportName} }\\``}`,\n                filePath: pageFile.filePath,\n                _filePath: pageFile.filePath, // TO-DO/next-major-release: remove\n                _fileType: pageFile.fileType,\n                _isFromDefaultExport: isFromDefaultExport,\n            });\n        });\n    });\n    let source;\n    let sources;\n    let from;\n    if (pageConfig) {\n        const res = resolvePageConfigPublic({\n            pageConfigGlobalValues: pageConfigGlobal.configValues,\n            pageConfigValues: pageConfig.configValues,\n        });\n        source = res.source;\n        sources = res.sources;\n        from = res.from;\n        Object.assign(config, res.config);\n        Object.assign(configEntries, res.configEntries);\n        Object.assign(exportsAll, res.exportsAll);\n    }\n    else {\n        source = {};\n        sources = {};\n        from = {\n            configsStandard: {},\n            configsCumulative: {},\n            configsComputed: {},\n        };\n    }\n    const pageExports = {};\n    const exports = {};\n    Object.entries(exportsAll).forEach(([exportName, values]) => {\n        values.forEach(({ exportValue, _fileType, _isFromDefaultExport }) => {\n            exports[exportName] = exports[exportName] ?? exportValue;\n            // Legacy pageContext.pageExports\n            if (_fileType === '.page' && !_isFromDefaultExport) {\n                if (!(exportName in pageExports)) {\n                    pageExports[exportName] = exportValue;\n                }\n            }\n        });\n    });\n    assert(!('default' in exports));\n    assert(!('default' in exportsAll));\n    const pageContextAddendum = {\n        config: config,\n        from,\n        source,\n        sources,\n        // TO-DO/soon/flat-pageContext: deprecate every prop below\n        configEntries,\n        exports,\n        exportsAll,\n    };\n    // TO-DO/next-major-release: remove\n    objectDefineProperty(pageContextAddendum, 'pageExports', {\n        get: () => {\n            // We only show the warning in Node.js because when using Client Routing Vue integration uses `Object.assign(pageContextReactive, pageContext)` which will wrongully trigger the warning. There is no cross-browser way to catch whether the property accessor was initiated by an `Object.assign()` call.\n            if (!isBrowser()) {\n                assertWarning(false, 'pageContext.pageExports is outdated, use pageContext.exports instead', {\n                    onlyOnce: true,\n                    showStackTrace: true,\n                });\n            }\n            return pageExports;\n        },\n        enumerable: false,\n        configurable: true,\n    });\n    return pageContextAddendum;\n}\nfunction resolveGlobalContextConfig(pageConfigs, pageConfigGlobal) {\n    const globalContextAddendum = resolveGlobalConfigPublic(pageConfigs, pageConfigGlobal, (c) => c.configValues);\n    return globalContextAddendum;\n}\nfunction resolveGlobalConfigPublic(pageConfigs, pageConfigGlobal, getConfigValues) {\n    // global\n    const pageConfigGlobalValues = getConfigValues(pageConfigGlobal, true);\n    const globalConfigPublicBase_ = resolveConfigPublic_V1Design({ configValues: pageConfigGlobalValues });\n    const globalConfigPublicBase = getPublicCopy(globalConfigPublicBase_);\n    // pages\n    const pages = Object.fromEntries(pageConfigs.map((pageConfig) => {\n        const pageConfigValues = getConfigValues(pageConfig);\n        return resolveGlobalConfigPublicPage(pageConfigGlobalValues, pageConfig, pageConfigValues);\n    }));\n    const globalConfigPublic = {\n        ...globalConfigPublicBase,\n        pages,\n    };\n    return {\n        ...globalConfigPublic,\n        _globalConfigPublic: globalConfigPublic,\n    };\n}\n// V1 design\nfunction resolveConfigPublic_V1Design(pageConfig) {\n    const config = {};\n    const configEntries = {};\n    const exportsAll = {};\n    const source = {};\n    const sources = {};\n    const from = {\n        configsStandard: {},\n        configsCumulative: {},\n        configsComputed: {},\n    };\n    const addSrc = (src, configName) => {\n        source[configName] = src;\n        sources[configName] ?? (sources[configName] = []);\n        sources[configName].push(src);\n    };\n    const addLegacy = (configName, value, definedAtData) => {\n        const configValueFilePathToShowToUser = getConfigValueFilePathToShowToUser(definedAtData);\n        const configDefinedAt = getConfigDefinedAtOptional('Config', configName, definedAtData);\n        configEntries[configName] = configEntries[configName] ?? [];\n        configEntries[configName].push({\n            configValue: value,\n            configDefinedAt,\n            configDefinedByFile: configValueFilePathToShowToUser,\n        });\n        // TO-DO/next-major-release: remove\n        const exportName = configName;\n        exportsAll[exportName] = exportsAll[exportName] ?? [];\n        exportsAll[exportName].push({\n            exportValue: value,\n            exportSource: configDefinedAt,\n            filePath: configValueFilePathToShowToUser,\n            _filePath: configValueFilePathToShowToUser,\n            _fileType: null,\n            _isFromDefaultExport: null,\n        });\n    };\n    Object.entries(pageConfig.configValues).forEach(([configName, configValue]) => {\n        const { value } = configValue;\n        config[configName] = config[configName] ?? value;\n        if (configValue.type === 'standard') {\n            const src = {\n                type: 'configsStandard',\n                value: configValue.value,\n                definedAt: getDefinedAtString(configValue.definedAtData, configName),\n            };\n            addSrc(src, configName);\n            from.configsStandard[configName] = src;\n            addLegacy(configName, value, configValue.definedAtData);\n        }\n        if (configValue.type === 'cumulative') {\n            const src = {\n                type: 'configsCumulative',\n                definedAt: getDefinedAtString(configValue.definedAtData, configName),\n                values: configValue.value.map((value, i) => {\n                    const definedAtFile = configValue.definedAtData[i];\n                    assert(definedAtFile);\n                    const definedAt = getDefinedAtString(definedAtFile, configName);\n                    addLegacy(configName, value, definedAtFile);\n                    return {\n                        value,\n                        definedAt,\n                    };\n                }),\n            };\n            addSrc(src, configName);\n            from.configsCumulative[configName] = src;\n        }\n        if (configValue.type === 'computed') {\n            const src = {\n                type: 'configsComputed',\n                definedAt: 'Vike', // Vike currently doesn't support user-land computed configs => computed configs are always defined by Vike => there isn't any file path to show.\n                value: configValue.value,\n            };\n            addSrc(src, configName);\n            from.configsComputed[configName] = src;\n            addLegacy(configName, value, configValue.definedAtData);\n        }\n    });\n    return {\n        config: config,\n        configEntries,\n        exportsAll,\n        source,\n        sources,\n        from,\n    };\n}\n// V0.4 design\n// TO-DO/next-major-release: remove\nfunction getExportValues(pageFile) {\n    const { filePath, fileExports } = pageFile;\n    assert(fileExports); // assume pageFile.loadFile() was called\n    assert(isScriptFile(filePath));\n    const exportValues = [];\n    Object.entries(fileExports)\n        .sort(makeLast(([exportName]) => exportName === 'default')) // `export { bla }` should override `export default { bla }`\n        .forEach(([exportName, exportValue]) => {\n        let isFromDefaultExport = exportName === 'default';\n        if (isFromDefaultExport) {\n            if (isTemplateFile(filePath)) {\n                exportName = 'Page';\n            }\n            else {\n                assertUsage(isObject(exportValue), `The ${pc.cyan('export default')} of ${filePath} should be an object.`);\n                Object.entries(exportValue).forEach(([defaultExportName, defaultExportValue]) => {\n                    assertDefaultExports(defaultExportName, filePath);\n                    exportValues.push({\n                        exportName: defaultExportName,\n                        exportValue: defaultExportValue,\n                        isFromDefaultExport,\n                    });\n                });\n                return;\n            }\n        }\n        exportValues.push({\n            exportName,\n            exportValue,\n            isFromDefaultExport,\n        });\n    });\n    exportValues.forEach(({ exportName, isFromDefaultExport }) => {\n        assert(!(isFromDefaultExport && forbiddenDefaultExports.includes(exportName)));\n    });\n    return exportValues;\n}\n","export { findPageConfig };\nimport { assert } from '../utils.js';\nfunction findPageConfig(pageConfigs, pageId) {\n    const result = pageConfigs.filter((p) => p.pageId === pageId);\n    assert(result.length <= 1);\n    const pageConfig = result[0] ?? null;\n    return pageConfig;\n}\n","export { assertPlusFileExport };\nimport { assert, assertUsage, assertWarning } from '../utils.js';\nimport pc from '@brillout/picocolors';\nconst SIDE_EXPORTS_TOLERATE = [\n    // vite-plugin-solid adds `export { $$registrations }`\n    '$$registrations',\n    // @vitejs/plugin-vue adds `export { _rerender_only }`\n    '_rerender_only',\n];\n// Tolerate `export { frontmatter }` in .mdx files\nconst SIDE_EXPORTS_DO_NOT_CHECK = ['.md', '.mdx'];\nfunction assertPlusFileExport(fileExports, filePathToShowToUser, configName) {\n    const exportNames = Object.keys(fileExports);\n    const isValid = (exportName) => exportName === 'default' || exportName === configName;\n    // Error upon missing/ambiguous export\n    const exportNamesValid = exportNames.filter(isValid);\n    const exportDefault = pc.code('export default');\n    const exportNamed = pc.code(`export { ${configName} }`);\n    if (exportNamesValid.length === 0) {\n        assertUsage(false, `${filePathToShowToUser} should define ${exportNamed} or ${exportDefault}`);\n    }\n    if (exportNamesValid.length === 2) {\n        assertUsage(false, `${filePathToShowToUser} is ambiguous: remove ${exportDefault} or ${exportNamed}`);\n    }\n    assert(exportNamesValid.length === 1);\n    // Warn upon side exports\n    const exportNamesInvalid = exportNames\n        .filter((e) => !isValid(e))\n        .filter((exportName) => !SIDE_EXPORTS_TOLERATE.includes(exportName));\n    if (!SIDE_EXPORTS_DO_NOT_CHECK.some((ext) => filePathToShowToUser.endsWith(ext))) {\n        exportNamesInvalid.forEach((exportInvalid) => {\n            assertWarning(false, `${filePathToShowToUser} unexpected ${pc.cyan(`export { ${exportInvalid} }`)}, see https://vike.dev/no-side-exports`, {\n                onlyOnce: true,\n            });\n        });\n    }\n}\n","export { parsePageConfigsSerialized };\nexport { parseConfigValuesSerialized };\nimport { assert, assertUsage, isCallable } from '../../utils.js';\nimport { getConfigDefinedAt } from '../getConfigDefinedAt.js';\nimport { parseTransform } from '@brillout/json-serializer/parse';\nimport { assertPlusFileExport } from '../assertPlusFileExport.js';\nfunction parsePageConfigsSerialized(pageConfigsSerialized, pageConfigGlobalSerialized) {\n    // pageConfigs\n    const pageConfigs = pageConfigsSerialized.map((pageConfigSerialized) => {\n        const configValues = parseConfigValuesSerialized(pageConfigSerialized.configValuesSerialized);\n        assertRouteConfigValue(configValues);\n        const pageConfig = { ...pageConfigSerialized, configValues };\n        return pageConfig;\n    });\n    // pageConfigsGlobal\n    const pageConfigGlobal = { configValues: {} };\n    {\n        const configValues = parseConfigValuesSerialized(pageConfigGlobalSerialized.configValuesSerialized);\n        Object.assign(pageConfigGlobal.configValues, configValues);\n    }\n    return { pageConfigs, pageConfigGlobal };\n}\nfunction assertRouteConfigValue(configValues) {\n    const configName = 'route';\n    const configValue = configValues[configName];\n    if (!configValue)\n        return;\n    const { value, definedAtData } = configValue;\n    const configValueType = typeof value;\n    assert(definedAtData);\n    const configDefinedAt = getConfigDefinedAt('Config', configName, definedAtData);\n    assertUsage(configValueType === 'string' || isCallable(value), `${configDefinedAt} has an invalid type '${configValueType}': it should be a string or a function instead, see https://vike.dev/route`);\n    /* We don't use assertRouteString() in order to avoid unnecessarily bloating the client-side bundle when using Server Routing:\n    * - When using Server Routing, this file is loaded => loading assertRouteString() would bloat the client bundle.\n    * - assertRouteString() is already called on the server-side\n    * - When using Server Routing, client-side validation is superfluous as Route Strings only need to be validated on the server-side\n   if (typeof configValue === 'string') {\n     assertRouteString(configValue, `${configElement.configDefinedAt} defines an`)\n   }\n   */\n}\nfunction parseConfigValuesSerialized(configValuesSerialized) {\n    const configValues = {};\n    Object.entries(configValuesSerialized).forEach(([configName, configValueSeriliazed]) => {\n        let configValue;\n        if (configValueSeriliazed.type === 'cumulative') {\n            const { valueSerialized, ...common } = configValueSeriliazed;\n            const value = valueSerialized.map((valueSerializedElement, i) => {\n                const { value, sideExports } = parseValueSerialized(valueSerializedElement, configName, () => {\n                    const definedAtFile = configValueSeriliazed.definedAtData[i];\n                    assert(definedAtFile);\n                    return definedAtFile;\n                });\n                addSideExports(sideExports);\n                return value;\n            });\n            configValue = { value, ...common };\n        }\n        else {\n            const { valueSerialized, ...common } = configValueSeriliazed;\n            const { value, sideExports } = parseValueSerialized(valueSerialized, configName, () => {\n                assert(configValueSeriliazed.type !== 'computed');\n                const { definedAtData } = configValueSeriliazed;\n                const definedAtFile = Array.isArray(definedAtData) ? definedAtData[0] : definedAtData;\n                return definedAtFile;\n            });\n            addSideExports(sideExports);\n            configValue = { value, ...common };\n        }\n        configValues[configName] = configValue;\n    });\n    return configValues;\n    function addSideExports(sideExports) {\n        sideExports.forEach((sideExport) => {\n            const { configName, configValue } = sideExport;\n            if (!configValues[configName]) {\n                configValues[configName] = configValue;\n            }\n            else {\n                // Side-exports have lower precedence.\n                // We can't avoid side-export conflicts upstream. (We cannot know about side-exports at build-time.)\n            }\n        });\n    }\n}\nfunction parseValueSerialized(valueSerialized, configName, getDefinedAtFile) {\n    if (valueSerialized.type === 'js-serialized') {\n        let { value } = valueSerialized;\n        value = parseTransform(value);\n        return { value, sideExports: [] };\n    }\n    if (valueSerialized.type === 'pointer-import') {\n        const { value } = valueSerialized;\n        return { value, sideExports: [] };\n    }\n    if (valueSerialized.type === 'plus-file') {\n        const definedAtFile = getDefinedAtFile();\n        const { exportValues } = valueSerialized;\n        assert(!definedAtFile.definedBy);\n        assertPlusFileExport(exportValues, definedAtFile.filePathToShowToUser, configName);\n        let value;\n        let valueWasFound = false;\n        const sideExports = [];\n        Object.entries(exportValues).forEach(([exportName, exportValue]) => {\n            const isSideExport = exportName !== 'default' && exportName !== configName;\n            if (!isSideExport) {\n                value = exportValue;\n                // Already asserted by assertPlusFileExport() call above.\n                assert(!valueWasFound);\n                valueWasFound = true;\n            }\n            else {\n                sideExports.push({\n                    configName: exportName,\n                    configValue: {\n                        type: 'standard', // We don't support side exports for cumulative values. We could support it but it isn't trivial.\n                        value: exportValue,\n                        definedAtData: {\n                            filePathToShowToUser: definedAtFile.filePathToShowToUser,\n                            fileExportPathToShowToUser: [exportName],\n                        },\n                    },\n                });\n            }\n        });\n        // Already asserted by assertPlusFileExport() call above.\n        assert(valueWasFound);\n        return { value, sideExports };\n    }\n    assert(false);\n}\n/* [NULL_HANDLING] Do we really need this?\nfunction assertIsNotNull(configValue: unknown, configName: string, filePathToShowToUser: string) {\n  assert(!filePathToShowToUser.includes('+config.'))\n  // Re-use this for:\n  //  - upcoming config.requestPageContextOnNavigation\n  //  - for cumulative values in the future: we don't need this for now because, currently, cumulative values are never imported.\n  assertUsage(\n    configValue !== null,\n    `Set ${pc.cyan(configName)} to ${pc.cyan('null')} in a +config.js file instead of ${filePathToShowToUser}`\n  )\n}\n*/\n","export { assertVirtualFileExports };\nimport { assert } from './utils.js';\nfunction assertVirtualFileExports(moduleExports, test, moduleId) {\n    if (!moduleExports || !test(moduleExports)) {\n        /* https://github.com/vikejs/vike/issues/2903#issuecomment-3642285811\n        throw getProjectError('@cloudflare/vite-plugin error https://github.com/vikejs/vike/issues/2903#issuecomment-3642285811')\n        /*/\n        assert(false, { moduleExports, moduleExportsKeys: getKeys(moduleExports), moduleId });\n        //*/\n    }\n}\nfunction getKeys(obj) {\n    if (obj === undefined)\n        return null;\n    return [...Object.getOwnPropertyNames(obj), ...Object.getOwnPropertySymbols(obj), ...Object.keys(obj)];\n}\n","export { loadAndParseVirtualFilePageEntry };\nimport { objectAssign } from '../utils.js';\nimport { parseConfigValuesSerialized } from './serialize/parsePageConfigsSerialized.js';\nimport { assertVirtualFileExports } from '../assertVirtualFileExports.js';\nasync function loadAndParseVirtualFilePageEntry(pageConfig, isDev) {\n    if ('isPageEntryLoaded' in pageConfig &&\n        // We don't need to cache in dev, since Vite already caches the virtual module\n        !isDev) {\n        return pageConfig;\n    }\n    const { moduleId, moduleExportsPromise } = pageConfig.loadVirtualFilePageEntry();\n    const moduleExports = await moduleExportsPromise;\n    /* `moduleExports` is sometimes `undefined` https://github.com/vikejs/vike/discussions/2092\n    assert(moduleExports)\n    //*/\n    // Catch @cloudflare/vite-plugin bug\n    assertVirtualFileExports(moduleExports, () => 'configValuesSerialized' in moduleExports, moduleId);\n    const virtualFileExportsPageEntry = moduleExports;\n    const configValues = parseVirtualFileExportsPageEntry(virtualFileExportsPageEntry);\n    Object.assign(pageConfig.configValues, configValues);\n    objectAssign(pageConfig, { isPageEntryLoaded: true });\n    return pageConfig;\n}\nfunction parseVirtualFileExportsPageEntry(virtualFileExportsPageEntry) {\n    const configValues = parseConfigValuesSerialized(virtualFileExportsPageEntry.configValuesSerialized);\n    return configValues;\n}\n","export { loadPageConfigsLazyClientSide };\nexport { isErrorFetchingStaticAssets };\nimport { getPageFilesClientSide } from '../../shared-server-client/getPageFiles.js';\nimport { resolvePageContextConfig } from '../../shared-server-client/page-configs/resolveVikeConfigPublic.js';\nimport { findPageConfig } from '../../shared-server-client/page-configs/findPageConfig.js';\nimport { loadAndParseVirtualFilePageEntry } from '../../shared-server-client/page-configs/loadAndParseVirtualFilePageEntry.js';\nimport { objectAssign } from '../runtime-server-routing/utils.js';\nconst errStamp = '_isAssetsError';\nasync function loadPageConfigsLazyClientSide(pageId, pageFilesAll, pageConfigs, pageConfigGlobal) {\n    const pageFilesClientSide = getPageFilesClientSide(pageFilesAll, pageId);\n    const pageConfig = findPageConfig(pageConfigs, pageId);\n    let pageConfigLoaded;\n    try {\n        // prettier-ignore\n        // biome-ignore format:\n        const result = await Promise.all([\n            pageConfig && loadAndParseVirtualFilePageEntry(pageConfig, import.meta.env.DEV),\n            ...pageFilesClientSide.map((p) => p.loadFile?.()),\n        ]);\n        pageConfigLoaded = result[0];\n    }\n    catch (err) {\n        if (isFetchError(err)) {\n            Object.assign(err, { [errStamp]: true });\n        }\n        else {\n            // Syntax error in user file\n        }\n        throw err;\n    }\n    const pageContextAddendum = {};\n    objectAssign(pageContextAddendum, resolvePageContextConfig(pageFilesClientSide, pageConfigLoaded, pageConfigGlobal));\n    objectAssign(pageContextAddendum, { _pageFilesLoaded: pageFilesClientSide });\n    return pageContextAddendum;\n}\nfunction isErrorFetchingStaticAssets(err) {\n    if (!err) {\n        return false;\n    }\n    return err[errStamp] === true;\n}\n// https://stackoverflow.com/questions/75928310/how-to-detect-that-import-some-url-failed-because-some-url-isnt-a-javasc\nfunction isFetchError(err) {\n    if (!(err instanceof Error))\n        return false;\n    // https://github.com/stacks-network/clarity-js-sdk/blob/e757666b59af00b5db04dd1bf0df016e3a459ea2/packages/clarity/src/providers/registry.ts#L40-L45\n    // https://github.com/modernweb-dev/web/blob/0a59b56e4c1b50af81fbf4588f36a1ceb71f3976/integration/test-runner/tests/test-failure/runTestFailureTest.ts#L11-L18\n    const FAILED_TO_FETCH_MESSAGES = [\n        // chromium\n        'Failed to fetch dynamically imported module',\n        // firefox\n        'error loading dynamically imported module',\n        // safari\n        'Importing a module script failed',\n        // ??\n        'error resolving module specifier',\n        // ??\n        'failed to resolve module',\n    ];\n    return FAILED_TO_FETCH_MESSAGES.some((s) => err.message.toLowerCase().includes(s.toLowerCase()));\n}\n","export { normalizeClientSideUrl };\nimport { assert, parseUrl } from './utils.js';\n/** Resolves relative URLs */\nfunction normalizeClientSideUrl(url, options) {\n    // This function doesn't work for `url === '#some-hash'` because `searchOriginal` will be missing: if window.location.href has a search string then it's going to be missing in the returned `urlCurrent` value because `parseUrl(url)` returns `searchOriginal: null` since there isn't any search string in `url`.\n    // - Maybe `const { searchOriginal } = parseUrl(window.location.href)` can be a fix. (Let's check how `normalizeClientSideUrl()` is being used.)\n    assert(!url.startsWith('#'));\n    const { searchOriginal, hashOriginal, pathname } = parseUrl(url, '/');\n    let urlCurrent = `${pathname}${searchOriginal || ''}`;\n    if (!options?.withoutHash)\n        urlCurrent += hashOriginal || '';\n    assert(urlCurrent.startsWith('/'));\n    return urlCurrent;\n}\n","export { getCurrentUrl };\nimport { normalizeClientSideUrl } from './normalizeClientSideUrl.js';\nfunction getCurrentUrl(options) {\n    return normalizeClientSideUrl(window.location.href, options);\n}\n","export { createPageContextShared };\nexport { createPageContextObject };\nimport { changeEnumerable, objectAssign } from './utils.js';\nfunction createPageContextShared(pageContextCreated, globalConfigPublic) {\n    objectAssign(pageContextCreated, globalConfigPublic);\n    return pageContextCreated;\n}\nfunction createPageContextObject() {\n    const pageContext = {\n        _isOriginalObject: true,\n        isPageContext: true,\n    };\n    changeEnumerable(pageContext, '_isOriginalObject', false);\n    return pageContext;\n}\n","export { determinePageIdOld };\nimport { slice, assert } from './utils.js';\n// TO-DO/next-major-release: remove\nfunction determinePageIdOld(filePath) {\n    const pageSuffix = '.page.';\n    const pageId = slice(filePath.split(pageSuffix), 0, -1).join(pageSuffix);\n    assert(!pageId.includes('\\\\'));\n    return pageId;\n}\n","export { getErrorPageId };\nexport { isErrorPageId };\nexport { isErrorPage };\n// TO-DO/next-major-release: consider loading this file only for Client Routing\nimport { assert, assertUsage, unique } from './utils.js';\nfunction getErrorPageId(pageFilesAll, pageConfigs) {\n    if (pageConfigs.length > 0) {\n        const errorPageConfigs = pageConfigs.filter((p) => p.isErrorPage);\n        if (errorPageConfigs.length === 0)\n            return null;\n        assertUsage(errorPageConfigs.length === 1, 'Only one error page can be defined');\n        return errorPageConfigs[0].pageId;\n    }\n    // TO-DO/next-major-release: remove\n    const errorPageIds = unique(pageFilesAll.map(({ pageId }) => pageId).filter((pageId) => isErrorPageId(pageId, false)));\n    assertUsage(errorPageIds.length <= 1, `Only one _error.page.js is allowed, but found several: ${errorPageIds.join(' ')}`);\n    if (errorPageIds.length > 0) {\n        const errorPageId = errorPageIds[0];\n        assert(errorPageId);\n        return errorPageId;\n    }\n    return null;\n}\n// TO-DO/next-major-release: remove\nfunction isErrorPageId(pageId, _isV1Design) {\n    assert(!pageId.includes('\\\\'));\n    return pageId.includes('/_error');\n}\nfunction isErrorPage(pageId, pageConfigs) {\n    if (pageConfigs.length > 0) {\n        const pageConfig = pageConfigs.find((p) => p.pageId === pageId);\n        assert(pageConfig);\n        return !!pageConfig.isErrorPage;\n    }\n    else {\n        return isErrorPageId(pageId, false);\n    }\n}\n","// TO-DO/next-major-release: remove\nexport { fileTypes };\nexport { isValidFileType };\nexport { determineFileType };\nimport { assert } from '../utils.js';\nimport { isScriptFile } from '../../utils/isScriptFile.js';\nconst fileTypes = [\n    '.page',\n    '.page.server',\n    '.page.route',\n    '.page.client',\n    // New type `.page.css`/`.page.server.css`/`.page.client.css` for `extensions[number].pageFileDist`.\n    //  - Extensions using `pageFileDist` are expected to use a bundler that generates a `.css` colocated next to the original `.page.js` file (e.g. `/renderer/_default.page.server.css` for `/renderer/_default.page.server.js`.\n    //  - Since these `.page.css` files Bundlers We can therefore expect that there isn't any `.page.server.sass`/...\n    '.css',\n];\nfunction isValidFileType(filePath) {\n    return ['.js', '.mjs', '.cjs', '.css'].some((ext) => filePath.endsWith(ext));\n}\nfunction determineFileType(filePath) {\n    {\n        const isCSS = filePath.endsWith('.css');\n        if (isCSS) {\n            /* This assert() is skipped to reduce client-side bundle size\n            assert(isImportPathNpmPackage(filePath), filePath) // `.css` page files are only supported for npm packages\n            */\n            return '.css';\n        }\n    }\n    assert(isScriptFile(filePath), filePath);\n    const fileName = filePath.split('/').slice(-1)[0];\n    const parts = fileName.split('.');\n    const suffix1 = parts.slice(-3)[0];\n    const suffix2 = parts.slice(-2)[0];\n    if (suffix2 === 'page') {\n        return '.page';\n    }\n    assert(suffix1 === 'page', filePath);\n    if (suffix2 === 'server') {\n        return '.page.server';\n    }\n    if (suffix2 === 'client') {\n        return '.page.client';\n    }\n    if (suffix2 === 'route') {\n        return '.page.route';\n    }\n    assert(false, filePath);\n}\n","// TO-DO/next-major-release: remove\nexport { getPageFileObject };\nimport { determinePageIdOld } from '../determinePageIdOld.js';\nimport { isErrorPageId } from '../error-page.js';\nimport { assert, slice } from '../utils.js';\nimport { determineFileType } from './fileTypes.js';\nfunction getPageFileObject(filePath) {\n    const isRelevant = (pageId) => pageFile.pageId === pageId ||\n        (pageFile.isDefaultPageFile &&\n            (isRendererFilePath(pageFile.filePath) || isAncestorDefaultPage(pageId, pageFile.filePath)));\n    const fileType = determineFileType(filePath);\n    const isEnv = (env) => {\n        assert(fileType !== '.page.route'); // We can't determine `.page.route.js`\n        if (env === 'CLIENT_ONLY') {\n            return fileType === '.page.client' || fileType === '.css';\n        }\n        if (env === 'SERVER_ONLY') {\n            return fileType === '.page.server';\n        }\n        if (env === 'CLIENT_AND_SERVER') {\n            return fileType === '.page';\n        }\n        assert(false);\n    };\n    const pageFile = {\n        filePath,\n        fileType,\n        isEnv,\n        isRelevant,\n        isDefaultPageFile: isDefaultFilePath(filePath),\n        isRendererPageFile: fileType !== '.css' && isDefaultFilePath(filePath) && isRendererFilePath(filePath),\n        isErrorPageFile: isErrorPageId(filePath, false),\n        pageId: determinePageIdOld(filePath),\n    };\n    return pageFile;\n}\nfunction isDefaultFilePath(filePath) {\n    if (isErrorPageId(filePath, false)) {\n        return false;\n    }\n    return filePath.includes('/_default');\n}\nfunction isRendererFilePath(filePath) {\n    return filePath.includes('/renderer/');\n}\nfunction isAncestorDefaultPage(pageId, defaultPageFilePath) {\n    assert(!pageId.endsWith('/'));\n    assert(!defaultPageFilePath.endsWith('/'));\n    assert(isDefaultFilePath(defaultPageFilePath));\n    const defaultPageDir = slice(defaultPageFilePath.split('/'), 0, -1)\n        .filter((filePathSegment) => filePathSegment !== '_default')\n        .join('/');\n    return pageId.startsWith(defaultPageDir);\n}\n","export { parseVirtualFileExportsGlobalEntry };\n// TO-DO/next-major-release: remove old design code, and remove all assertions.\nimport { assert, hasProp, isCallable, isObject, cast, isArray } from '../utils.js';\nimport { assertExportValues } from './assert_exports_old_design.js';\nimport { getPageFileObject } from './getPageFileObject.js';\nimport { fileTypes } from './fileTypes.js';\nimport { parsePageConfigsSerialized } from '../page-configs/serialize/parsePageConfigsSerialized.js';\nimport { assertVirtualFileExports } from '../assertVirtualFileExports.js';\nfunction parseVirtualFileExportsGlobalEntry(virtualFileExportsGlobalEntry) {\n    assertVirtualFileExports(virtualFileExportsGlobalEntry, (moduleExports) => 'pageFilesLazy' in moduleExports);\n    assert(hasProp(virtualFileExportsGlobalEntry, 'pageFilesLazy', 'object'));\n    assert(hasProp(virtualFileExportsGlobalEntry, 'pageFilesEager', 'object'));\n    assert(hasProp(virtualFileExportsGlobalEntry, 'pageFilesExportNamesLazy', 'object'));\n    assert(hasProp(virtualFileExportsGlobalEntry, 'pageFilesExportNamesEager', 'object'));\n    assert(hasProp(virtualFileExportsGlobalEntry.pageFilesLazy, '.page'));\n    assert(hasProp(virtualFileExportsGlobalEntry.pageFilesLazy, '.page.client') ||\n        hasProp(virtualFileExportsGlobalEntry.pageFilesLazy, '.page.server'));\n    assert(hasProp(virtualFileExportsGlobalEntry, 'pageFilesList', 'string[]'));\n    assert(hasProp(virtualFileExportsGlobalEntry, 'pageConfigsSerialized'));\n    assert(hasProp(virtualFileExportsGlobalEntry, 'pageConfigGlobalSerialized'));\n    const { pageConfigsSerialized, pageConfigGlobalSerialized } = virtualFileExportsGlobalEntry;\n    assertPageConfigsSerialized(pageConfigsSerialized);\n    assertPageConfigGlobalSerialized(pageConfigGlobalSerialized);\n    const { pageConfigs, pageConfigGlobal } = parsePageConfigsSerialized(pageConfigsSerialized, pageConfigGlobalSerialized);\n    const pageFilesMap = {};\n    parseGlobResult(virtualFileExportsGlobalEntry.pageFilesLazy).forEach(({ filePath, pageFile, globValue }) => {\n        pageFile = pageFilesMap[filePath] = pageFilesMap[filePath] ?? pageFile;\n        const loadModule = globValue;\n        assertLoadModule(loadModule);\n        pageFile.loadFile = async () => {\n            if (!('fileExports' in pageFile)) {\n                pageFile.fileExports = await loadModule();\n                assertExportValues(pageFile);\n            }\n        };\n    });\n    parseGlobResult(virtualFileExportsGlobalEntry.pageFilesExportNamesLazy).forEach(({ filePath, pageFile, globValue }) => {\n        pageFile = pageFilesMap[filePath] = pageFilesMap[filePath] ?? pageFile;\n        const loadModule = globValue;\n        assertLoadModule(loadModule);\n        pageFile.loadExportNames = async () => {\n            if (!('exportNames' in pageFile)) {\n                const moduleExports = await loadModule();\n                assert(hasProp(moduleExports, 'exportNames', 'string[]'), pageFile.filePath);\n                pageFile.exportNames = moduleExports.exportNames;\n            }\n        };\n    });\n    // `pageFilesEager` contains `.page.route.js` files\n    parseGlobResult(virtualFileExportsGlobalEntry.pageFilesEager).forEach(({ filePath, pageFile, globValue }) => {\n        pageFile = pageFilesMap[filePath] = pageFilesMap[filePath] ?? pageFile;\n        const moduleExports = globValue;\n        assert(isObject(moduleExports));\n        pageFile.fileExports = moduleExports;\n    });\n    parseGlobResult(virtualFileExportsGlobalEntry.pageFilesExportNamesEager).forEach(({ filePath, pageFile, globValue }) => {\n        pageFile = pageFilesMap[filePath] = pageFilesMap[filePath] ?? pageFile;\n        const moduleExports = globValue;\n        assert(isObject(moduleExports));\n        assert(hasProp(moduleExports, 'exportNames', 'string[]'), pageFile.filePath);\n        pageFile.exportNames = moduleExports.exportNames;\n    });\n    virtualFileExportsGlobalEntry.pageFilesList.forEach((filePath) => {\n        pageFilesMap[filePath] = pageFilesMap[filePath] ?? getPageFileObject(filePath);\n    });\n    const pageFilesAll = Object.values(pageFilesMap);\n    pageFilesAll.forEach(({ filePath }) => {\n        assert(!filePath.includes('\\\\'));\n    });\n    return { pageFilesAll, pageConfigs, pageConfigGlobal };\n}\nfunction parseGlobResult(globObject) {\n    const ret = [];\n    Object.entries(globObject).forEach(([fileType, globFiles]) => {\n        cast(fileType);\n        assert(fileTypes.includes(fileType));\n        assert(isObject(globFiles));\n        Object.entries(globFiles).forEach(([filePath, globValue]) => {\n            const pageFile = getPageFileObject(filePath);\n            assert(pageFile.fileType === fileType);\n            ret.push({ filePath, pageFile, globValue });\n        });\n    });\n    return ret;\n}\nfunction assertLoadModule(globValue) {\n    assert(isCallable(globValue));\n}\nfunction assertPageConfigsSerialized(pageConfigsSerialized) {\n    assert(isArray(pageConfigsSerialized));\n    pageConfigsSerialized.forEach((pageConfigSerialized) => {\n        assert(isObject(pageConfigSerialized));\n        assert(hasProp(pageConfigSerialized, 'pageId', 'string'));\n        assert(hasProp(pageConfigSerialized, 'routeFilesystem'));\n        assert(hasProp(pageConfigSerialized, 'configValuesSerialized'));\n    });\n}\nfunction assertPageConfigGlobalSerialized(pageConfigGlobalSerialized) {\n    assert(hasProp(pageConfigGlobalSerialized, 'configValuesSerialized'));\n}\n","export { getHookFromPageContext };\nexport { getHookFromPageContextNew };\nexport { getHookFromPageConfig };\nexport { getHookFromPageConfigGlobal };\nexport { getHookFromPageConfigGlobalCumulative };\nexport { getHook_setIsPrerenderering };\n// TO-DO/next-major-release: remove\n// We export for old V0.4 design which doesn't support config.hooksTimeout\nexport { getHookTimeoutDefault };\nimport { getGlobalObject } from '../../utils/getGlobalObject.js';\nimport { getHookFilePathToShowToUser } from '../page-configs/helpers.js';\nimport { getConfigValueRuntime } from '../page-configs/getConfigValueRuntime.js';\nimport { assert, assertUsage, checkType, isArray, isCallable, isObject } from '../utils.js';\nimport pc from '@brillout/picocolors';\nconst globalObject = getGlobalObject('hooks/getHook.ts', {});\nfunction getHookFromPageContext(pageContext, hookName) {\n    if (!(hookName in pageContext.exports)) {\n        return null;\n    }\n    const { hooksTimeout } = pageContext.config;\n    const hookTimeout = getHookTimeout(hooksTimeout, hookName);\n    const hookFn = pageContext.exports[hookName];\n    if (hookFn === null)\n        return null;\n    // TO-DO/eventually: use pageContext.configEntries in favor of pageContext.exportsAll once V0.4 is removed\n    const file = pageContext.exportsAll[hookName][0];\n    assert(file.exportValue === hookFn);\n    const hookFilePath = file.filePath;\n    assert(hookFilePath);\n    return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n}\n// TO-DO/eventually: remove getHookFromPageContext() in favor of getHookFromPageContextNew()\nfunction getHookFromPageContextNew(hookName, pageContext) {\n    const { hooksTimeout } = pageContext.config;\n    const hookTimeout = getHookTimeout(hooksTimeout, hookName);\n    const hooks = [];\n    /* TO-DO/eventually: use pageContext.configEntries in favor of pageContext.exportsAll once V0.4 is removed\n    pageContext.configEntries[hookName]?.forEach((val) => {\n      const hookFn = val.configValue\n      if (hookFn === null) return\n      const hookFilePath = val.configDefinedByFile\n    */\n    pageContext.exportsAll[hookName]?.forEach((val) => {\n        const hookFn = val.exportValue;\n        if (hookFn === null)\n            return;\n        const hookFilePath = val.filePath;\n        assert(hookFilePath);\n        hooks.push(getHook(hookFn, hookName, hookFilePath, hookTimeout));\n    });\n    return hooks;\n}\nfunction getHookFromPageConfig(pageConfig, hookName) {\n    const configValue = getConfigValueRuntime(pageConfig, hookName);\n    if (!configValue?.value)\n        return null;\n    const { hookFn, hookFilePath } = getHookFromConfigValue(configValue);\n    const hooksTimeout = getConfigValueRuntime(pageConfig, 'hooksTimeout')?.value;\n    const hookTimeout = getHookTimeout(hooksTimeout, hookName);\n    return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n}\nfunction getHookFromPageConfigGlobal(pageConfigGlobal, hookName) {\n    const configValue = pageConfigGlobal.configValues[hookName];\n    if (!configValue?.value)\n        return null;\n    const { hookFn, hookFilePath } = getHookFromConfigValue(configValue);\n    const hookTimeout = getHookTimeoutGlobal(hookName);\n    return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n}\nfunction getHookFromPageConfigGlobalCumulative(pageConfigGlobal, hookName) {\n    const configValue = pageConfigGlobal.configValues[hookName];\n    if (!configValue?.value)\n        return [];\n    const val = configValue.value;\n    assert(isArray(val));\n    return val.map((v, i) => {\n        const hookFn = v;\n        const hookTimeout = getHookTimeoutGlobal(hookName);\n        assert(isArray(configValue.definedAtData));\n        const hookFilePath = getHookFilePathToShowToUser(configValue.definedAtData[i]);\n        return getHook(hookFn, hookName, hookFilePath, hookTimeout);\n    });\n}\nfunction getHookTimeoutGlobal(hookName) {\n    // TO-DO/perfection: we could use the global value of configooksTimeout but it requires some non-trivial refactoring\n    const hookTimeout = getHookTimeoutDefault(hookName);\n    return hookTimeout;\n}\nfunction getHook(hookFn, hookName, hookFilePath, hookTimeout) {\n    assert(hookFilePath);\n    assertHookFn(hookFn, { hookName, hookFilePath });\n    const hook = { hookFn, hookName, hookFilePath, hookTimeout };\n    return hook;\n}\nfunction getHookFromConfigValue(configValue) {\n    const hookFn = configValue.value;\n    assert(hookFn);\n    const hookFilePath = getHookFilePathToShowToUser(configValue.definedAtData);\n    return { hookFn, hookFilePath };\n}\nfunction assertHookFn(hookFn, { hookName, hookFilePath }) {\n    assert(hookName && hookFilePath);\n    assert(!hookName.endsWith(')'));\n    assert(!hookFilePath.endsWith(' '));\n    assertUsage(isCallable(hookFn), `Hook ${hookName}() defined by ${hookFilePath} should be a function`);\n    checkType(hookFn);\n}\nfunction getHookTimeout(hooksTimeoutProvidedByUser, hookName) {\n    const hooksTimeoutProvidedbyUserNormalized = getHooksTimeoutProvidedByUserNormalized(hooksTimeoutProvidedByUser);\n    if (hooksTimeoutProvidedbyUserNormalized === false)\n        return { error: false, warning: false };\n    const providedbyUser = hooksTimeoutProvidedbyUserNormalized[hookName];\n    const hookTimeout = getHookTimeoutDefault(hookName);\n    if (providedbyUser?.error !== undefined)\n        hookTimeout.error = providedbyUser.error;\n    if (providedbyUser?.warning !== undefined)\n        hookTimeout.warning = providedbyUser.warning;\n    return hookTimeout;\n}\n// Ideally this should be called only once and at build-time (to avoid bloating the client-side bundle), but we didn't implement any mechanism to valid config values at build-time yet\nfunction getHooksTimeoutProvidedByUserNormalized(hooksTimeoutProvidedByUser) {\n    if (hooksTimeoutProvidedByUser === undefined)\n        return {};\n    if (hooksTimeoutProvidedByUser === false)\n        return false;\n    assertUsage(isObject(hooksTimeoutProvidedByUser), `Setting ${pc.cyan('hooksTimeout')} should be ${pc.cyan('false')} or an object`);\n    const hooksTimeoutProvidedByUserNormalized = {};\n    Object.entries(hooksTimeoutProvidedByUser).forEach(([hookName, hookTimeoutProvidedbyUser]) => {\n        if (hookTimeoutProvidedbyUser === false) {\n            hooksTimeoutProvidedByUserNormalized[hookName] = { error: false, warning: false };\n            return;\n        }\n        assertUsage(isObject(hookTimeoutProvidedbyUser), `Setting ${pc.cyan(`hooksTimeout.${hookName}`)} should be ${pc.cyan('false')} or an object`);\n        const [error, warning] = ['error', 'warning'].map((timeoutName) => {\n            const timeoutVal = hookTimeoutProvidedbyUser[timeoutName];\n            if (timeoutVal === undefined || timeoutVal === false)\n                return timeoutVal;\n            const errPrefix = `Setting ${pc.cyan(`hooksTimeout.${hookName}.${timeoutName}`)} should be`;\n            assertUsage(typeof timeoutVal === 'number', `${errPrefix} ${pc.cyan('false')} or a number`);\n            assertUsage(timeoutVal > 0, `${errPrefix} a positive number`);\n            return timeoutVal;\n        });\n        hooksTimeoutProvidedByUserNormalized[hookName] = { error, warning };\n    });\n    return hooksTimeoutProvidedByUserNormalized;\n}\nfunction getHookTimeoutDefault(hookName) {\n    if (hookName === 'onBeforeRoute') {\n        return {\n            error: 5 * 1000,\n            warning: 1 * 1000,\n        };\n    }\n    if (globalObject.isPrerendering) {\n        return {\n            error: 2 * 60 * 1000,\n            warning: 30 * 1000,\n        };\n    }\n    else {\n        assert(!hookName.toLowerCase().includes('prerender'));\n    }\n    return {\n        error: 30 * 1000,\n        warning: 4 * 1000,\n    };\n}\nfunction getHook_setIsPrerenderering() {\n    globalObject.isPrerendering = true;\n}\n","export { addIs404ToPageProps };\nimport { assertWarning, isObject } from './utils.js';\nfunction addIs404ToPageProps(pageContext) {\n    addIs404(pageContext);\n}\nfunction addIs404(pageContext) {\n    if (pageContext.is404 === undefined || pageContext.is404 === null)\n        return;\n    const pageProps = pageContext.pageProps || {};\n    if (!isObject(pageProps)) {\n        assertWarning(false, 'pageContext.pageProps should be an object', { showStackTrace: true, onlyOnce: true });\n        return;\n    }\n    pageProps.is404 = pageProps.is404 || pageContext.is404;\n    pageContext.pageProps = pageProps;\n}\n","export const NOT_SERIALIZABLE = '__VIKE__NOT_SERIALIZABLE__';\n","export { getProxyForPublicUsage };\n// We use a proxy instead of property getters.\n// - The issue with property getters is that they can't be `writable: true` but we do want the user to be able to modify the value of internal properties.\n//   ```console\n//   TypeError: Invalid property descriptor. Cannot both specify accessors and a value or writable attribute, #<Object>\n//   ```\n// - Previous implementation using property getters: https://github.com/vikejs/vike/blob/4dbb354b0bcec04e862041fc9183fc4691bb8711/vike/utils/makePublicCopy.ts\n// Show warning when user is accessing internal `_` properties.\nimport { NOT_SERIALIZABLE } from './NOT_SERIALIZABLE.js';\nimport { assert, assertUsage, assertWarning, getPropAccessNotation, isBrowser } from './utils.js';\nfunction getProxyForPublicUsage(obj, objName, skipOnInternalProp, fallback) {\n    return new Proxy(obj, {\n        get: (_, prop) => getProp(prop, obj, objName, skipOnInternalProp, fallback),\n    });\n}\nfunction getProp(prop, ...args) {\n    const [obj, objName, skipOnInternalProp, fallback] = args;\n    const propStr = String(prop);\n    if (prop === '_isProxyObject')\n        return true;\n    if (prop === 'dangerouslyUseInternals') {\n        args[2] = true;\n        return getProxyForPublicUsage(...args);\n    }\n    if (!skipOnInternalProp) {\n        if (!globalThis.__VIKE__IS_CLIENT)\n            onInternalProp(propStr, objName);\n    }\n    if (prop === '_originalObject')\n        return obj;\n    if (fallback && !(prop in obj)) {\n        // Rudimentary flat pageContext implementation https://github.com/vikejs/vike/issues/1268\n        // Failed full-fledged implementation: https://github.com/vikejs/vike/pull/2458\n        return fallback(prop);\n    }\n    const val = obj[prop];\n    onNotSerializable(propStr, val, objName);\n    return val;\n}\nfunction onNotSerializable(propStr, val, objName) {\n    if (val !== NOT_SERIALIZABLE)\n        return;\n    const propName = getPropAccessNotation(propStr);\n    assert(isBrowser());\n    assertUsage(false, `Can't access ${objName}${propName} on the client side. Because it can't be serialized, see server logs.`);\n}\nfunction onInternalProp(propStr, objName) {\n    // We must skip it on the client-side because of the reactivity mechanism of UI frameworks like Solid.\n    assert(!isBrowser());\n    // TO-DO/soon/proxy: remove this and only warn on built-in access instead\n    if (propStr === '_configFromHook')\n        return;\n    if (propStr.startsWith('_')) {\n        assertWarning(false, `Using internal ${objName}.${propStr}  https://vike.dev/warning/internals`, {\n            onlyOnce: true,\n            showStackTrace: true,\n        });\n    }\n}\n","export { prepareGlobalContextForPublicUsage };\nimport { getProxyForPublicUsage } from './getProxyForPublicUsage.js';\nimport { assert } from './utils.js';\nfunction prepareGlobalContextForPublicUsage(globalContext) {\n    assert(globalContext._isOriginalObject); // ensure we preserve the original object reference\n    const globalContextPublic = getProxyForPublicUsage(globalContext, 'globalContext');\n    return globalContextPublic;\n}\n","export { preparePageContextForPublicUsage };\nexport { assertPropertyGetters };\nimport { assert, assertWarning, compareString, isPropertyGetter } from './utils.js';\nimport { addIs404ToPageProps } from './addIs404ToPageProps.js';\nimport { prepareGlobalContextForPublicUsage, } from './prepareGlobalContextForPublicUsage.js';\nimport { getProxyForPublicUsage } from './getProxyForPublicUsage.js';\nfunction preparePageContextForPublicUsage(pageContext) {\n    assert(!pageContext._isProxyObject);\n    assert(!pageContext.globalContext); // pageContext.globalContext should only be available to users  Vike itself should use pageContext._globalContext instead\n    assert(pageContext._isOriginalObject); // ensure we preserve the original object reference\n    addIs404ToPageProps(pageContext);\n    // TO-DO/next-major-release: remove\n    if (!('_pageId' in pageContext)) {\n        Object.defineProperty(pageContext, '_pageId', {\n            get() {\n                assertWarning(false, 'pageContext._pageId has been renamed to pageContext.pageId', {\n                    showStackTrace: true,\n                    onlyOnce: true,\n                });\n                return pageContext.pageId;\n            },\n            enumerable: false,\n        });\n    }\n    // For a more readable `console.log(pageContext)` output\n    sortPageContext(pageContext);\n    const globalContextPublic = prepareGlobalContextForPublicUsage(pageContext._globalContext);\n    const pageContextPublic = getProxyForPublicUsage(pageContext, 'pageContext', \n    // We must skip it in the client-side because of the reactivity mechanism of UI frameworks like Solid.\n    // - TO-DO/soon/proxy: double check whether that's true\n    true, (prop) => {\n        if (prop === 'globalContext') {\n            return globalContextPublic;\n        }\n        if (prop in globalContextPublic) {\n            return globalContextPublic[prop];\n        }\n    });\n    return pageContextPublic;\n}\n// Sort `pageContext` keys alphabetically, in order to make reading the `console.log(pageContext)` output easier\nfunction sortPageContext(pageContext) {\n    let descriptors = Object.getOwnPropertyDescriptors(pageContext);\n    for (const key of Object.keys(pageContext))\n        delete pageContext[key];\n    descriptors = Object.fromEntries(Object.entries(descriptors).sort(([key1], [key2]) => compareString(key1, key2)));\n    Object.defineProperties(pageContext, descriptors);\n}\nfunction assertPropertyGetters(pageContext) {\n    /*\n    If the isPropertyGetter() assertions fail then it's most likely because Object.assign() was used instead of `objectAssign()`:\n    ```js\n    const PageContextUrlComputed = getPageContextUrlComputed(pageContext)\n  \n    //  Breaks the property descriptors/getters of pageContext defined by getPageContextUrlComputed() such as pageContext.urlPathname\n    Object.assign(pageContext, pageContextUrlComputed)\n  \n    //  Also breaks property descriptors/getters\n    const pageContext = { ...pageContextUrlComputed }\n  \n    //  Preserves property descriptors/getters (see objectAssign() implementation)\n    objectAssign(pageContext, pageContextUrlComputed)\n    ```\n    */\n    ;\n    [\n        'urlPathname',\n        // TO-DO/next-major-release: remove\n        'urlParsed',\n        // TO-DO/next-major-release: remove\n        'url',\n        // TO-DO/next-major-release: remove\n        'pageExports',\n    ].forEach((prop) => {\n        if (pageContext.prop)\n            assert(isPropertyGetter(pageContext, prop));\n    });\n}\n","export { execHook };\nexport { execHookGlobal };\nexport { execHookDirect };\nexport { execHookDirectSingle };\nexport { execHookDirectSingleWithReturn };\nexport { execHookDirectWithoutPageContext };\nexport { execHookDirectSync };\nexport { getPageContext_sync };\nexport { providePageContext };\nexport { isUserHookError };\nimport { getProjectError, assertWarning, assertUsage } from '../../utils/assert.js';\nimport { getGlobalObject } from '../../utils/getGlobalObject.js';\nimport { humanizeTime } from '../../utils/humanizeTime.js';\nimport { isObject } from '../../utils/isObject.js';\nimport { getHookFromPageConfigGlobalCumulative, getHookFromPageContextNew } from './getHook.js';\nimport { preparePageContextForPublicUsage, } from '../preparePageContextForPublicUsage.js';\nconst globalObject = getGlobalObject('utils/execHook.ts', {\n    userHookErrors: new WeakMap(),\n    pageContext: null,\n});\nasync function execHook(hookName, pageContext, preparePageContextForPublicUsage) {\n    const hooks = getHookFromPageContextNew(hookName, pageContext);\n    return await execHookDirect(hooks, pageContext, preparePageContextForPublicUsage);\n}\nasync function execHookGlobal(hookName, pageConfigGlobal, pageContext, hookArg, prepareForPublicUsage) {\n    const hooks = getHookFromPageConfigGlobalCumulative(pageConfigGlobal, hookName);\n    const hookArgForPublicUsage = prepareForPublicUsage(hookArg);\n    await Promise.all(hooks.map(async (hook) => {\n        await execHookDirectAsync(() => hook.hookFn(hookArgForPublicUsage), hook, pageContext);\n    }));\n}\nasync function execHookDirect(hooks, pageContext, preparePageContextForPublicUsage) {\n    if (!hooks.length)\n        return [];\n    const pageContextForPublicUsage = preparePageContextForPublicUsage(pageContext);\n    const hooksWithResult = await Promise.all(hooks.map(async (hook) => {\n        const hookReturn = await execHookDirectAsync(() => hook.hookFn(pageContextForPublicUsage), hook, pageContextForPublicUsage);\n        return { ...hook, hookReturn };\n    }));\n    return hooksWithResult;\n}\nasync function execHookDirectSingle(hook, pageContext, preparePageContextForPublicUsage) {\n    const hooksWithResult = await execHookDirect([hook], pageContext, preparePageContextForPublicUsage);\n    const { hookReturn } = hooksWithResult[0];\n    assertUsage(hookReturn === undefined, `The ${hook.hookName}() hook defined by ${hook.hookFilePath} isn't allowed to return a value`);\n}\nasync function execHookDirectSingleWithReturn(hook, pageContext, preparePageContextForPublicUsage) {\n    const hooksWithResult = await execHookDirect([hook], pageContext, preparePageContextForPublicUsage);\n    const { hookReturn } = hooksWithResult[0];\n    return { hookReturn };\n}\nfunction isUserHookError(err) {\n    if (!isObject(err))\n        return false;\n    return globalObject.userHookErrors.get(err) ?? false;\n}\nasync function execHookDirectWithoutPageContext(hookFnCaller, hook) {\n    const { hookName, hookFilePath, hookTimeout } = hook;\n    const hookReturn = await execHookDirectAsync(hookFnCaller, { hookName, hookFilePath, hookTimeout }, null);\n    return hookReturn;\n}\nfunction execHookDirectAsync(hookFnCaller, hook, pageContextForPublicUsage) {\n    const { hookName, hookFilePath, hookTimeout: { error: timeoutErr, warning: timeoutWarn }, } = hook;\n    let resolve;\n    let reject;\n    const promise = new Promise((resolve_, reject_) => {\n        resolve = (ret) => {\n            clearTimeouts();\n            resolve_(ret);\n        };\n        reject = (err) => {\n            clearTimeouts();\n            reject_(err);\n        };\n    });\n    const clearTimeouts = () => {\n        if (currentTimeoutWarn)\n            clearTimeout(currentTimeoutWarn);\n        if (currentTimeoutErr)\n            clearTimeout(currentTimeoutErr);\n    };\n    const currentTimeoutWarn = isNotDisabled(timeoutWarn) &&\n        setTimeout(() => {\n            assertWarning(false, `The ${hookName}() hook defined by ${hookFilePath} is slow: it's taking more than ${humanizeTime(timeoutWarn)} (https://vike.dev/hooksTimeout)`, { onlyOnce: false });\n        }, timeoutWarn);\n    const currentTimeoutErr = isNotDisabled(timeoutErr) &&\n        setTimeout(() => {\n            const err = getProjectError(`The ${hookName}() hook defined by ${hookFilePath} timed out: it didn't finish after ${humanizeTime(timeoutErr)} (https://vike.dev/hooksTimeout)`);\n            reject(err);\n        }, timeoutErr);\n    (async () => {\n        try {\n            providePageContextInternal(pageContextForPublicUsage);\n            const ret = await hookFnCaller();\n            resolve(ret);\n        }\n        catch (err) {\n            if (isObject(err)) {\n                globalObject.userHookErrors.set(err, { hookName, hookFilePath });\n            }\n            reject(err);\n        }\n    })();\n    return promise;\n}\nfunction execHookDirectSync(hook, pageContext, preparePageContextForPublicUsage) {\n    const pageContextForPublicUsage = preparePageContextForPublicUsage(pageContext);\n    providePageContextInternal(pageContextForPublicUsage);\n    const hookReturn = hook.hookFn(pageContextForPublicUsage);\n    return { hookReturn };\n}\nfunction isNotDisabled(timeout) {\n    return !!timeout && timeout !== Infinity;\n}\nfunction getPageContext_sync() {\n    const { pageContext } = globalObject;\n    if (!pageContext)\n        return null;\n    const pageContextForPublicUsage = pageContext._isProxyObject\n        ? // providePageContext() is called on the user-land (e.g. it's called by `vike-{react,vue,solid}`) thus it's already a proxy\n            pageContext\n        : preparePageContextForPublicUsage(pageContext);\n    return pageContextForPublicUsage;\n}\n/**\n * Provide `pageContext` for universal hooks.\n *\n * https://vike.dev/getPageContext\n */\nfunction providePageContext(pageContext) {\n    providePageContextInternal(pageContext);\n}\nfunction providePageContextInternal(pageContext) {\n    globalObject.pageContext = pageContext;\n    // Promise.resolve() is quicker than process.nextTick() and setImmediate()\n    // https://stackoverflow.com/questions/67949576/process-nexttick-before-promise-resolve-then\n    Promise.resolve().then(() => {\n        globalObject.pageContext = null;\n    });\n}\n","export { createGlobalContextShared };\nexport { getGlobalContextSyncErrMsg };\nimport { assert, changeEnumerable, genPromise, objectAssign, objectReplace, unique } from './utils.js';\nimport { parseVirtualFileExportsGlobalEntry } from './getPageFiles/parseVirtualFileExportsGlobalEntry.js';\nimport { resolveGlobalContextConfig } from './page-configs/resolveVikeConfigPublic.js';\nimport { execHookGlobal } from './hooks/execHook.js';\nimport { prepareGlobalContextForPublicUsage, } from './prepareGlobalContextForPublicUsage.js';\nimport { getHookFromPageConfigGlobalCumulative } from './hooks/getHook.js';\nconst getGlobalContextSyncErrMsg = \"The global context isn't set yet, call getGlobalContextSync() later or use getGlobalContext() instead.\";\n// TO-DO/eventually use flat globalContext  like flat pageContext\nasync function createGlobalContextShared(virtualFileExportsGlobalEntry, globalObject, addGlobalContext, \n// TO-DO/next-major-release: we'll be able to remove addGlobalContextTmp after loadPageRoutes() is sync (it will be sync after we remove the old design)\naddGlobalContextTmp, addGlobalContextAsync) {\n    const { previousCreateGlobalContextPromise } = globalObject;\n    const { promise, resolve } = genPromise({\n        // Avoid this Cloudflare Worker error:\n        // ```console\n        // Error: Disallowed operation called within global scope. Asynchronous I/O (ex: fetch() or connect()), setting a timeout, and generating random values are not allowed within global scope. To fix this error, perform this operation within a handler.\n        // ```\n        timeout: null,\n    });\n    globalObject.previousCreateGlobalContextPromise = promise;\n    if (previousCreateGlobalContextPromise) {\n        assert(globalObject.globalContext);\n        await previousCreateGlobalContextPromise;\n    }\n    try {\n        const globalContext = createGlobalContextBase(virtualFileExportsGlobalEntry);\n        let isNewGlobalContext;\n        if (!globalObject.globalContext) {\n            // We set globalObject.globalContext early and before any async operations, so that getGlobalContextSync() can be used early.\n            // - Required by vike-vercel\n            globalObject.globalContext = globalContext;\n            isNewGlobalContext = false;\n        }\n        else {\n            isNewGlobalContext = true;\n        }\n        if (addGlobalContext &&\n            // TO-DO/next-major-release: remove\n            globalContext._pageConfigs.length > 0) {\n            const globalContextAdded = addGlobalContext?.(globalContext);\n            objectAssign(globalContext, globalContextAdded);\n        }\n        else {\n            const globalContextAdded = await addGlobalContextTmp?.(globalContext);\n            objectAssign(globalContext, globalContextAdded);\n        }\n        {\n            const globalContextAddedAsync = await addGlobalContextAsync?.(globalContext);\n            objectAssign(globalContext, globalContextAddedAsync);\n        }\n        const onCreateGlobalContextHooks = getHookFromPageConfigGlobalCumulative(globalContext._pageConfigGlobal, 'onCreateGlobalContext');\n        let hooksCalled = false;\n        if (!hooksAreEqual(globalObject.onCreateGlobalContextHooks ?? [], onCreateGlobalContextHooks)) {\n            globalObject.onCreateGlobalContextHooks = onCreateGlobalContextHooks;\n            await execHookGlobal('onCreateGlobalContext', globalContext._pageConfigGlobal, null, globalContext, prepareGlobalContextForPublicUsage);\n            hooksCalled = true;\n        }\n        if (isNewGlobalContext) {\n            // Singleton: ensure all `globalContext` user-land references are preserved & updated.\n            if (hooksCalled) {\n                objectReplace(globalObject.globalContext, globalContext);\n            }\n            else {\n                // We don't use objectReplace() in order to keep user-land properties.\n                objectAssign(globalObject.globalContext, globalContext, true);\n            }\n        }\n        return globalObject.globalContext;\n    }\n    finally {\n        resolve();\n    }\n}\nfunction createGlobalContextBase(virtualFileExportsGlobalEntry) {\n    const { pageFilesAll, pageConfigs, pageConfigGlobal } = parseVirtualFileExportsGlobalEntry(virtualFileExportsGlobalEntry);\n    const allPageIds = getAllPageIds(pageFilesAll, pageConfigs);\n    const globalContextAddendum = resolveGlobalContextConfig(pageConfigs, pageConfigGlobal);\n    const globalContext = {\n        /**\n         * Useful for distinguishing `globalContext` from other objects and narrowing down TypeScript unions.\n         *\n         * https://vike.dev/globalContext#typescript\n         */\n        isGlobalContext: true,\n        _isOriginalObject: true,\n        _virtualFileExportsGlobalEntry: virtualFileExportsGlobalEntry,\n        _pageFilesAll: pageFilesAll,\n        _pageConfigs: pageConfigs,\n        _pageConfigGlobal: pageConfigGlobal,\n        _allPageIds: allPageIds,\n        ...globalContextAddendum,\n    };\n    changeEnumerable(globalContext, '_isOriginalObject', false);\n    return globalContext;\n}\nfunction getAllPageIds(pageFilesAll, pageConfigs) {\n    const fileIds = pageFilesAll.filter(({ isDefaultPageFile }) => !isDefaultPageFile).map(({ pageId }) => pageId);\n    const allPageIds = unique(fileIds);\n    const allPageIds2 = pageConfigs.map((p) => p.pageId);\n    return [...allPageIds, ...allPageIds2];\n}\nfunction hooksAreEqual(hooks1, hooks2) {\n    const hooksFn1 = hooks1.map((hook) => hook.hookFn);\n    const hooksFn2 = hooks2.map((hook) => hook.hookFn);\n    return (hooksFn1.every((hook) => hooksFn2.includes(hook)) &&\n        //\n        hooksFn2.every((hook) => hooksFn1.includes(hook)));\n}\n","// Public usage\nexport { getGlobalContext };\nexport { getGlobalContextSync };\nexport { setVirtualFileExportsGlobalEntry };\n// Internal usage\nexport { getGlobalContextClientInternalShared };\nimport { createGlobalContextShared, getGlobalContextSyncErrMsg, } from '../../shared-server-client/createGlobalContextShared.js';\nimport { getGlobalContextSerializedInHtml } from './getJsonSerializedInHtml.js';\nimport { assert, assertUsage, genPromise, getGlobalObject, objectAssign, checkType } from './utils.js';\nconst globalObject = getGlobalObject('getGlobalContextClientInternalShared.ts', (() => {\n    const { promise: globalContextInitialPromise, resolve: globalContextInitialPromiseResolve } = genPromise();\n    return {\n        globalContextInitialPromise,\n        globalContextInitialPromiseResolve,\n    };\n})());\nasync function getGlobalContextClientInternalShared() {\n    // Get\n    if (globalObject.globalContextPromise) {\n        const globalContext = await globalObject.globalContextPromise;\n        return globalContext;\n    }\n    // Create\n    const globalContextPromise = createGlobalContextShared(globalObject.virtualFileExportsGlobalEntry, globalObject, () => {\n        const globalContextAddendum = {\n            /**\n             * Whether the environment is the client-side:\n             * - In the browser, the value is `true`.\n             * - Upon SSR and pre-rendering, the value is `false`.\n             *\n             * https://vike.dev/globalContext#isClientSide\n             */\n            isClientSide: true,\n        };\n        objectAssign(globalContextAddendum, getGlobalContextSerializedInHtml());\n        return globalContextAddendum;\n    });\n    globalObject.globalContextPromise = globalContextPromise;\n    const globalContext = await globalContextPromise;\n    assert(globalObject.globalContext === globalContext);\n    globalObject.globalContextInitialPromiseResolve();\n    // Return\n    return globalContext;\n}\nasync function getGlobalContext() {\n    await globalObject.globalContextInitialPromise;\n    const globalContext = await globalObject.globalContextPromise;\n    assert(globalContext);\n    checkType(globalContext);\n    return globalContext;\n}\nfunction getGlobalContextSync() {\n    const { globalContext } = globalObject;\n    assertUsage(globalContext, getGlobalContextSyncErrMsg);\n    checkType(globalContext);\n    return globalContext;\n}\nasync function setVirtualFileExportsGlobalEntry(virtualFileExportsGlobalEntry) {\n    // HMR => virtualFileExportsGlobalEntry differ\n    if (globalObject.virtualFileExportsGlobalEntry !== virtualFileExportsGlobalEntry) {\n        delete globalObject.globalContextPromise;\n        globalObject.virtualFileExportsGlobalEntry = virtualFileExportsGlobalEntry;\n        // Eagerly call +onCreateGlobalContext() hooks\n        await getGlobalContextClientInternalShared();\n    }\n}\n","export { getGlobalContextClientInternal };\nimport { getGlobalContextClientInternalShared } from '../shared/getGlobalContextClientInternalShared.js';\nasync function getGlobalContextClientInternal() {\n    const globalContext = await getGlobalContextClientInternalShared();\n    return globalContext;\n}\n","export { preparePageContextForPublicUsageClientShared };\nexport { preparePageContextForPublicUsageClientMinimal };\nimport { objectAssign } from '../runtime-server-routing/utils.js';\nimport { assertPropertyGetters, preparePageContextForPublicUsage, } from '../../shared-server-client/preparePageContextForPublicUsage.js';\nfunction preparePageContextForPublicUsageClientShared(pageContext) {\n    // TO-DO/soon/proxy: use proxy\n    const Page = pageContext.config?.Page ||\n        // TO-DO/next-major-release: remove\n        pageContext.exports?.Page;\n    objectAssign(pageContext, { Page });\n    // TO-DO/next-major-release: after we remove supportVueReactiviy() we can call this later inside the agnostic preparePageContextForPublicUsage()\n    assertPropertyGetters(pageContext);\n    // TO-DO/next-major-release: remove\n    // - Requires https://github.com/vikejs/vike-vue/issues/198\n    // - Last time I tried to remove it (https://github.com/vikejs/vike/commit/705fd23598d9d69bf46a52c8550216cd7117ce71) the tests were failing as expected: only the Vue integrations that used shallowReactive() failed.\n    supportVueReactiviy(pageContext);\n    return preparePageContextForPublicUsageClientMinimal(pageContext);\n}\nfunction preparePageContextForPublicUsageClientMinimal(pageContext) {\n    const pageContextPublic = preparePageContextForPublicUsage(pageContext);\n    return pageContextPublic;\n}\n// With Vue + Client Routing, the `pageContext` is made reactive:\n// ```js\n// import { reactive } from 'vue'\n// // See /examples/vue-full/renderer/createVueApp.ts\n// const pageContextReactive = reactive(pageContext)\n// ```\nfunction supportVueReactiviy(pageContext) {\n    resolveGetters(pageContext);\n}\n// Remove property descriptor getters because they break Vue's reactivity.\n// E.g. resolve the `pageContext.urlPathname` getter.\nfunction resolveGetters(pageContext) {\n    Object.entries(pageContext).forEach(([key, val]) => {\n        delete pageContext[key];\n        pageContext[key] = val;\n    });\n}\n","export { preparePageContextForPublicUsageClient };\nimport { preparePageContextForPublicUsageClientShared } from '../shared/preparePageContextForPublicUsageClientShared.js';\nfunction preparePageContextForPublicUsageClient(pageContext) {\n    return preparePageContextForPublicUsageClientShared(pageContext);\n}\n","export { createPageContextClientSide };\nimport { assertUsage, updateType, objectAssign } from './utils.js';\nimport { getPageContextSerializedInHtml } from '../shared/getJsonSerializedInHtml.js';\nimport { loadPageConfigsLazyClientSide, } from '../shared/loadPageConfigsLazyClientSide.js';\nimport { getCurrentUrl } from '../shared/getCurrentUrl.js';\nimport { createPageContextObject, createPageContextShared } from '../../shared-server-client/createPageContextShared.js';\nimport { getGlobalContextClientInternal } from './getGlobalContextClientInternal.js';\nimport { preparePageContextForPublicUsageClient, } from './preparePageContextForPublicUsageClient.js';\nimport { execHook } from '../../shared-server-client/hooks/execHook.js';\nconst urlFirst = getCurrentUrl({ withoutHash: true });\nasync function createPageContextClientSide() {\n    const globalContext = await getGlobalContextClientInternal();\n    const pageContextCreated = createPageContextObject();\n    objectAssign(pageContextCreated, {\n        isClientSide: true,\n        isPrerendering: false,\n        isHydration: true,\n        _globalContext: globalContext,\n        _pageFilesAll: globalContext._pageFilesAll, // TO-DO/next-major-release: remove\n        isBackwardNavigation: null,\n        isHistoryNavigation: null,\n        _hasPageContextFromServer: true,\n    });\n    objectAssign(pageContextCreated, getPageContextSerializedInHtml());\n    // Sets pageContext.config to global configs\n    updateType(pageContextCreated, createPageContextShared(pageContextCreated, globalContext._globalConfigPublic));\n    // Sets pageContext.config to local configs (overrides the pageContext.config set above)\n    updateType(pageContextCreated, await loadPageConfigsLazyClientSideAndExecHook(pageContextCreated));\n    assertPristineUrl();\n    return pageContextCreated;\n}\nfunction assertPristineUrl() {\n    const urlCurrent = getCurrentUrl({ withoutHash: true });\n    assertUsage(urlFirst === urlCurrent, `The URL was manipulated before the hydration finished ('${urlFirst}' to '${urlCurrent}'). Ensure the hydration has finished before manipulating the URL. Consider using the onHydrationEnd() hook.`);\n}\nasync function loadPageConfigsLazyClientSideAndExecHook(pageContext) {\n    const pageContextAddendum = await loadPageConfigsLazyClientSide(pageContext.pageId, pageContext._pageFilesAll, pageContext._globalContext._pageConfigs, pageContext._globalContext._pageConfigGlobal);\n    objectAssign(pageContext, pageContextAddendum);\n    await execHook('onCreatePageContext', pageContext, preparePageContextForPublicUsageClient);\n    return pageContext;\n}\n","export { execHookOnRenderClient };\nimport { assert, assertUsage } from '../runtime-server-routing/utils.js';\nimport { getHookFromPageContext } from '../../shared-server-client/hooks/getHook.js';\nimport { execHookDirectSingle } from '../../shared-server-client/hooks/execHook.js';\nasync function execHookOnRenderClient(pageContext, prepareForPublicUsage) {\n    let hook = null;\n    {\n        const renderHook = getHookFromPageContext(pageContext, 'render');\n        hook = renderHook;\n    }\n    {\n        const renderHook = getHookFromPageContext(pageContext, 'onRenderClient');\n        if (renderHook) {\n            hook = renderHook;\n        }\n    }\n    if (!hook) {\n        const urlToShowToUser = getUrlToShowToUser(pageContext);\n        assert(urlToShowToUser);\n        if (pageContext._globalContext._pageConfigs.length > 0) {\n            // V1 design\n            assertUsage(false, `No onRenderClient() hook defined for URL '${urlToShowToUser}', but it's needed, see https://vike.dev/onRenderClient`);\n        }\n        else {\n            // TO-DO/next-major-release: remove\n            // V0.4 design\n            const pageClientsFilesLoaded = pageContext._pageFilesLoaded.filter((p) => p.fileType === '.page.client');\n            let errMsg;\n            if (pageClientsFilesLoaded.length === 0) {\n                errMsg = 'No file `*.page.client.*` found for URL ' + urlToShowToUser;\n            }\n            else {\n                errMsg =\n                    'One of the following files should export a render() hook: ' +\n                        pageClientsFilesLoaded.map((p) => p.filePath).join(' ');\n            }\n            assertUsage(false, errMsg);\n        }\n    }\n    // We don't use a try-catch wrapper because rendering errors are usually handled by the UI framework. (E.g. React's Error Boundaries.)\n    await execHookDirectSingle(hook, pageContext, prepareForPublicUsage);\n}\nfunction getUrlToShowToUser(pageContext) {\n    let url;\n    // try/catch to avoid passToClient assertUsage() (although: this may not be needed anymore, since we're now accessing pageContext and not pageContextForPublicUsage)\n    try {\n        url =\n            // Client Routing\n            pageContext.urlPathname ??\n                // Server Routing\n                pageContext.urlOriginal;\n    }\n    catch { }\n    url = url ?? window.location.href;\n    return url;\n}\n","import { assertServerRouting } from '../../utils/assertRoutingType.js';\nassertServerRouting();\nimport { createPageContextClientSide } from './createPageContextClientSide.js';\nimport { execHookOnRenderClient } from '../shared/execHookOnRenderClient.js';\nimport { assertSingleInstance_onClientEntryServerRouting } from './utils.js';\nimport { removeFoucBuster } from '../shared/removeFoucBuster.js';\nimport { execHook } from '../../shared-server-client/hooks/execHook.js';\nimport { preparePageContextForPublicUsageClient } from './preparePageContextForPublicUsageClient.js';\nimport { setVirtualFileExportsGlobalEntry } from '../shared/getGlobalContextClientInternalShared.js';\n// @ts-expect-error\nimport * as virtualFileExportsGlobalEntry from 'virtual:vike:global-entry:client:server-routing';\nassertSingleInstance_onClientEntryServerRouting(import.meta.env.PROD);\nsetVirtualFileExportsGlobalEntry(virtualFileExportsGlobalEntry);\nif (import.meta.env.DEV)\n    removeFoucBuster();\nhydrate();\nasync function hydrate() {\n    const pageContext = await createPageContextClientSide();\n    await execHookOnRenderClient(pageContext, preparePageContextForPublicUsageClient);\n    await execHook('onHydrationEnd', pageContext, preparePageContextForPublicUsageClient);\n}\n"],"file":"entry-server-routing.BBEF3bMo.js"}